function $N(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function $_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function JN(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var yb={exports:{}},rg={},xb={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah=Symbol.for("react.element"),QN=Symbol.for("react.portal"),eD=Symbol.for("react.fragment"),tD=Symbol.for("react.strict_mode"),nD=Symbol.for("react.profiler"),iD=Symbol.for("react.provider"),rD=Symbol.for("react.context"),sD=Symbol.for("react.forward_ref"),oD=Symbol.for("react.suspense"),aD=Symbol.for("react.memo"),lD=Symbol.for("react.lazy"),Hw=Symbol.iterator;function uD(n){return n===null||typeof n!="object"?null:(n=Hw&&n[Hw]||n["@@iterator"],typeof n=="function"?n:null)}var _b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sb=Object.assign,Mb={};function Wu(n,e,t){this.props=n,this.context=e,this.refs=Mb,this.updater=t||_b}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Wu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wb(){}wb.prototype=Wu.prototype;function J_(n,e,t){this.props=n,this.context=e,this.refs=Mb,this.updater=t||_b}var Q_=J_.prototype=new wb;Q_.constructor=J_;Sb(Q_,Wu.prototype);Q_.isPureReactComponent=!0;var Gw=Array.isArray,Eb=Object.prototype.hasOwnProperty,e1={current:null},Tb={key:!0,ref:!0,__self:!0,__source:!0};function Ab(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Eb.call(e,i)&&!Tb.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:ah,type:n,key:s,ref:o,props:r,_owner:e1.current}}function cD(n,e){return{$$typeof:ah,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function t1(n){return typeof n=="object"&&n!==null&&n.$$typeof===ah}function fD(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Ww=/\/+/g;function dv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?fD(""+n.key):e.toString(36)}function jp(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ah:case QN:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+dv(o,0):i,Gw(r)?(t="",n!=null&&(t=n.replace(Ww,"$&/")+"/"),jp(r,e,t,"",function(f){return f})):r!=null&&(t1(r)&&(r=cD(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Ww,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Gw(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+dv(s,a);o+=jp(s,e,t,l,r)}else if(l=uD(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+dv(s,a++),o+=jp(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ad(n,e,t){if(n==null)return n;var i=[],r=0;return jp(n,i,"","",function(s){return e.call(t,s,r++)}),i}function hD(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var wi={current:null},Xp={transition:null},dD={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Xp,ReactCurrentOwner:e1};Pt.Children={map:Ad,forEach:function(n,e,t){Ad(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ad(n,function(){e++}),e},toArray:function(n){return Ad(n,function(e){return e})||[]},only:function(n){if(!t1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pt.Component=Wu;Pt.Fragment=eD;Pt.Profiler=nD;Pt.PureComponent=J_;Pt.StrictMode=tD;Pt.Suspense=oD;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dD;Pt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Sb({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=e1.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Eb.call(e,l)&&!Tb.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];i.children=a}return{$$typeof:ah,type:n.type,key:r,ref:s,props:i,_owner:o}};Pt.createContext=function(n){return n={$$typeof:rD,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:iD,_context:n},n.Consumer=n};Pt.createElement=Ab;Pt.createFactory=function(n){var e=Ab.bind(null,n);return e.type=n,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(n){return{$$typeof:sD,render:n}};Pt.isValidElement=t1;Pt.lazy=function(n){return{$$typeof:lD,_payload:{_status:-1,_result:n},_init:hD}};Pt.memo=function(n,e){return{$$typeof:aD,type:n,compare:e===void 0?null:e}};Pt.startTransition=function(n){var e=Xp.transition;Xp.transition={};try{n()}finally{Xp.transition=e}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(n,e){return wi.current.useCallback(n,e)};Pt.useContext=function(n){return wi.current.useContext(n)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(n){return wi.current.useDeferredValue(n)};Pt.useEffect=function(n,e){return wi.current.useEffect(n,e)};Pt.useId=function(){return wi.current.useId()};Pt.useImperativeHandle=function(n,e,t){return wi.current.useImperativeHandle(n,e,t)};Pt.useInsertionEffect=function(n,e){return wi.current.useInsertionEffect(n,e)};Pt.useLayoutEffect=function(n,e){return wi.current.useLayoutEffect(n,e)};Pt.useMemo=function(n,e){return wi.current.useMemo(n,e)};Pt.useReducer=function(n,e,t){return wi.current.useReducer(n,e,t)};Pt.useRef=function(n){return wi.current.useRef(n)};Pt.useState=function(n){return wi.current.useState(n)};Pt.useSyncExternalStore=function(n,e,t){return wi.current.useSyncExternalStore(n,e,t)};Pt.useTransition=function(){return wi.current.useTransition()};Pt.version="18.2.0";xb.exports=Pt;var W=xb.exports;const _r=$_(W),pD=$N({__proto__:null,default:_r},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mD=W,gD=Symbol.for("react.element"),vD=Symbol.for("react.fragment"),yD=Object.prototype.hasOwnProperty,xD=mD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_D={key:!0,ref:!0,__self:!0,__source:!0};function bb(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)yD.call(e,i)&&!_D.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:gD,type:n,key:s,ref:o,props:r,_owner:xD.current}}rg.Fragment=vD;rg.jsx=bb;rg.jsxs=bb;yb.exports=rg;var te=yb.exports,Xy={},Cb={exports:{}},Qi={},Pb={exports:{}},Rb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,B){var V=N.length;N.push(B);e:for(;0<V;){var Y=V-1>>>1,J=N[Y];if(0<r(J,B))N[Y]=B,N[V]=J,V=Y;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],V=N.pop();if(V!==B){N[0]=V;e:for(var Y=0,J=N.length,Q=J>>>1;Y<Q;){var le=2*(Y+1)-1,ge=N[le],Ee=le+1,be=N[Ee];if(0>r(ge,V))Ee<J&&0>r(be,ge)?(N[Y]=be,N[Ee]=V,Y=Ee):(N[Y]=ge,N[le]=V,Y=le);else if(Ee<J&&0>r(be,V))N[Y]=be,N[Ee]=V,Y=Ee;else break e}}return B}function r(N,B){var V=N.sortIndex-B.sortIndex;return V!==0?V:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,d=null,p=3,m=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(N){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=N)i(f),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(f)}}function T(N){if(w=!1,M(N),!y)if(t(l)!==null)y=!0,$(P);else{var B=t(f);B!==null&&se(T,B.startTime-N)}}function P(N,B){y=!1,w&&(w=!1,v(D),D=-1),m=!0;var V=p;try{for(M(B),d=t(l);d!==null&&(!(d.expirationTime>B)||N&&!z());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,p=d.priorityLevel;var J=Y(d.expirationTime<=B);B=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&i(l),M(B)}else i(l);d=t(l)}if(d!==null)var Q=!0;else{var le=t(f);le!==null&&se(T,le.startTime-B),Q=!1}return Q}finally{d=null,p=V,m=!1}}var b=!1,L=null,D=-1,C=5,R=-1;function z(){return!(n.unstable_now()-R<C)}function Z(){if(L!==null){var N=n.unstable_now();R=N;var B=!0;try{B=L(!0,N)}finally{B?oe():(b=!1,L=null)}}else b=!1}var oe;if(typeof S=="function")oe=function(){S(Z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,K=H.port2;H.port1.onmessage=Z,oe=function(){K.postMessage(null)}}else oe=function(){x(Z,0)};function $(N){L=N,b||(b=!0,oe())}function se(N,B){D=x(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,$(P))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var V=p;p=B;try{return N()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=p;p=N;try{return B()}finally{p=V}},n.unstable_scheduleCallback=function(N,B,V){var Y=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,N){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,N={id:h++,callback:B,priorityLevel:N,startTime:V,expirationTime:J,sortIndex:-1},V>Y?(N.sortIndex=V,e(f,N),t(l)===null&&N===t(f)&&(w?(v(D),D=-1):w=!0,se(T,V-Y))):(N.sortIndex=J,e(l,N),y||m||(y=!0,$(P))),N},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(N){var B=p;return function(){var V=p;p=B;try{return N.apply(this,arguments)}finally{p=V}}}})(Rb);Pb.exports=Rb;var SD=Pb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb=W,$i=SD;function Ae(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ib=new Set,yf={};function tl(n,e){Pu(n,e),Pu(n+"Capture",e)}function Pu(n,e){for(yf[n]=e,n=0;n<e.length;n++)Ib.add(e[n])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yy=Object.prototype.hasOwnProperty,MD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jw={},Xw={};function wD(n){return Yy.call(Xw,n)?!0:Yy.call(jw,n)?!1:MD.test(n)?Xw[n]=!0:(jw[n]=!0,!1)}function ED(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function TD(n,e,t,i){if(e===null||typeof e>"u"||ED(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ei(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Kn[n]=new Ei(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Kn[e]=new Ei(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Kn[n]=new Ei(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Kn[n]=new Ei(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Kn[n]=new Ei(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Kn[n]=new Ei(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Kn[n]=new Ei(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Kn[n]=new Ei(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Kn[n]=new Ei(n,5,!1,n.toLowerCase(),null,!1,!1)});var n1=/[\-:]([a-z])/g;function i1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(n1,i1);Kn[e]=new Ei(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(n1,i1);Kn[e]=new Ei(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(n1,i1);Kn[e]=new Ei(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Kn[n]=new Ei(n,1,!1,n.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Kn[n]=new Ei(n,1,!1,n.toLowerCase(),null,!0,!0)});function r1(n,e,t,i){var r=Kn.hasOwnProperty(e)?Kn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TD(e,t,r,i)&&(t=null),i||r===null?wD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Zs=Lb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bd=Symbol.for("react.element"),Jl=Symbol.for("react.portal"),Ql=Symbol.for("react.fragment"),s1=Symbol.for("react.strict_mode"),qy=Symbol.for("react.profiler"),Nb=Symbol.for("react.provider"),Db=Symbol.for("react.context"),o1=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),Ky=Symbol.for("react.suspense_list"),a1=Symbol.for("react.memo"),vo=Symbol.for("react.lazy"),Ob=Symbol.for("react.offscreen"),Yw=Symbol.iterator;function xc(n){return n===null||typeof n!="object"?null:(n=Yw&&n[Yw]||n["@@iterator"],typeof n=="function"?n:null)}var un=Object.assign,pv;function Xc(n){if(pv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);pv=e&&e[1]||""}return`
`+pv+n}var mv=!1;function gv(n,e){if(!n||mv)return"";mv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{mv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Xc(n):""}function AD(n){switch(n.tag){case 5:return Xc(n.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return n=gv(n.type,!1),n;case 11:return n=gv(n.type.render,!1),n;case 1:return n=gv(n.type,!0),n;default:return""}}function $y(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ql:return"Fragment";case Jl:return"Portal";case qy:return"Profiler";case s1:return"StrictMode";case Zy:return"Suspense";case Ky:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Db:return(n.displayName||"Context")+".Consumer";case Nb:return(n._context.displayName||"Context")+".Provider";case o1:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case a1:return e=n.displayName||null,e!==null?e:$y(n.type)||"Memo";case vo:e=n._payload,n=n._init;try{return $y(n(e))}catch{}}return null}function bD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $y(e);case 8:return e===s1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ko(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ub(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CD(n){var e=Ub(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Cd(n){n._valueTracker||(n._valueTracker=CD(n))}function kb(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Ub(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function dm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Jy(n,e){var t=e.checked;return un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function qw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ko(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fb(n,e){e=e.checked,e!=null&&r1(n,"checked",e,!1)}function Qy(n,e){Fb(n,e);var t=ko(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ex(n,e.type,t):e.hasOwnProperty("defaultValue")&&ex(n,e.type,ko(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Zw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ex(n,e,t){(e!=="number"||dm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Yc=Array.isArray;function Su(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ko(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function tx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return un({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Kw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ae(92));if(Yc(t)){if(1<t.length)throw Error(Ae(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ko(t)}}function zb(n,e){var t=ko(e.value),i=ko(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function $w(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Bb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nx(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Bb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Pd,Vb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Pd=Pd||document.createElement("div"),Pd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function xf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PD=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(n){PD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Jc[e]=Jc[n]})});function Hb(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Jc.hasOwnProperty(n)&&Jc[n]?(""+e).trim():e+"px"}function Gb(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=Hb(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var RD=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ix(n,e){if(e){if(RD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function rx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sx=null;function l1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ox=null,Mu=null,wu=null;function Jw(n){if(n=ch(n)){if(typeof ox!="function")throw Error(Ae(280));var e=n.stateNode;e&&(e=ug(e),ox(n.stateNode,n.type,e))}}function Wb(n){Mu?wu?wu.push(n):wu=[n]:Mu=n}function jb(){if(Mu){var n=Mu,e=wu;if(wu=Mu=null,Jw(n),e)for(n=0;n<e.length;n++)Jw(e[n])}}function Xb(n,e){return n(e)}function Yb(){}var vv=!1;function qb(n,e,t){if(vv)return n(e,t);vv=!0;try{return Xb(n,e,t)}finally{vv=!1,(Mu!==null||wu!==null)&&(Yb(),jb())}}function _f(n,e){var t=n.stateNode;if(t===null)return null;var i=ug(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ae(231,e,typeof t));return t}var ax=!1;if(Vs)try{var _c={};Object.defineProperty(_c,"passive",{get:function(){ax=!0}}),window.addEventListener("test",_c,_c),window.removeEventListener("test",_c,_c)}catch{ax=!1}function LD(n,e,t,i,r,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(h){this.onError(h)}}var Qc=!1,pm=null,mm=!1,lx=null,ID={onError:function(n){Qc=!0,pm=n}};function ND(n,e,t,i,r,s,o,a,l){Qc=!1,pm=null,LD.apply(ID,arguments)}function DD(n,e,t,i,r,s,o,a,l){if(ND.apply(this,arguments),Qc){if(Qc){var f=pm;Qc=!1,pm=null}else throw Error(Ae(198));mm||(mm=!0,lx=f)}}function nl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Zb(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Qw(n){if(nl(n)!==n)throw Error(Ae(188))}function OD(n){var e=n.alternate;if(!e){if(e=nl(n),e===null)throw Error(Ae(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Qw(r),n;if(s===i)return Qw(r),e;s=s.sibling}throw Error(Ae(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ae(189))}}if(t.alternate!==i)throw Error(Ae(190))}if(t.tag!==3)throw Error(Ae(188));return t.stateNode.current===t?n:e}function Kb(n){return n=OD(n),n!==null?$b(n):null}function $b(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$b(n);if(e!==null)return e;n=n.sibling}return null}var Jb=$i.unstable_scheduleCallback,eE=$i.unstable_cancelCallback,UD=$i.unstable_shouldYield,kD=$i.unstable_requestPaint,_n=$i.unstable_now,FD=$i.unstable_getCurrentPriorityLevel,u1=$i.unstable_ImmediatePriority,Qb=$i.unstable_UserBlockingPriority,gm=$i.unstable_NormalPriority,zD=$i.unstable_LowPriority,eC=$i.unstable_IdlePriority,sg=null,os=null;function BD(n){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(sg,n,void 0,(n.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:GD,VD=Math.log,HD=Math.LN2;function GD(n){return n>>>=0,n===0?32:31-(VD(n)/HD|0)|0}var Rd=64,Ld=4194304;function qc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=qc(a):(s&=o,s!==0&&(i=qc(s)))}else o=t&~r,o!==0?i=qc(o):s!==0&&(i=qc(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Br(e),r=1<<t,i|=n[t],e&=~r;return i}function WD(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jD(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Br(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=WD(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function ux(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function tC(){var n=Rd;return Rd<<=1,!(Rd&4194240)&&(Rd=64),n}function yv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function lh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Br(e),n[e]=t}function XD(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Br(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function c1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Br(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Bt=0;function nC(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var iC,f1,rC,sC,oC,cx=!1,Id=[],To=null,Ao=null,bo=null,Sf=new Map,Mf=new Map,_o=[],YD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tE(n,e){switch(n){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":Sf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(e.pointerId)}}function Sc(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ch(e),e!==null&&f1(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function qD(n,e,t,i,r){switch(e){case"focusin":return To=Sc(To,n,e,t,i,r),!0;case"dragenter":return Ao=Sc(Ao,n,e,t,i,r),!0;case"mouseover":return bo=Sc(bo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Sf.set(s,Sc(Sf.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Mf.set(s,Sc(Mf.get(s)||null,n,e,t,i,r)),!0}return!1}function aC(n){var e=Pa(n.target);if(e!==null){var t=nl(e);if(t!==null){if(e=t.tag,e===13){if(e=Zb(t),e!==null){n.blockedOn=e,oC(n.priority,function(){rC(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yp(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=fx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);sx=i,t.target.dispatchEvent(i),sx=null}else return e=ch(t),e!==null&&f1(e),n.blockedOn=t,!1;e.shift()}return!0}function nE(n,e,t){Yp(n)&&t.delete(e)}function ZD(){cx=!1,To!==null&&Yp(To)&&(To=null),Ao!==null&&Yp(Ao)&&(Ao=null),bo!==null&&Yp(bo)&&(bo=null),Sf.forEach(nE),Mf.forEach(nE)}function Mc(n,e){n.blockedOn===e&&(n.blockedOn=null,cx||(cx=!0,$i.unstable_scheduleCallback($i.unstable_NormalPriority,ZD)))}function wf(n){function e(r){return Mc(r,n)}if(0<Id.length){Mc(Id[0],n);for(var t=1;t<Id.length;t++){var i=Id[t];i.blockedOn===n&&(i.blockedOn=null)}}for(To!==null&&Mc(To,n),Ao!==null&&Mc(Ao,n),bo!==null&&Mc(bo,n),Sf.forEach(e),Mf.forEach(e),t=0;t<_o.length;t++)i=_o[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<_o.length&&(t=_o[0],t.blockedOn===null);)aC(t),t.blockedOn===null&&_o.shift()}var Eu=Zs.ReactCurrentBatchConfig,ym=!0;function KD(n,e,t,i){var r=Bt,s=Eu.transition;Eu.transition=null;try{Bt=1,h1(n,e,t,i)}finally{Bt=r,Eu.transition=s}}function $D(n,e,t,i){var r=Bt,s=Eu.transition;Eu.transition=null;try{Bt=4,h1(n,e,t,i)}finally{Bt=r,Eu.transition=s}}function h1(n,e,t,i){if(ym){var r=fx(n,e,t,i);if(r===null)Cv(n,e,i,xm,t),tE(n,i);else if(qD(r,n,e,t,i))i.stopPropagation();else if(tE(n,i),e&4&&-1<YD.indexOf(n)){for(;r!==null;){var s=ch(r);if(s!==null&&iC(s),s=fx(n,e,t,i),s===null&&Cv(n,e,i,xm,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Cv(n,e,i,null,t)}}var xm=null;function fx(n,e,t,i){if(xm=null,n=l1(i),n=Pa(n),n!==null)if(e=nl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Zb(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return xm=n,null}function lC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FD()){case u1:return 1;case Qb:return 4;case gm:case zD:return 16;case eC:return 536870912;default:return 16}default:return 16}}var wo=null,d1=null,qp=null;function uC(){if(qp)return qp;var n,e=d1,t=e.length,i,r="value"in wo?wo.value:wo.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return qp=r.slice(n,1<i?1-i:void 0)}function Zp(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Nd(){return!0}function iE(){return!1}function er(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nd:iE,this.isPropagationStopped=iE,this}return un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Nd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Nd)},persist:function(){},isPersistent:Nd}),e}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p1=er(ju),uh=un({},ju,{view:0,detail:0}),JD=er(uh),xv,_v,wc,og=un({},uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wc&&(wc&&n.type==="mousemove"?(xv=n.screenX-wc.screenX,_v=n.screenY-wc.screenY):_v=xv=0,wc=n),xv)},movementY:function(n){return"movementY"in n?n.movementY:_v}}),rE=er(og),QD=un({},og,{dataTransfer:0}),eO=er(QD),tO=un({},uh,{relatedTarget:0}),Sv=er(tO),nO=un({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),iO=er(nO),rO=un({},ju,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),sO=er(rO),oO=un({},ju,{data:0}),sE=er(oO),aO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cO(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=uO[n])?!!e[n]:!1}function m1(){return cO}var fO=un({},uh,{key:function(n){if(n.key){var e=aO[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Zp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m1,charCode:function(n){return n.type==="keypress"?Zp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hO=er(fO),dO=un({},og,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oE=er(dO),pO=un({},uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m1}),mO=er(pO),gO=un({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),vO=er(gO),yO=un({},og,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),xO=er(yO),_O=[9,13,27,32],g1=Vs&&"CompositionEvent"in window,ef=null;Vs&&"documentMode"in document&&(ef=document.documentMode);var SO=Vs&&"TextEvent"in window&&!ef,cC=Vs&&(!g1||ef&&8<ef&&11>=ef),aE=" ",lE=!1;function fC(n,e){switch(n){case"keyup":return _O.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eu=!1;function MO(n,e){switch(n){case"compositionend":return hC(e);case"keypress":return e.which!==32?null:(lE=!0,aE);case"textInput":return n=e.data,n===aE&&lE?null:n;default:return null}}function wO(n,e){if(eu)return n==="compositionend"||!g1&&fC(n,e)?(n=uC(),qp=d1=wo=null,eu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cC&&e.locale!=="ko"?null:e.data;default:return null}}var EO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!EO[n.type]:e==="textarea"}function dC(n,e,t,i){Wb(i),e=_m(e,"onChange"),0<e.length&&(t=new p1("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var tf=null,Ef=null;function TO(n){EC(n,0)}function ag(n){var e=iu(n);if(kb(e))return n}function AO(n,e){if(n==="change")return e}var pC=!1;if(Vs){var Mv;if(Vs){var wv="oninput"in document;if(!wv){var cE=document.createElement("div");cE.setAttribute("oninput","return;"),wv=typeof cE.oninput=="function"}Mv=wv}else Mv=!1;pC=Mv&&(!document.documentMode||9<document.documentMode)}function fE(){tf&&(tf.detachEvent("onpropertychange",mC),Ef=tf=null)}function mC(n){if(n.propertyName==="value"&&ag(Ef)){var e=[];dC(e,Ef,n,l1(n)),qb(TO,e)}}function bO(n,e,t){n==="focusin"?(fE(),tf=e,Ef=t,tf.attachEvent("onpropertychange",mC)):n==="focusout"&&fE()}function CO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ag(Ef)}function PO(n,e){if(n==="click")return ag(e)}function RO(n,e){if(n==="input"||n==="change")return ag(e)}function LO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Gr=typeof Object.is=="function"?Object.is:LO;function Tf(n,e){if(Gr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Yy.call(e,r)||!Gr(n[r],e[r]))return!1}return!0}function hE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dE(n,e){var t=hE(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=hE(t)}}function gC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?gC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function vC(){for(var n=window,e=dm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=dm(n.document)}return e}function v1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function IO(n){var e=vC(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&gC(t.ownerDocument.documentElement,t)){if(i!==null&&v1(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=dE(t,s);var o=dE(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var NO=Vs&&"documentMode"in document&&11>=document.documentMode,tu=null,hx=null,nf=null,dx=!1;function pE(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;dx||tu==null||tu!==dm(i)||(i=tu,"selectionStart"in i&&v1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nf&&Tf(nf,i)||(nf=i,i=_m(hx,"onSelect"),0<i.length&&(e=new p1("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=tu)))}function Dd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var nu={animationend:Dd("Animation","AnimationEnd"),animationiteration:Dd("Animation","AnimationIteration"),animationstart:Dd("Animation","AnimationStart"),transitionend:Dd("Transition","TransitionEnd")},Ev={},yC={};Vs&&(yC=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function lg(n){if(Ev[n])return Ev[n];if(!nu[n])return n;var e=nu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in yC)return Ev[n]=e[t];return n}var xC=lg("animationend"),_C=lg("animationiteration"),SC=lg("animationstart"),MC=lg("transitionend"),wC=new Map,mE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(n,e){wC.set(n,e),tl(e,[n])}for(var Tv=0;Tv<mE.length;Tv++){var Av=mE[Tv],DO=Av.toLowerCase(),OO=Av[0].toUpperCase()+Av.slice(1);jo(DO,"on"+OO)}jo(xC,"onAnimationEnd");jo(_C,"onAnimationIteration");jo(SC,"onAnimationStart");jo("dblclick","onDoubleClick");jo("focusin","onFocus");jo("focusout","onBlur");jo(MC,"onTransitionEnd");Pu("onMouseEnter",["mouseout","mouseover"]);Pu("onMouseLeave",["mouseout","mouseover"]);Pu("onPointerEnter",["pointerout","pointerover"]);Pu("onPointerLeave",["pointerout","pointerover"]);tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tl("onBeforeInput",["compositionend","keypress","textInput","paste"]);tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zc));function gE(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,DD(i,e,void 0,n),n.currentTarget=null}function EC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;gE(r,a,f),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;gE(r,a,f),s=l}}}if(mm)throw n=lx,mm=!1,lx=null,n}function Yt(n,e){var t=e[yx];t===void 0&&(t=e[yx]=new Set);var i=n+"__bubble";t.has(i)||(TC(e,n,2,!1),t.add(i))}function bv(n,e,t){var i=0;e&&(i|=4),TC(t,n,i,e)}var Od="_reactListening"+Math.random().toString(36).slice(2);function Af(n){if(!n[Od]){n[Od]=!0,Ib.forEach(function(t){t!=="selectionchange"&&(UO.has(t)||bv(t,!1,n),bv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Od]||(e[Od]=!0,bv("selectionchange",!1,e))}}function TC(n,e,t,i){switch(lC(e)){case 1:var r=KD;break;case 4:r=$D;break;default:r=h1}t=r.bind(null,e,t,n),r=void 0,!ax||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Cv(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Pa(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}qb(function(){var f=s,h=l1(t),d=[];e:{var p=wC.get(n);if(p!==void 0){var m=p1,y=n;switch(n){case"keypress":if(Zp(t)===0)break e;case"keydown":case"keyup":m=hO;break;case"focusin":y="focus",m=Sv;break;case"focusout":y="blur",m=Sv;break;case"beforeblur":case"afterblur":m=Sv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=rE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=eO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=mO;break;case xC:case _C:case SC:m=iO;break;case MC:m=vO;break;case"scroll":m=JD;break;case"wheel":m=xO;break;case"copy":case"cut":case"paste":m=sO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=oE}var w=(e&4)!==0,x=!w&&n==="scroll",v=w?p!==null?p+"Capture":null:p;w=[];for(var S=f,M;S!==null;){M=S;var T=M.stateNode;if(M.tag===5&&T!==null&&(M=T,v!==null&&(T=_f(S,v),T!=null&&w.push(bf(S,T,M)))),x)break;S=S.return}0<w.length&&(p=new m(p,y,null,t,h),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==sx&&(y=t.relatedTarget||t.fromElement)&&(Pa(y)||y[Hs]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=f,y=y?Pa(y):null,y!==null&&(x=nl(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=f),m!==y)){if(w=rE,T="onMouseLeave",v="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(w=oE,T="onPointerLeave",v="onPointerEnter",S="pointer"),x=m==null?p:iu(m),M=y==null?p:iu(y),p=new w(T,S+"leave",m,t,h),p.target=x,p.relatedTarget=M,T=null,Pa(h)===f&&(w=new w(v,S+"enter",y,t,h),w.target=M,w.relatedTarget=x,T=w),x=T,m&&y)t:{for(w=m,v=y,S=0,M=w;M;M=Al(M))S++;for(M=0,T=v;T;T=Al(T))M++;for(;0<S-M;)w=Al(w),S--;for(;0<M-S;)v=Al(v),M--;for(;S--;){if(w===v||v!==null&&w===v.alternate)break t;w=Al(w),v=Al(v)}w=null}else w=null;m!==null&&vE(d,p,m,w,!1),y!==null&&x!==null&&vE(d,x,y,w,!0)}}e:{if(p=f?iu(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=AO;else if(uE(p))if(pC)P=RO;else{P=CO;var b=bO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=PO);if(P&&(P=P(n,f))){dC(d,P,t,h);break e}b&&b(n,p,f),n==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&ex(p,"number",p.value)}switch(b=f?iu(f):window,n){case"focusin":(uE(b)||b.contentEditable==="true")&&(tu=b,hx=f,nf=null);break;case"focusout":nf=hx=tu=null;break;case"mousedown":dx=!0;break;case"contextmenu":case"mouseup":case"dragend":dx=!1,pE(d,t,h);break;case"selectionchange":if(NO)break;case"keydown":case"keyup":pE(d,t,h)}var L;if(g1)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else eu?fC(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(cC&&t.locale!=="ko"&&(eu||D!=="onCompositionStart"?D==="onCompositionEnd"&&eu&&(L=uC()):(wo=h,d1="value"in wo?wo.value:wo.textContent,eu=!0)),b=_m(f,D),0<b.length&&(D=new sE(D,n,null,t,h),d.push({event:D,listeners:b}),L?D.data=L:(L=hC(t),L!==null&&(D.data=L)))),(L=SO?MO(n,t):wO(n,t))&&(f=_m(f,"onBeforeInput"),0<f.length&&(h=new sE("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:f}),h.data=L))}EC(d,e)})}function bf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function _m(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=_f(n,t),s!=null&&i.unshift(bf(n,s,r)),s=_f(n,e),s!=null&&i.push(bf(n,s,r))),n=n.return}return i}function Al(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function vE(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,f=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&f!==null&&(a=f,r?(l=_f(t,s),l!=null&&o.unshift(bf(t,l,a))):r||(l=_f(t,s),l!=null&&o.push(bf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var kO=/\r\n?/g,FO=/\u0000|\uFFFD/g;function yE(n){return(typeof n=="string"?n:""+n).replace(kO,`
`).replace(FO,"")}function Ud(n,e,t){if(e=yE(e),yE(n)!==e&&t)throw Error(Ae(425))}function Sm(){}var px=null,mx=null;function gx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vx=typeof setTimeout=="function"?setTimeout:void 0,zO=typeof clearTimeout=="function"?clearTimeout:void 0,xE=typeof Promise=="function"?Promise:void 0,BO=typeof queueMicrotask=="function"?queueMicrotask:typeof xE<"u"?function(n){return xE.resolve(null).then(n).catch(VO)}:vx;function VO(n){setTimeout(function(){throw n})}function Pv(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),wf(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);wf(e)}function Co(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function _E(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),ss="__reactFiber$"+Xu,Cf="__reactProps$"+Xu,Hs="__reactContainer$"+Xu,yx="__reactEvents$"+Xu,HO="__reactListeners$"+Xu,GO="__reactHandles$"+Xu;function Pa(n){var e=n[ss];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Hs]||t[ss]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=_E(n);n!==null;){if(t=n[ss])return t;n=_E(n)}return e}n=t,t=n.parentNode}return null}function ch(n){return n=n[ss]||n[Hs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function iu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ae(33))}function ug(n){return n[Cf]||null}var xx=[],ru=-1;function Xo(n){return{current:n}}function qt(n){0>ru||(n.current=xx[ru],xx[ru]=null,ru--)}function jt(n,e){ru++,xx[ru]=n.current,n.current=e}var Fo={},hi=Xo(Fo),Di=Xo(!1),Ya=Fo;function Ru(n,e){var t=n.type.contextTypes;if(!t)return Fo;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Oi(n){return n=n.childContextTypes,n!=null}function Mm(){qt(Di),qt(hi)}function SE(n,e,t){if(hi.current!==Fo)throw Error(Ae(168));jt(hi,e),jt(Di,t)}function AC(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ae(108,bD(n)||"Unknown",r));return un({},t,i)}function wm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fo,Ya=hi.current,jt(hi,n),jt(Di,Di.current),!0}function ME(n,e,t){var i=n.stateNode;if(!i)throw Error(Ae(169));t?(n=AC(n,e,Ya),i.__reactInternalMemoizedMergedChildContext=n,qt(Di),qt(hi),jt(hi,n)):qt(Di),jt(Di,t)}var Ps=null,cg=!1,Rv=!1;function bC(n){Ps===null?Ps=[n]:Ps.push(n)}function WO(n){cg=!0,bC(n)}function Yo(){if(!Rv&&Ps!==null){Rv=!0;var n=0,e=Bt;try{var t=Ps;for(Bt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ps=null,cg=!1}catch(r){throw Ps!==null&&(Ps=Ps.slice(n+1)),Jb(u1,Yo),r}finally{Bt=e,Rv=!1}}return null}var su=[],ou=0,Em=null,Tm=0,vr=[],yr=0,qa=null,Is=1,Ns="";function _a(n,e){su[ou++]=Tm,su[ou++]=Em,Em=n,Tm=e}function CC(n,e,t){vr[yr++]=Is,vr[yr++]=Ns,vr[yr++]=qa,qa=n;var i=Is;n=Ns;var r=32-Br(i)-1;i&=~(1<<r),t+=1;var s=32-Br(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Is=1<<32-Br(e)+r|t<<r|i,Ns=s+n}else Is=1<<s|t<<r|i,Ns=n}function y1(n){n.return!==null&&(_a(n,1),CC(n,1,0))}function x1(n){for(;n===Em;)Em=su[--ou],su[ou]=null,Tm=su[--ou],su[ou]=null;for(;n===qa;)qa=vr[--yr],vr[yr]=null,Ns=vr[--yr],vr[yr]=null,Is=vr[--yr],vr[yr]=null}var Zi=null,qi=null,en=!1,Dr=null;function PC(n,e){var t=xr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function wE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Zi=n,qi=Co(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Zi=n,qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=qa!==null?{id:Is,overflow:Ns}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=xr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Zi=n,qi=null,!0):!1;default:return!1}}function _x(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Sx(n){if(en){var e=qi;if(e){var t=e;if(!wE(n,e)){if(_x(n))throw Error(Ae(418));e=Co(t.nextSibling);var i=Zi;e&&wE(n,e)?PC(i,t):(n.flags=n.flags&-4097|2,en=!1,Zi=n)}}else{if(_x(n))throw Error(Ae(418));n.flags=n.flags&-4097|2,en=!1,Zi=n}}}function EE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zi=n}function kd(n){if(n!==Zi)return!1;if(!en)return EE(n),en=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!gx(n.type,n.memoizedProps)),e&&(e=qi)){if(_x(n))throw RC(),Error(Ae(418));for(;e;)PC(n,e),e=Co(e.nextSibling)}if(EE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ae(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){qi=Co(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}qi=null}}else qi=Zi?Co(n.stateNode.nextSibling):null;return!0}function RC(){for(var n=qi;n;)n=Co(n.nextSibling)}function Lu(){qi=Zi=null,en=!1}function _1(n){Dr===null?Dr=[n]:Dr.push(n)}var jO=Zs.ReactCurrentBatchConfig;function Lr(n,e){if(n&&n.defaultProps){e=un({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Am=Xo(null),bm=null,au=null,S1=null;function M1(){S1=au=bm=null}function w1(n){var e=Am.current;qt(Am),n._currentValue=e}function Mx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Tu(n,e){bm=n,S1=au=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ni=!0),n.firstContext=null)}function Mr(n){var e=n._currentValue;if(S1!==n)if(n={context:n,memoizedValue:e,next:null},au===null){if(bm===null)throw Error(Ae(308));au=n,bm.dependencies={lanes:0,firstContext:n}}else au=au.next=n;return e}var Ra=null;function E1(n){Ra===null?Ra=[n]:Ra.push(n)}function LC(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,E1(e)):(t.next=r.next,r.next=t),e.interleaved=t,Gs(n,i)}function Gs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var yo=!1;function T1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ks(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Po(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Nt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Gs(n,t)}return r=i.interleaved,r===null?(e.next=e,E1(i)):(e.next=r.next,r.next=e),i.interleaved=e,Gs(n,t)}function Kp(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,c1(n,t)}}function TE(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Cm(n,e,t,i){var r=n.updateQueue;yo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=f:a.next=f,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=f=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,w=a;switch(p=e,m=t,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=un({},d,p);break e;case 2:yo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(f=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=f,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ka|=o,n.lanes=o,n.memoizedState=d}}function AE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ae(191,r));r.call(i)}}}var NC=new Lb.Component().refs;function wx(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:un({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var fg={isMounted:function(n){return(n=n._reactInternals)?nl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=_i(),r=Lo(n),s=ks(i,r);s.payload=e,t!=null&&(s.callback=t),e=Po(n,s,r),e!==null&&(Vr(e,n,r,i),Kp(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=_i(),r=Lo(n),s=ks(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Po(n,s,r),e!==null&&(Vr(e,n,r,i),Kp(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=_i(),i=Lo(n),r=ks(t,i);r.tag=2,e!=null&&(r.callback=e),e=Po(n,r,i),e!==null&&(Vr(e,n,i,t),Kp(e,n,i))}};function bE(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Tf(t,i)||!Tf(r,s):!0}function DC(n,e,t){var i=!1,r=Fo,s=e.contextType;return typeof s=="object"&&s!==null?s=Mr(s):(r=Oi(e)?Ya:hi.current,i=e.contextTypes,s=(i=i!=null)?Ru(n,r):Fo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function CE(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&fg.enqueueReplaceState(e,e.state,null)}function Ex(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=NC,T1(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Mr(s):(s=Oi(e)?Ya:hi.current,r.context=Ru(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wx(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&fg.enqueueReplaceState(r,r.state,null),Cm(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Ec(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ae(309));var i=t.stateNode}if(!i)throw Error(Ae(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===NC&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ae(284));if(!t._owner)throw Error(Ae(290,n))}return n}function Fd(n,e){throw n=Object.prototype.toString.call(e),Error(Ae(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function PE(n){var e=n._init;return e(n._payload)}function OC(n){function e(v,S){if(n){var M=v.deletions;M===null?(v.deletions=[S],v.flags|=16):M.push(S)}}function t(v,S){if(!n)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function i(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function r(v,S){return v=Io(v,S),v.index=0,v.sibling=null,v}function s(v,S,M){return v.index=M,n?(M=v.alternate,M!==null?(M=M.index,M<S?(v.flags|=2,S):M):(v.flags|=2,S)):(v.flags|=1048576,S)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,S,M,T){return S===null||S.tag!==6?(S=kv(M,v.mode,T),S.return=v,S):(S=r(S,M),S.return=v,S)}function l(v,S,M,T){var P=M.type;return P===Ql?h(v,S,M.props.children,T,M.key):S!==null&&(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===vo&&PE(P)===S.type)?(T=r(S,M.props),T.ref=Ec(v,S,M),T.return=v,T):(T=nm(M.type,M.key,M.props,null,v.mode,T),T.ref=Ec(v,S,M),T.return=v,T)}function f(v,S,M,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==M.containerInfo||S.stateNode.implementation!==M.implementation?(S=Fv(M,v.mode,T),S.return=v,S):(S=r(S,M.children||[]),S.return=v,S)}function h(v,S,M,T,P){return S===null||S.tag!==7?(S=za(M,v.mode,T,P),S.return=v,S):(S=r(S,M),S.return=v,S)}function d(v,S,M){if(typeof S=="string"&&S!==""||typeof S=="number")return S=kv(""+S,v.mode,M),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case bd:return M=nm(S.type,S.key,S.props,null,v.mode,M),M.ref=Ec(v,null,S),M.return=v,M;case Jl:return S=Fv(S,v.mode,M),S.return=v,S;case vo:var T=S._init;return d(v,T(S._payload),M)}if(Yc(S)||xc(S))return S=za(S,v.mode,M,null),S.return=v,S;Fd(v,S)}return null}function p(v,S,M,T){var P=S!==null?S.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return P!==null?null:a(v,S,""+M,T);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case bd:return M.key===P?l(v,S,M,T):null;case Jl:return M.key===P?f(v,S,M,T):null;case vo:return P=M._init,p(v,S,P(M._payload),T)}if(Yc(M)||xc(M))return P!==null?null:h(v,S,M,T,null);Fd(v,M)}return null}function m(v,S,M,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return v=v.get(M)||null,a(S,v,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case bd:return v=v.get(T.key===null?M:T.key)||null,l(S,v,T,P);case Jl:return v=v.get(T.key===null?M:T.key)||null,f(S,v,T,P);case vo:var b=T._init;return m(v,S,M,b(T._payload),P)}if(Yc(T)||xc(T))return v=v.get(M)||null,h(S,v,T,P,null);Fd(S,T)}return null}function y(v,S,M,T){for(var P=null,b=null,L=S,D=S=0,C=null;L!==null&&D<M.length;D++){L.index>D?(C=L,L=null):C=L.sibling;var R=p(v,L,M[D],T);if(R===null){L===null&&(L=C);break}n&&L&&R.alternate===null&&e(v,L),S=s(R,S,D),b===null?P=R:b.sibling=R,b=R,L=C}if(D===M.length)return t(v,L),en&&_a(v,D),P;if(L===null){for(;D<M.length;D++)L=d(v,M[D],T),L!==null&&(S=s(L,S,D),b===null?P=L:b.sibling=L,b=L);return en&&_a(v,D),P}for(L=i(v,L);D<M.length;D++)C=m(L,v,D,M[D],T),C!==null&&(n&&C.alternate!==null&&L.delete(C.key===null?D:C.key),S=s(C,S,D),b===null?P=C:b.sibling=C,b=C);return n&&L.forEach(function(z){return e(v,z)}),en&&_a(v,D),P}function w(v,S,M,T){var P=xc(M);if(typeof P!="function")throw Error(Ae(150));if(M=P.call(M),M==null)throw Error(Ae(151));for(var b=P=null,L=S,D=S=0,C=null,R=M.next();L!==null&&!R.done;D++,R=M.next()){L.index>D?(C=L,L=null):C=L.sibling;var z=p(v,L,R.value,T);if(z===null){L===null&&(L=C);break}n&&L&&z.alternate===null&&e(v,L),S=s(z,S,D),b===null?P=z:b.sibling=z,b=z,L=C}if(R.done)return t(v,L),en&&_a(v,D),P;if(L===null){for(;!R.done;D++,R=M.next())R=d(v,R.value,T),R!==null&&(S=s(R,S,D),b===null?P=R:b.sibling=R,b=R);return en&&_a(v,D),P}for(L=i(v,L);!R.done;D++,R=M.next())R=m(L,v,D,R.value,T),R!==null&&(n&&R.alternate!==null&&L.delete(R.key===null?D:R.key),S=s(R,S,D),b===null?P=R:b.sibling=R,b=R);return n&&L.forEach(function(Z){return e(v,Z)}),en&&_a(v,D),P}function x(v,S,M,T){if(typeof M=="object"&&M!==null&&M.type===Ql&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case bd:e:{for(var P=M.key,b=S;b!==null;){if(b.key===P){if(P=M.type,P===Ql){if(b.tag===7){t(v,b.sibling),S=r(b,M.props.children),S.return=v,v=S;break e}}else if(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===vo&&PE(P)===b.type){t(v,b.sibling),S=r(b,M.props),S.ref=Ec(v,b,M),S.return=v,v=S;break e}t(v,b);break}else e(v,b);b=b.sibling}M.type===Ql?(S=za(M.props.children,v.mode,T,M.key),S.return=v,v=S):(T=nm(M.type,M.key,M.props,null,v.mode,T),T.ref=Ec(v,S,M),T.return=v,v=T)}return o(v);case Jl:e:{for(b=M.key;S!==null;){if(S.key===b)if(S.tag===4&&S.stateNode.containerInfo===M.containerInfo&&S.stateNode.implementation===M.implementation){t(v,S.sibling),S=r(S,M.children||[]),S.return=v,v=S;break e}else{t(v,S);break}else e(v,S);S=S.sibling}S=Fv(M,v.mode,T),S.return=v,v=S}return o(v);case vo:return b=M._init,x(v,S,b(M._payload),T)}if(Yc(M))return y(v,S,M,T);if(xc(M))return w(v,S,M,T);Fd(v,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,S!==null&&S.tag===6?(t(v,S.sibling),S=r(S,M),S.return=v,v=S):(t(v,S),S=kv(M,v.mode,T),S.return=v,v=S),o(v)):t(v,S)}return x}var Iu=OC(!0),UC=OC(!1),fh={},as=Xo(fh),Pf=Xo(fh),Rf=Xo(fh);function La(n){if(n===fh)throw Error(Ae(174));return n}function A1(n,e){switch(jt(Rf,e),jt(Pf,n),jt(as,fh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nx(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=nx(e,n)}qt(as),jt(as,e)}function Nu(){qt(as),qt(Pf),qt(Rf)}function kC(n){La(Rf.current);var e=La(as.current),t=nx(e,n.type);e!==t&&(jt(Pf,n),jt(as,t))}function b1(n){Pf.current===n&&(qt(as),qt(Pf))}var sn=Xo(0);function Pm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lv=[];function C1(){for(var n=0;n<Lv.length;n++)Lv[n]._workInProgressVersionPrimary=null;Lv.length=0}var $p=Zs.ReactCurrentDispatcher,Iv=Zs.ReactCurrentBatchConfig,Za=0,ln=null,Pn=null,Vn=null,Rm=!1,rf=!1,Lf=0,XO=0;function ni(){throw Error(Ae(321))}function P1(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Gr(n[t],e[t]))return!1;return!0}function R1(n,e,t,i,r,s){if(Za=s,ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$p.current=n===null||n.memoizedState===null?KO:$O,n=t(i,r),rf){s=0;do{if(rf=!1,Lf=0,25<=s)throw Error(Ae(301));s+=1,Vn=Pn=null,e.updateQueue=null,$p.current=JO,n=t(i,r)}while(rf)}if($p.current=Lm,e=Pn!==null&&Pn.next!==null,Za=0,Vn=Pn=ln=null,Rm=!1,e)throw Error(Ae(300));return n}function L1(){var n=Lf!==0;return Lf=0,n}function rs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?ln.memoizedState=Vn=n:Vn=Vn.next=n,Vn}function wr(){if(Pn===null){var n=ln.alternate;n=n!==null?n.memoizedState:null}else n=Pn.next;var e=Vn===null?ln.memoizedState:Vn.next;if(e!==null)Vn=e,Pn=n;else{if(n===null)throw Error(Ae(310));Pn=n,n={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Vn===null?ln.memoizedState=Vn=n:Vn=Vn.next=n}return Vn}function If(n,e){return typeof e=="function"?e(n):e}function Nv(n){var e=wr(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=n;var i=Pn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,f=s;do{var h=f.lane;if((Za&h)===h)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var d={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,ln.lanes|=h,Ka|=h}f=f.next}while(f!==null&&f!==s);l===null?o=i:l.next=a,Gr(i,e.memoizedState)||(Ni=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,ln.lanes|=s,Ka|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Dv(n){var e=wr(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Gr(s,e.memoizedState)||(Ni=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function FC(){}function zC(n,e){var t=ln,i=wr(),r=e(),s=!Gr(i.memoizedState,r);if(s&&(i.memoizedState=r,Ni=!0),i=i.queue,I1(HC.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Vn!==null&&Vn.memoizedState.tag&1){if(t.flags|=2048,Nf(9,VC.bind(null,t,i,r,e),void 0,null),Hn===null)throw Error(Ae(349));Za&30||BC(t,e,r)}return r}function BC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function VC(n,e,t,i){e.value=t,e.getSnapshot=i,GC(e)&&WC(n)}function HC(n,e,t){return t(function(){GC(e)&&WC(n)})}function GC(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Gr(n,t)}catch{return!0}}function WC(n){var e=Gs(n,1);e!==null&&Vr(e,n,1,-1)}function RE(n){var e=rs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:If,lastRenderedState:n},e.queue=n,n=n.dispatch=ZO.bind(null,ln,n),[e.memoizedState,n]}function Nf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function jC(){return wr().memoizedState}function Jp(n,e,t,i){var r=rs();ln.flags|=n,r.memoizedState=Nf(1|e,t,void 0,i===void 0?null:i)}function hg(n,e,t,i){var r=wr();i=i===void 0?null:i;var s=void 0;if(Pn!==null){var o=Pn.memoizedState;if(s=o.destroy,i!==null&&P1(i,o.deps)){r.memoizedState=Nf(e,t,s,i);return}}ln.flags|=n,r.memoizedState=Nf(1|e,t,s,i)}function LE(n,e){return Jp(8390656,8,n,e)}function I1(n,e){return hg(2048,8,n,e)}function XC(n,e){return hg(4,2,n,e)}function YC(n,e){return hg(4,4,n,e)}function qC(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ZC(n,e,t){return t=t!=null?t.concat([n]):null,hg(4,4,qC.bind(null,e,n),t)}function N1(){}function KC(n,e){var t=wr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&P1(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function $C(n,e){var t=wr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&P1(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function JC(n,e,t){return Za&21?(Gr(t,e)||(t=tC(),ln.lanes|=t,Ka|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ni=!0),n.memoizedState=t)}function YO(n,e){var t=Bt;Bt=t!==0&&4>t?t:4,n(!0);var i=Iv.transition;Iv.transition={};try{n(!1),e()}finally{Bt=t,Iv.transition=i}}function QC(){return wr().memoizedState}function qO(n,e,t){var i=Lo(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},eP(n))tP(e,t);else if(t=LC(n,e,t,i),t!==null){var r=_i();Vr(t,n,i,r),nP(t,e,i)}}function ZO(n,e,t){var i=Lo(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(eP(n))tP(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Gr(a,o)){var l=e.interleaved;l===null?(r.next=r,E1(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=LC(n,e,r,i),t!==null&&(r=_i(),Vr(t,n,i,r),nP(t,e,i))}}function eP(n){var e=n.alternate;return n===ln||e!==null&&e===ln}function tP(n,e){rf=Rm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function nP(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,c1(n,t)}}var Lm={readContext:Mr,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},KO={readContext:Mr,useCallback:function(n,e){return rs().memoizedState=[n,e===void 0?null:e],n},useContext:Mr,useEffect:LE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Jp(4194308,4,qC.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Jp(4194308,4,n,e)},useInsertionEffect:function(n,e){return Jp(4,2,n,e)},useMemo:function(n,e){var t=rs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=rs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=qO.bind(null,ln,n),[i.memoizedState,n]},useRef:function(n){var e=rs();return n={current:n},e.memoizedState=n},useState:RE,useDebugValue:N1,useDeferredValue:function(n){return rs().memoizedState=n},useTransition:function(){var n=RE(!1),e=n[0];return n=YO.bind(null,n[1]),rs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=ln,r=rs();if(en){if(t===void 0)throw Error(Ae(407));t=t()}else{if(t=e(),Hn===null)throw Error(Ae(349));Za&30||BC(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,LE(HC.bind(null,i,s,n),[n]),i.flags|=2048,Nf(9,VC.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=rs(),e=Hn.identifierPrefix;if(en){var t=Ns,i=Is;t=(i&~(1<<32-Br(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Lf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=XO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},$O={readContext:Mr,useCallback:KC,useContext:Mr,useEffect:I1,useImperativeHandle:ZC,useInsertionEffect:XC,useLayoutEffect:YC,useMemo:$C,useReducer:Nv,useRef:jC,useState:function(){return Nv(If)},useDebugValue:N1,useDeferredValue:function(n){var e=wr();return JC(e,Pn.memoizedState,n)},useTransition:function(){var n=Nv(If)[0],e=wr().memoizedState;return[n,e]},useMutableSource:FC,useSyncExternalStore:zC,useId:QC,unstable_isNewReconciler:!1},JO={readContext:Mr,useCallback:KC,useContext:Mr,useEffect:I1,useImperativeHandle:ZC,useInsertionEffect:XC,useLayoutEffect:YC,useMemo:$C,useReducer:Dv,useRef:jC,useState:function(){return Dv(If)},useDebugValue:N1,useDeferredValue:function(n){var e=wr();return Pn===null?e.memoizedState=n:JC(e,Pn.memoizedState,n)},useTransition:function(){var n=Dv(If)[0],e=wr().memoizedState;return[n,e]},useMutableSource:FC,useSyncExternalStore:zC,useId:QC,unstable_isNewReconciler:!1};function Du(n,e){try{var t="",i=e;do t+=AD(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Ov(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Tx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QO=typeof WeakMap=="function"?WeakMap:Map;function iP(n,e,t){t=ks(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Nm||(Nm=!0,Ox=i),Tx(n,e)},t}function rP(n,e,t){t=ks(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Tx(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Tx(n,e),typeof i!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function IE(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new QO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=dU.bind(null,n,e,t),e.then(n,n))}function NE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function DE(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ks(-1,1),e.tag=2,Po(t,e,1))),t.lanes|=1),n)}var eU=Zs.ReactCurrentOwner,Ni=!1;function yi(n,e,t,i){e.child=n===null?UC(e,null,t,i):Iu(e,n.child,t,i)}function OE(n,e,t,i,r){t=t.render;var s=e.ref;return Tu(e,r),i=R1(n,e,t,i,s,r),t=L1(),n!==null&&!Ni?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ws(n,e,r)):(en&&t&&y1(e),e.flags|=1,yi(n,e,i,r),e.child)}function UE(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!V1(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,sP(n,e,s,i,r)):(n=nm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Tf,t(o,i)&&n.ref===e.ref)return Ws(n,e,r)}return e.flags|=1,n=Io(s,i),n.ref=e.ref,n.return=e,e.child=n}function sP(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Tf(s,i)&&n.ref===e.ref)if(Ni=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Ni=!0);else return e.lanes=n.lanes,Ws(n,e,r)}return Ax(n,e,t,i,r)}function oP(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(uu,Xi),Xi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,jt(uu,Xi),Xi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,jt(uu,Xi),Xi|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,jt(uu,Xi),Xi|=i;return yi(n,e,r,t),e.child}function aP(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ax(n,e,t,i,r){var s=Oi(t)?Ya:hi.current;return s=Ru(e,s),Tu(e,r),t=R1(n,e,t,i,s,r),i=L1(),n!==null&&!Ni?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ws(n,e,r)):(en&&i&&y1(e),e.flags|=1,yi(n,e,t,r),e.child)}function kE(n,e,t,i,r){if(Oi(t)){var s=!0;wm(e)}else s=!1;if(Tu(e,r),e.stateNode===null)Qp(n,e),DC(e,t,i),Ex(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=Mr(f):(f=Oi(t)?Ya:hi.current,f=Ru(e,f));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==f)&&CE(e,o,i,f),yo=!1;var p=e.memoizedState;o.state=p,Cm(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Di.current||yo?(typeof h=="function"&&(wx(e,t,h,i),l=e.memoizedState),(a=yo||bE(e,t,a,i,p,l,f))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=f,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,IC(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:Lr(e.type,a),o.props=f,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Mr(l):(l=Oi(t)?Ya:hi.current,l=Ru(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&CE(e,o,i,l),yo=!1,p=e.memoizedState,o.state=p,Cm(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||Di.current||yo?(typeof m=="function"&&(wx(e,t,m,i),y=e.memoizedState),(f=yo||bE(e,t,f,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return bx(n,e,t,i,s,r)}function bx(n,e,t,i,r,s){aP(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&ME(e,t,!1),Ws(n,e,s);i=e.stateNode,eU.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Iu(e,n.child,null,s),e.child=Iu(e,null,a,s)):yi(n,e,a,s),e.memoizedState=i.state,r&&ME(e,t,!0),e.child}function lP(n){var e=n.stateNode;e.pendingContext?SE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&SE(n,e.context,!1),A1(n,e.containerInfo)}function FE(n,e,t,i,r){return Lu(),_1(r),e.flags|=256,yi(n,e,t,i),e.child}var Cx={dehydrated:null,treeContext:null,retryLane:0};function Px(n){return{baseLanes:n,cachePool:null,transitions:null}}function uP(n,e,t){var i=e.pendingProps,r=sn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),jt(sn,r&1),n===null)return Sx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mg(o,i,0,null),n=za(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Px(t),e.memoizedState=Cx,n):D1(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return tU(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Io(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Io(a,s):(s=za(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Px(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Cx,i}return s=n.child,n=s.sibling,i=Io(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function D1(n,e){return e=mg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function zd(n,e,t,i){return i!==null&&_1(i),Iu(e,n.child,null,t),n=D1(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function tU(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Ov(Error(Ae(422))),zd(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=mg({mode:"visible",children:i.children},r,0,null),s=za(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Iu(e,n.child,null,o),e.child.memoizedState=Px(o),e.memoizedState=Cx,s);if(!(e.mode&1))return zd(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ae(419)),i=Ov(s,i,void 0),zd(n,e,o,i)}if(a=(o&n.childLanes)!==0,Ni||a){if(i=Hn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Gs(n,r),Vr(i,n,r,-1))}return B1(),i=Ov(Error(Ae(421))),zd(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=pU.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,qi=Co(r.nextSibling),Zi=e,en=!0,Dr=null,n!==null&&(vr[yr++]=Is,vr[yr++]=Ns,vr[yr++]=qa,Is=n.id,Ns=n.overflow,qa=e),e=D1(e,i.children),e.flags|=4096,e)}function zE(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Mx(n.return,e,t)}function Uv(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function cP(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(yi(n,e,i.children,t),i=sn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zE(n,t,e);else if(n.tag===19)zE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(jt(sn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Pm(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Uv(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Pm(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Uv(e,!0,t,null,s);break;case"together":Uv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qp(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ws(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ka|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ae(153));if(e.child!==null){for(n=e.child,t=Io(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Io(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function nU(n,e,t){switch(e.tag){case 3:lP(e),Lu();break;case 5:kC(e);break;case 1:Oi(e.type)&&wm(e);break;case 4:A1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;jt(Am,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(jt(sn,sn.current&1),e.flags|=128,null):t&e.child.childLanes?uP(n,e,t):(jt(sn,sn.current&1),n=Ws(n,e,t),n!==null?n.sibling:null);jt(sn,sn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return cP(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),jt(sn,sn.current),i)break;return null;case 22:case 23:return e.lanes=0,oP(n,e,t)}return Ws(n,e,t)}var fP,Rx,hP,dP;fP=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Rx=function(){};hP=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,La(as.current);var s=null;switch(t){case"input":r=Jy(n,r),i=Jy(n,i),s=[];break;case"select":r=un({},r,{value:void 0}),i=un({},i,{value:void 0}),s=[];break;case"textarea":r=tx(n,r),i=tx(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Sm)}ix(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var a=r[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(yf.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var l=i[f];if(a=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(f,t)),t=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(yf.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&Yt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(f,l))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};dP=function(n,e,t,i){t!==i&&(e.flags|=4)};function Tc(n,e){if(!en)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ii(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function iU(n,e,t){var i=e.pendingProps;switch(x1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(e),null;case 1:return Oi(e.type)&&Mm(),ii(e),null;case 3:return i=e.stateNode,Nu(),qt(Di),qt(hi),C1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(kd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dr!==null&&(Fx(Dr),Dr=null))),Rx(n,e),ii(e),null;case 5:b1(e);var r=La(Rf.current);if(t=e.type,n!==null&&e.stateNode!=null)hP(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ae(166));return ii(e),null}if(n=La(as.current),kd(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ss]=e,i[Cf]=s,n=(e.mode&1)!==0,t){case"dialog":Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":case"embed":Yt("load",i);break;case"video":case"audio":for(r=0;r<Zc.length;r++)Yt(Zc[r],i);break;case"source":Yt("error",i);break;case"img":case"image":case"link":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"input":qw(i,s),Yt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Yt("invalid",i);break;case"textarea":Kw(i,s),Yt("invalid",i)}ix(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ud(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ud(i.textContent,a,n),r=["children",""+a]):yf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Yt("scroll",i)}switch(t){case"input":Cd(i),Zw(i,s,!0);break;case"textarea":Cd(i),$w(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Sm)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Bb(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ss]=e,n[Cf]=i,fP(n,e,!1,!1),e.stateNode=n;e:{switch(o=rx(t,i),t){case"dialog":Yt("cancel",n),Yt("close",n),r=i;break;case"iframe":case"object":case"embed":Yt("load",n),r=i;break;case"video":case"audio":for(r=0;r<Zc.length;r++)Yt(Zc[r],n);r=i;break;case"source":Yt("error",n),r=i;break;case"img":case"image":case"link":Yt("error",n),Yt("load",n),r=i;break;case"details":Yt("toggle",n),r=i;break;case"input":qw(n,i),r=Jy(n,i),Yt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=un({},i,{value:void 0}),Yt("invalid",n);break;case"textarea":Kw(n,i),r=tx(n,i),Yt("invalid",n);break;default:r=i}ix(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Gb(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Vb(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&xf(n,l):typeof l=="number"&&xf(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Yt("scroll",n):l!=null&&r1(n,s,l,o))}switch(t){case"input":Cd(n),Zw(n,i,!1);break;case"textarea":Cd(n),$w(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ko(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Su(n,!!i.multiple,s,!1):i.defaultValue!=null&&Su(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Sm)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ii(e),null;case 6:if(n&&e.stateNode!=null)dP(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ae(166));if(t=La(Rf.current),La(as.current),kd(e)){if(i=e.stateNode,t=e.memoizedProps,i[ss]=e,(s=i.nodeValue!==t)&&(n=Zi,n!==null))switch(n.tag){case 3:Ud(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ud(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ss]=e,e.stateNode=i}return ii(e),null;case 13:if(qt(sn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(en&&qi!==null&&e.mode&1&&!(e.flags&128))RC(),Lu(),e.flags|=98560,s=!1;else if(s=kd(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[ss]=e}else Lu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ii(e),s=!1}else Dr!==null&&(Fx(Dr),Dr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||sn.current&1?Ln===0&&(Ln=3):B1())),e.updateQueue!==null&&(e.flags|=4),ii(e),null);case 4:return Nu(),Rx(n,e),n===null&&Af(e.stateNode.containerInfo),ii(e),null;case 10:return w1(e.type._context),ii(e),null;case 17:return Oi(e.type)&&Mm(),ii(e),null;case 19:if(qt(sn),s=e.memoizedState,s===null)return ii(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Tc(s,!1);else{if(Ln!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Pm(n),o!==null){for(e.flags|=128,Tc(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return jt(sn,sn.current&1|2),e.child}n=n.sibling}s.tail!==null&&_n()>Ou&&(e.flags|=128,i=!0,Tc(s,!1),e.lanes=4194304)}else{if(!i)if(n=Pm(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Tc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!en)return ii(e),null}else 2*_n()-s.renderingStartTime>Ou&&t!==1073741824&&(e.flags|=128,i=!0,Tc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_n(),e.sibling=null,t=sn.current,jt(sn,i?t&1|2:t&1),e):(ii(e),null);case 22:case 23:return z1(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Xi&1073741824&&(ii(e),e.subtreeFlags&6&&(e.flags|=8192)):ii(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function rU(n,e){switch(x1(e),e.tag){case 1:return Oi(e.type)&&Mm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Nu(),qt(Di),qt(hi),C1(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return b1(e),null;case 13:if(qt(sn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Lu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return qt(sn),null;case 4:return Nu(),null;case 10:return w1(e.type._context),null;case 22:case 23:return z1(),null;case 24:return null;default:return null}}var Bd=!1,li=!1,sU=typeof WeakSet=="function"?WeakSet:Set,je=null;function lu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){dn(n,e,i)}else t.current=null}function Lx(n,e,t){try{t()}catch(i){dn(n,e,i)}}var BE=!1;function oU(n,e){if(px=ym,n=vC(),v1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,f=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++f===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(mx={focusedElem:n,selectionRange:t},ym=!1,je=e;je!==null;)if(e=je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,je=n;else for(;je!==null;){e=je;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Lr(e.type,w),x);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(T){dn(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}return y=BE,BE=!1,y}function sf(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Lx(e,t,s)}r=r.next}while(r!==i)}}function dg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Ix(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function pP(n){var e=n.alternate;e!==null&&(n.alternate=null,pP(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ss],delete e[Cf],delete e[yx],delete e[HO],delete e[GO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function mP(n){return n.tag===5||n.tag===3||n.tag===4}function VE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mP(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sm));else if(i!==4&&(n=n.child,n!==null))for(Nx(n,e,t),n=n.sibling;n!==null;)Nx(n,e,t),n=n.sibling}function Dx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Dx(n,e,t),n=n.sibling;n!==null;)Dx(n,e,t),n=n.sibling}var Yn=null,Nr=!1;function so(n,e,t){for(t=t.child;t!==null;)gP(n,e,t),t=t.sibling}function gP(n,e,t){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(sg,t)}catch{}switch(t.tag){case 5:li||lu(t,e);case 6:var i=Yn,r=Nr;Yn=null,so(n,e,t),Yn=i,Nr=r,Yn!==null&&(Nr?(n=Yn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Yn.removeChild(t.stateNode));break;case 18:Yn!==null&&(Nr?(n=Yn,t=t.stateNode,n.nodeType===8?Pv(n.parentNode,t):n.nodeType===1&&Pv(n,t),wf(n)):Pv(Yn,t.stateNode));break;case 4:i=Yn,r=Nr,Yn=t.stateNode.containerInfo,Nr=!0,so(n,e,t),Yn=i,Nr=r;break;case 0:case 11:case 14:case 15:if(!li&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lx(t,e,o),r=r.next}while(r!==i)}so(n,e,t);break;case 1:if(!li&&(lu(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){dn(t,e,a)}so(n,e,t);break;case 21:so(n,e,t);break;case 22:t.mode&1?(li=(i=li)||t.memoizedState!==null,so(n,e,t),li=i):so(n,e,t);break;default:so(n,e,t)}}function HE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new sU),e.forEach(function(i){var r=mU.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function br(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yn=a.stateNode,Nr=!1;break e;case 3:Yn=a.stateNode.containerInfo,Nr=!0;break e;case 4:Yn=a.stateNode.containerInfo,Nr=!0;break e}a=a.return}if(Yn===null)throw Error(Ae(160));gP(s,o,r),Yn=null,Nr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(f){dn(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vP(e,n),e=e.sibling}function vP(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(br(e,n),is(n),i&4){try{sf(3,n,n.return),dg(3,n)}catch(w){dn(n,n.return,w)}try{sf(5,n,n.return)}catch(w){dn(n,n.return,w)}}break;case 1:br(e,n),is(n),i&512&&t!==null&&lu(t,t.return);break;case 5:if(br(e,n),is(n),i&512&&t!==null&&lu(t,t.return),n.flags&32){var r=n.stateNode;try{xf(r,"")}catch(w){dn(n,n.return,w)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Fb(r,s),rx(a,o);var f=rx(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Gb(r,d):h==="dangerouslySetInnerHTML"?Vb(r,d):h==="children"?xf(r,d):r1(r,h,d,f)}switch(a){case"input":Qy(r,s);break;case"textarea":zb(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Su(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Su(r,!!s.multiple,s.defaultValue,!0):Su(r,!!s.multiple,s.multiple?[]:"",!1))}r[Cf]=s}catch(w){dn(n,n.return,w)}}break;case 6:if(br(e,n),is(n),i&4){if(n.stateNode===null)throw Error(Ae(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(w){dn(n,n.return,w)}}break;case 3:if(br(e,n),is(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{wf(e.containerInfo)}catch(w){dn(n,n.return,w)}break;case 4:br(e,n),is(n);break;case 13:br(e,n),is(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(k1=_n())),i&4&&HE(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(li=(f=li)||h,br(e,n),li=f):br(e,n),is(n),i&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!h&&n.mode&1)for(je=n,h=n.child;h!==null;){for(d=je=h;je!==null;){switch(p=je,m=p.child,p.tag){case 0:case 11:case 14:case 15:sf(4,p,p.return);break;case 1:lu(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){dn(i,t,w)}}break;case 5:lu(p,p.return);break;case 22:if(p.memoizedState!==null){WE(d);continue}}m!==null?(m.return=p,je=m):WE(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Hb("display",o))}catch(w){dn(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(w){dn(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:br(e,n),is(n),i&4&&HE(n);break;case 21:break;default:br(e,n),is(n)}}function is(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(mP(t)){var i=t;break e}t=t.return}throw Error(Ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(xf(r,""),i.flags&=-33);var s=VE(n);Dx(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=VE(n);Nx(n,a,o);break;default:throw Error(Ae(161))}}catch(l){dn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function aU(n,e,t){je=n,yP(n)}function yP(n,e,t){for(var i=(n.mode&1)!==0;je!==null;){var r=je,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Bd;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||li;a=Bd;var f=li;if(Bd=o,(li=l)&&!f)for(je=r;je!==null;)o=je,l=o.child,o.tag===22&&o.memoizedState!==null?jE(r):l!==null?(l.return=o,je=l):jE(r);for(;s!==null;)je=s,yP(s),s=s.sibling;je=r,Bd=a,li=f}GE(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,je=s):GE(n)}}function GE(n){for(;je!==null;){var e=je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||dg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!li)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Lr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&AE(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}AE(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&wf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}li||e.flags&512&&Ix(e)}catch(p){dn(e,e.return,p)}}if(e===n){je=null;break}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}}function WE(n){for(;je!==null;){var e=je;if(e===n){je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,je=t;break}je=e.return}}function jE(n){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{dg(4,e)}catch(l){dn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){dn(e,r,l)}}var s=e.return;try{Ix(e)}catch(l){dn(e,s,l)}break;case 5:var o=e.return;try{Ix(e)}catch(l){dn(e,o,l)}}}catch(l){dn(e,e.return,l)}if(e===n){je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,je=a;break}je=e.return}}var lU=Math.ceil,Im=Zs.ReactCurrentDispatcher,O1=Zs.ReactCurrentOwner,Sr=Zs.ReactCurrentBatchConfig,Nt=0,Hn=null,bn=null,Zn=0,Xi=0,uu=Xo(0),Ln=0,Df=null,Ka=0,pg=0,U1=0,of=null,Ri=null,k1=0,Ou=1/0,Cs=null,Nm=!1,Ox=null,Ro=null,Vd=!1,Eo=null,Dm=0,af=0,Ux=null,em=-1,tm=0;function _i(){return Nt&6?_n():em!==-1?em:em=_n()}function Lo(n){return n.mode&1?Nt&2&&Zn!==0?Zn&-Zn:jO.transition!==null?(tm===0&&(tm=tC()),tm):(n=Bt,n!==0||(n=window.event,n=n===void 0?16:lC(n.type)),n):1}function Vr(n,e,t,i){if(50<af)throw af=0,Ux=null,Error(Ae(185));lh(n,t,i),(!(Nt&2)||n!==Hn)&&(n===Hn&&(!(Nt&2)&&(pg|=t),Ln===4&&So(n,Zn)),Ui(n,i),t===1&&Nt===0&&!(e.mode&1)&&(Ou=_n()+500,cg&&Yo()))}function Ui(n,e){var t=n.callbackNode;jD(n,e);var i=vm(n,n===Hn?Zn:0);if(i===0)t!==null&&eE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&eE(t),e===1)n.tag===0?WO(XE.bind(null,n)):bC(XE.bind(null,n)),BO(function(){!(Nt&6)&&Yo()}),t=null;else{switch(nC(i)){case 1:t=u1;break;case 4:t=Qb;break;case 16:t=gm;break;case 536870912:t=eC;break;default:t=gm}t=AP(t,xP.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function xP(n,e){if(em=-1,tm=0,Nt&6)throw Error(Ae(327));var t=n.callbackNode;if(Au()&&n.callbackNode!==t)return null;var i=vm(n,n===Hn?Zn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Om(n,i);else{e=i;var r=Nt;Nt|=2;var s=SP();(Hn!==n||Zn!==e)&&(Cs=null,Ou=_n()+500,Fa(n,e));do try{fU();break}catch(a){_P(n,a)}while(!0);M1(),Im.current=s,Nt=r,bn!==null?e=0:(Hn=null,Zn=0,e=Ln)}if(e!==0){if(e===2&&(r=ux(n),r!==0&&(i=r,e=kx(n,r))),e===1)throw t=Df,Fa(n,0),So(n,i),Ui(n,_n()),t;if(e===6)So(n,i);else{if(r=n.current.alternate,!(i&30)&&!uU(r)&&(e=Om(n,i),e===2&&(s=ux(n),s!==0&&(i=s,e=kx(n,s))),e===1))throw t=Df,Fa(n,0),So(n,i),Ui(n,_n()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ae(345));case 2:Sa(n,Ri,Cs);break;case 3:if(So(n,i),(i&130023424)===i&&(e=k1+500-_n(),10<e)){if(vm(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){_i(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=vx(Sa.bind(null,n,Ri,Cs),e);break}Sa(n,Ri,Cs);break;case 4:if(So(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Br(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=_n()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*lU(i/1960))-i,10<i){n.timeoutHandle=vx(Sa.bind(null,n,Ri,Cs),i);break}Sa(n,Ri,Cs);break;case 5:Sa(n,Ri,Cs);break;default:throw Error(Ae(329))}}}return Ui(n,_n()),n.callbackNode===t?xP.bind(null,n):null}function kx(n,e){var t=of;return n.current.memoizedState.isDehydrated&&(Fa(n,e).flags|=256),n=Om(n,e),n!==2&&(e=Ri,Ri=t,e!==null&&Fx(e)),n}function Fx(n){Ri===null?Ri=n:Ri.push.apply(Ri,n)}function uU(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Gr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function So(n,e){for(e&=~U1,e&=~pg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Br(e),i=1<<t;n[t]=-1,e&=~i}}function XE(n){if(Nt&6)throw Error(Ae(327));Au();var e=vm(n,0);if(!(e&1))return Ui(n,_n()),null;var t=Om(n,e);if(n.tag!==0&&t===2){var i=ux(n);i!==0&&(e=i,t=kx(n,i))}if(t===1)throw t=Df,Fa(n,0),So(n,e),Ui(n,_n()),t;if(t===6)throw Error(Ae(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Sa(n,Ri,Cs),Ui(n,_n()),null}function F1(n,e){var t=Nt;Nt|=1;try{return n(e)}finally{Nt=t,Nt===0&&(Ou=_n()+500,cg&&Yo())}}function $a(n){Eo!==null&&Eo.tag===0&&!(Nt&6)&&Au();var e=Nt;Nt|=1;var t=Sr.transition,i=Bt;try{if(Sr.transition=null,Bt=1,n)return n()}finally{Bt=i,Sr.transition=t,Nt=e,!(Nt&6)&&Yo()}}function z1(){Xi=uu.current,qt(uu)}function Fa(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,zO(t)),bn!==null)for(t=bn.return;t!==null;){var i=t;switch(x1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mm();break;case 3:Nu(),qt(Di),qt(hi),C1();break;case 5:b1(i);break;case 4:Nu();break;case 13:qt(sn);break;case 19:qt(sn);break;case 10:w1(i.type._context);break;case 22:case 23:z1()}t=t.return}if(Hn=n,bn=n=Io(n.current,null),Zn=Xi=e,Ln=0,Df=null,U1=pg=Ka=0,Ri=of=null,Ra!==null){for(e=0;e<Ra.length;e++)if(t=Ra[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Ra=null}return n}function _P(n,e){do{var t=bn;try{if(M1(),$p.current=Lm,Rm){for(var i=ln.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Rm=!1}if(Za=0,Vn=Pn=ln=null,rf=!1,Lf=0,O1.current=null,t===null||t.return===null){Ln=1,Df=e,bn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Zn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=NE(o);if(m!==null){m.flags&=-257,DE(m,o,a,s,e),m.mode&1&&IE(s,f,e),e=m,l=f;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){IE(s,f,e),B1();break e}l=Error(Ae(426))}}else if(en&&a.mode&1){var x=NE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),DE(x,o,a,s,e),_1(Du(l,a));break e}}s=l=Du(l,a),Ln!==4&&(Ln=2),of===null?of=[s]:of.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=iP(s,l,e);TE(s,v);break e;case 1:a=l;var S=s.type,M=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Ro===null||!Ro.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=rP(s,a,e);TE(s,T);break e}}s=s.return}while(s!==null)}wP(t)}catch(P){e=P,bn===t&&t!==null&&(bn=t=t.return);continue}break}while(!0)}function SP(){var n=Im.current;return Im.current=Lm,n===null?Lm:n}function B1(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Hn===null||!(Ka&268435455)&&!(pg&268435455)||So(Hn,Zn)}function Om(n,e){var t=Nt;Nt|=2;var i=SP();(Hn!==n||Zn!==e)&&(Cs=null,Fa(n,e));do try{cU();break}catch(r){_P(n,r)}while(!0);if(M1(),Nt=t,Im.current=i,bn!==null)throw Error(Ae(261));return Hn=null,Zn=0,Ln}function cU(){for(;bn!==null;)MP(bn)}function fU(){for(;bn!==null&&!UD();)MP(bn)}function MP(n){var e=TP(n.alternate,n,Xi);n.memoizedProps=n.pendingProps,e===null?wP(n):bn=e,O1.current=null}function wP(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=rU(t,e),t!==null){t.flags&=32767,bn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ln=6,bn=null;return}}else if(t=iU(t,e,Xi),t!==null){bn=t;return}if(e=e.sibling,e!==null){bn=e;return}bn=e=n}while(e!==null);Ln===0&&(Ln=5)}function Sa(n,e,t){var i=Bt,r=Sr.transition;try{Sr.transition=null,Bt=1,hU(n,e,t,i)}finally{Sr.transition=r,Bt=i}return null}function hU(n,e,t,i){do Au();while(Eo!==null);if(Nt&6)throw Error(Ae(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ae(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(XD(n,s),n===Hn&&(bn=Hn=null,Zn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Vd||(Vd=!0,AP(gm,function(){return Au(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Sr.transition,Sr.transition=null;var o=Bt;Bt=1;var a=Nt;Nt|=4,O1.current=null,oU(n,t),vP(t,n),IO(mx),ym=!!px,mx=px=null,n.current=t,aU(t),kD(),Nt=a,Bt=o,Sr.transition=s}else n.current=t;if(Vd&&(Vd=!1,Eo=n,Dm=r),s=n.pendingLanes,s===0&&(Ro=null),BD(t.stateNode),Ui(n,_n()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Nm)throw Nm=!1,n=Ox,Ox=null,n;return Dm&1&&n.tag!==0&&Au(),s=n.pendingLanes,s&1?n===Ux?af++:(af=0,Ux=n):af=0,Yo(),null}function Au(){if(Eo!==null){var n=nC(Dm),e=Sr.transition,t=Bt;try{if(Sr.transition=null,Bt=16>n?16:n,Eo===null)var i=!1;else{if(n=Eo,Eo=null,Dm=0,Nt&6)throw Error(Ae(331));var r=Nt;for(Nt|=4,je=n.current;je!==null;){var s=je,o=s.child;if(je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(je=f;je!==null;){var h=je;switch(h.tag){case 0:case 11:case 15:sf(8,h,s)}var d=h.child;if(d!==null)d.return=h,je=d;else for(;je!==null;){h=je;var p=h.sibling,m=h.return;if(pP(h),h===f){je=null;break}if(p!==null){p.return=m,je=p;break}je=m}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,je=o;else e:for(;je!==null;){if(s=je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,je=v;break e}je=s.return}}var S=n.current;for(je=S;je!==null;){o=je;var M=o.child;if(o.subtreeFlags&2064&&M!==null)M.return=o,je=M;else e:for(o=S;je!==null;){if(a=je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dg(9,a)}}catch(P){dn(a,a.return,P)}if(a===o){je=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,je=T;break e}je=a.return}}if(Nt=r,Yo(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(sg,n)}catch{}i=!0}return i}finally{Bt=t,Sr.transition=e}}return!1}function YE(n,e,t){e=Du(t,e),e=iP(n,e,1),n=Po(n,e,1),e=_i(),n!==null&&(lh(n,1,e),Ui(n,e))}function dn(n,e,t){if(n.tag===3)YE(n,n,t);else for(;e!==null;){if(e.tag===3){YE(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ro===null||!Ro.has(i))){n=Du(t,n),n=rP(e,n,1),e=Po(e,n,1),n=_i(),e!==null&&(lh(e,1,n),Ui(e,n));break}}e=e.return}}function dU(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=_i(),n.pingedLanes|=n.suspendedLanes&t,Hn===n&&(Zn&t)===t&&(Ln===4||Ln===3&&(Zn&130023424)===Zn&&500>_n()-k1?Fa(n,0):U1|=t),Ui(n,e)}function EP(n,e){e===0&&(n.mode&1?(e=Ld,Ld<<=1,!(Ld&130023424)&&(Ld=4194304)):e=1);var t=_i();n=Gs(n,e),n!==null&&(lh(n,e,t),Ui(n,t))}function pU(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),EP(n,t)}function mU(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ae(314))}i!==null&&i.delete(e),EP(n,t)}var TP;TP=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Di.current)Ni=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ni=!1,nU(n,e,t);Ni=!!(n.flags&131072)}else Ni=!1,en&&e.flags&1048576&&CC(e,Tm,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Qp(n,e),n=e.pendingProps;var r=Ru(e,hi.current);Tu(e,t),r=R1(null,e,i,n,r,t);var s=L1();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(i)?(s=!0,wm(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,T1(e),r.updater=fg,e.stateNode=r,r._reactInternals=e,Ex(e,i,n,t),e=bx(null,e,i,!0,s,t)):(e.tag=0,en&&s&&y1(e),yi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Qp(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=vU(i),n=Lr(i,n),r){case 0:e=Ax(null,e,i,n,t);break e;case 1:e=kE(null,e,i,n,t);break e;case 11:e=OE(null,e,i,n,t);break e;case 14:e=UE(null,e,i,Lr(i.type,n),t);break e}throw Error(Ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Lr(i,r),Ax(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Lr(i,r),kE(n,e,i,r,t);case 3:e:{if(lP(e),n===null)throw Error(Ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,IC(n,e),Cm(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Du(Error(Ae(423)),e),e=FE(n,e,i,t,r);break e}else if(i!==r){r=Du(Error(Ae(424)),e),e=FE(n,e,i,t,r);break e}else for(qi=Co(e.stateNode.containerInfo.firstChild),Zi=e,en=!0,Dr=null,t=UC(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Lu(),i===r){e=Ws(n,e,t);break e}yi(n,e,i,t)}e=e.child}return e;case 5:return kC(e),n===null&&Sx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,gx(i,r)?o=null:s!==null&&gx(i,s)&&(e.flags|=32),aP(n,e),yi(n,e,o,t),e.child;case 6:return n===null&&Sx(e),null;case 13:return uP(n,e,t);case 4:return A1(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Iu(e,null,i,t):yi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Lr(i,r),OE(n,e,i,r,t);case 7:return yi(n,e,e.pendingProps,t),e.child;case 8:return yi(n,e,e.pendingProps.children,t),e.child;case 12:return yi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,jt(Am,i._currentValue),i._currentValue=o,s!==null)if(Gr(s.value,o)){if(s.children===r.children&&!Di.current){e=Ws(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ks(-1,t&-t),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?l.next=l:(l.next=h.next,h.next=l),f.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Mx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ae(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Mx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Tu(e,t),r=Mr(r),i=i(r),e.flags|=1,yi(n,e,i,t),e.child;case 14:return i=e.type,r=Lr(i,e.pendingProps),r=Lr(i.type,r),UE(n,e,i,r,t);case 15:return sP(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Lr(i,r),Qp(n,e),e.tag=1,Oi(i)?(n=!0,wm(e)):n=!1,Tu(e,t),DC(e,i,r),Ex(e,i,r,t),bx(null,e,i,!0,n,t);case 19:return cP(n,e,t);case 22:return oP(n,e,t)}throw Error(Ae(156,e.tag))};function AP(n,e){return Jb(n,e)}function gU(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(n,e,t,i){return new gU(n,e,t,i)}function V1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function vU(n){if(typeof n=="function")return V1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===o1)return 11;if(n===a1)return 14}return 2}function Io(n,e){var t=n.alternate;return t===null?(t=xr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function nm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")V1(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ql:return za(t.children,r,s,e);case s1:o=8,r|=8;break;case qy:return n=xr(12,t,e,r|2),n.elementType=qy,n.lanes=s,n;case Zy:return n=xr(13,t,e,r),n.elementType=Zy,n.lanes=s,n;case Ky:return n=xr(19,t,e,r),n.elementType=Ky,n.lanes=s,n;case Ob:return mg(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Nb:o=10;break e;case Db:o=9;break e;case o1:o=11;break e;case a1:o=14;break e;case vo:o=16,i=null;break e}throw Error(Ae(130,n==null?n:typeof n,""))}return e=xr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function za(n,e,t,i){return n=xr(7,n,i,e),n.lanes=t,n}function mg(n,e,t,i){return n=xr(22,n,i,e),n.elementType=Ob,n.lanes=t,n.stateNode={isHidden:!1},n}function kv(n,e,t){return n=xr(6,n,null,e),n.lanes=t,n}function Fv(n,e,t){return e=xr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function yU(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yv(0),this.expirationTimes=yv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function H1(n,e,t,i,r,s,o,a,l){return n=new yU(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},T1(s),n}function xU(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function bP(n){if(!n)return Fo;n=n._reactInternals;e:{if(nl(n)!==n||n.tag!==1)throw Error(Ae(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(n.tag===1){var t=n.type;if(Oi(t))return AC(n,t,e)}return e}function CP(n,e,t,i,r,s,o,a,l){return n=H1(t,i,!0,n,r,s,o,a,l),n.context=bP(null),t=n.current,i=_i(),r=Lo(t),s=ks(i,r),s.callback=e??null,Po(t,s,r),n.current.lanes=r,lh(n,r,i),Ui(n,i),n}function gg(n,e,t,i){var r=e.current,s=_i(),o=Lo(r);return t=bP(t),e.context===null?e.context=t:e.pendingContext=t,e=ks(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Po(r,e,o),n!==null&&(Vr(n,r,o,s),Kp(n,r,o)),o}function Um(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function qE(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function G1(n,e){qE(n,e),(n=n.alternate)&&qE(n,e)}function _U(){return null}var PP=typeof reportError=="function"?reportError:function(n){console.error(n)};function W1(n){this._internalRoot=n}vg.prototype.render=W1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ae(409));gg(n,e,null,null)};vg.prototype.unmount=W1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;$a(function(){gg(null,n,null,null)}),e[Hs]=null}};function vg(n){this._internalRoot=n}vg.prototype.unstable_scheduleHydration=function(n){if(n){var e=sC();n={blockedOn:null,target:n,priority:e};for(var t=0;t<_o.length&&e!==0&&e<_o[t].priority;t++);_o.splice(t,0,n),t===0&&aC(n)}};function j1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ZE(){}function SU(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=Um(o);s.call(f)}}var o=CP(e,i,n,0,null,!1,!1,"",ZE);return n._reactRootContainer=o,n[Hs]=o.current,Af(n.nodeType===8?n.parentNode:n),$a(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var f=Um(l);a.call(f)}}var l=H1(n,0,!1,null,null,!1,!1,"",ZE);return n._reactRootContainer=l,n[Hs]=l.current,Af(n.nodeType===8?n.parentNode:n),$a(function(){gg(e,l,t,i)}),l}function xg(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Um(o);a.call(l)}}gg(e,o,n,r)}else o=SU(t,e,n,r,i);return Um(o)}iC=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=qc(e.pendingLanes);t!==0&&(c1(e,t|1),Ui(e,_n()),!(Nt&6)&&(Ou=_n()+500,Yo()))}break;case 13:$a(function(){var i=Gs(n,1);if(i!==null){var r=_i();Vr(i,n,1,r)}}),G1(n,1)}};f1=function(n){if(n.tag===13){var e=Gs(n,134217728);if(e!==null){var t=_i();Vr(e,n,134217728,t)}G1(n,134217728)}};rC=function(n){if(n.tag===13){var e=Lo(n),t=Gs(n,e);if(t!==null){var i=_i();Vr(t,n,e,i)}G1(n,e)}};sC=function(){return Bt};oC=function(n,e){var t=Bt;try{return Bt=n,e()}finally{Bt=t}};ox=function(n,e,t){switch(e){case"input":if(Qy(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=ug(i);if(!r)throw Error(Ae(90));kb(i),Qy(i,r)}}}break;case"textarea":zb(n,t);break;case"select":e=t.value,e!=null&&Su(n,!!t.multiple,e,!1)}};Xb=F1;Yb=$a;var MU={usingClientEntryPoint:!1,Events:[ch,iu,ug,Wb,jb,F1]},Ac={findFiberByHostInstance:Pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wU={bundleType:Ac.bundleType,version:Ac.version,rendererPackageName:Ac.rendererPackageName,rendererConfig:Ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Kb(n),n===null?null:n.stateNode},findFiberByHostInstance:Ac.findFiberByHostInstance||_U,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{sg=Hd.inject(wU),os=Hd}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MU;Qi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j1(e))throw Error(Ae(200));return xU(n,e,null,t)};Qi.createRoot=function(n,e){if(!j1(n))throw Error(Ae(299));var t=!1,i="",r=PP;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=H1(n,1,!1,null,null,t,!1,i,r),n[Hs]=e.current,Af(n.nodeType===8?n.parentNode:n),new W1(e)};Qi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ae(188)):(n=Object.keys(n).join(","),Error(Ae(268,n)));return n=Kb(e),n=n===null?null:n.stateNode,n};Qi.flushSync=function(n){return $a(n)};Qi.hydrate=function(n,e,t){if(!yg(e))throw Error(Ae(200));return xg(null,n,e,!0,t)};Qi.hydrateRoot=function(n,e,t){if(!j1(n))throw Error(Ae(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=PP;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=CP(e,null,n,1,t??null,r,!1,s,o),n[Hs]=e.current,Af(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new vg(e)};Qi.render=function(n,e,t){if(!yg(e))throw Error(Ae(200));return xg(null,n,e,!1,t)};Qi.unmountComponentAtNode=function(n){if(!yg(n))throw Error(Ae(40));return n._reactRootContainer?($a(function(){xg(null,null,n,!1,function(){n._reactRootContainer=null,n[Hs]=null})}),!0):!1};Qi.unstable_batchedUpdates=F1;Qi.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!yg(t))throw Error(Ae(200));if(n==null||n._reactInternals===void 0)throw Error(Ae(38));return xg(n,e,t,!1,i)};Qi.version="18.2.0-next-9e3b772b8-20220608";function RP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RP)}catch(n){console.error(n)}}RP(),Cb.exports=Qi;var EU=Cb.exports,LP,KE=EU;LP=Xy.createRoot=KE.createRoot,Xy.hydrateRoot=KE.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Of(){return Of=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Of.apply(this,arguments)}var Ia;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ia||(Ia={}));const $E="popstate";function TU(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return zx("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:km(r)}return bU(e,t,null,n)}function Hr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function AU(){return Math.random().toString(36).substr(2,8)}function JE(n,e){return{usr:n.state,key:n.key,idx:e}}function zx(n,e,t,i){return t===void 0&&(t=null),Of({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?_g(e):e,{state:t,key:e&&e.key||i||AU()})}function km(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function _g(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function bU(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ia.Pop,l=null,f=h();f==null&&(f=0,o.replaceState(Of({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Ia.Pop;let x=h(),v=x==null?null:x-f;f=x,l&&l({action:a,location:w.location,delta:v})}function p(x,v){a=Ia.Push;let S=zx(w.location,x,v);t&&t(S,x),f=h()+1;let M=JE(S,f),T=w.createHref(S);try{o.pushState(M,"",T)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(T)}s&&l&&l({action:a,location:w.location,delta:1})}function m(x,v){a=Ia.Replace;let S=zx(w.location,x,v);t&&t(S,x),f=h();let M=JE(S,f),T=w.createHref(S);o.replaceState(M,"",T),s&&l&&l({action:a,location:w.location,delta:0})}function y(x){let v=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof x=="string"?x:km(x);return Hr(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let w={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener($E,d),l=x,()=>{r.removeEventListener($E,d),l=null}},createHref(x){return e(r,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return o.go(x)}};return w}var QE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(QE||(QE={}));function IP(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function CU(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?_g(n):n;return{pathname:t?t.startsWith("/")?t:PU(t,e):e,search:LU(i),hash:IU(r)}}function PU(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function zv(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RU(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function NP(n,e){let t=RU(n);return e?t.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function DP(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=_g(n):(r=Of({},n),Hr(!r.pathname||!r.pathname.includes("?"),zv("?","pathname","search",r)),Hr(!r.pathname||!r.pathname.includes("#"),zv("#","pathname","hash",r)),Hr(!r.search||!r.search.includes("#"),zv("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=CU(r,a),f=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(f||h)&&(l.pathname+="/"),l}const OP=n=>n.join("/").replace(/\/\/+/g,"/"),LU=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,IU=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,UP=["post","put","patch","delete"];new Set(UP);const NU=["get",...UP];new Set(NU);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fm(){return Fm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Fm.apply(this,arguments)}const kP=W.createContext(null),Yu=W.createContext(null),X1=W.createContext(null),Sg=W.createContext({outlet:null,matches:[],isDataRoute:!1});function DU(n,e){let{relative:t}=e===void 0?{}:e;Mg()||Hr(!1);let{basename:i,navigator:r}=W.useContext(Yu),{hash:s,pathname:o,search:a}=zP(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:OP([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Mg(){return W.useContext(X1)!=null}function Y1(){return Mg()||Hr(!1),W.useContext(X1).location}function FP(n){W.useContext(Yu).static||W.useLayoutEffect(n)}function OU(){let{isDataRoute:n}=W.useContext(Sg);return n?BU():UU()}function UU(){Mg()||Hr(!1);let n=W.useContext(kP),{basename:e,future:t,navigator:i}=W.useContext(Yu),{matches:r}=W.useContext(Sg),{pathname:s}=Y1(),o=JSON.stringify(NP(r,t.v7_relativeSplatPath)),a=W.useRef(!1);return FP(()=>{a.current=!0}),W.useCallback(function(f,h){if(h===void 0&&(h={}),!a.current)return;if(typeof f=="number"){i.go(f);return}let d=DP(f,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:OP([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,n])}function zP(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=W.useContext(Yu),{matches:r}=W.useContext(Sg),{pathname:s}=Y1(),o=JSON.stringify(NP(r,i.v7_relativeSplatPath));return W.useMemo(()=>DP(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}var BP=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(BP||{}),VP=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(VP||{});function kU(n){let e=W.useContext(kP);return e||Hr(!1),e}function FU(n){let e=W.useContext(Sg);return e||Hr(!1),e}function zU(n){let e=FU(),t=e.matches[e.matches.length-1];return t.route.id||Hr(!1),t.route.id}function BU(){let{router:n}=kU(BP.UseNavigateStable),e=zU(VP.UseNavigateStable),t=W.useRef(!1);return FP(()=>{t.current=!0}),W.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Fm({fromRouteId:e},s)))},[n,e])}function VU(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Ia.Pop,navigator:s,static:o=!1,future:a}=n;Mg()&&Hr(!1);let l=e.replace(/^\/*/,"/"),f=W.useMemo(()=>({basename:l,navigator:s,static:o,future:Fm({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=_g(i));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:y="default"}=i,w=W.useMemo(()=>{let x=IP(h,l);return x==null?null:{location:{pathname:x,search:d,hash:p,state:m,key:y},navigationType:r}},[l,h,d,p,m,y,r]);return w==null?null:W.createElement(Yu.Provider,{value:f},W.createElement(X1.Provider,{children:t,value:w}))}new Promise(()=>{});/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bx(){return Bx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Bx.apply(this,arguments)}function HU(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function GU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function WU(n,e){return n.button===0&&(!e||e==="_self")&&!GU(n)}const jU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],XU="startTransition",eT=pD[XU];function YU(n){let{basename:e,children:t,future:i,window:r}=n,s=W.useRef();s.current==null&&(s.current=TU({window:r,v5Compat:!0}));let o=s.current,[a,l]=W.useState({action:o.action,location:o.location}),{v7_startTransition:f}=i||{},h=W.useCallback(d=>{f&&eT?eT(()=>l(d)):l(d)},[l,f]);return W.useLayoutEffect(()=>o.listen(h),[o,h]),W.createElement(VU,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const qU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KU=W.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:f,preventScrollReset:h,unstable_viewTransition:d}=e,p=HU(e,jU),{basename:m}=W.useContext(Yu),y,w=!1;if(typeof f=="string"&&ZU.test(f)&&(y=f,qU))try{let M=new URL(window.location.href),T=f.startsWith("//")?new URL(M.protocol+f):new URL(f),P=IP(T.pathname,m);T.origin===M.origin&&P!=null?f=P+T.search+T.hash:w=!0}catch{}let x=DU(f,{relative:r}),v=$U(f,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,unstable_viewTransition:d});function S(M){i&&i(M),M.defaultPrevented||v(M)}return W.createElement("a",Bx({},p,{href:y||x,onClick:w||s?i:S,ref:t,target:l}))});var tT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(tT||(tT={}));var nT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(nT||(nT={}));function $U(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=OU(),f=Y1(),h=zP(n,{relative:o});return W.useCallback(d=>{if(WU(d,t)){d.preventDefault();let p=i!==void 0?i:km(f)===km(h);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[f,l,h,i,r,t,n,s,o,a])}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const hh="160",Ma={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},HP=0,Vx=1,GP=2,JU=3,WP=0,wg=1,lf=2,Ir=3,js=0,Si=1,Ur=2,QU=2,Fs=0,Ba=1,Hx=2,Gx=3,Wx=4,jP=5,Mo=100,XP=101,YP=102,jx=103,Xx=104,qP=200,ZP=201,KP=202,$P=203,zm=204,Bm=205,JP=206,QP=207,eR=208,tR=209,nR=210,iR=211,rR=212,sR=213,oR=214,aR=0,lR=1,uR=2,Uf=3,cR=4,fR=5,hR=6,dR=7,dh=0,pR=1,mR=2,ls=0,gR=1,vR=2,yR=3,q1=4,xR=5,_R=6,Yx="attached",SR="detached",Eg=300,Xs=301,zo=302,kf=303,Ff=304,qu=306,zf=1e3,ui=1001,Bf=1002,xn=1003,Vm=1004,e4=1004,uf=1005,t4=1005,Sn=1006,Z1=1007,n4=1007,Bo=1008,i4=1008,us=1009,MR=1010,wR=1011,Tg=1012,K1=1013,Ds=1014,kr=1015,Uu=1016,$1=1017,J1=1018,No=1020,ER=1021,xi=1023,TR=1024,AR=1025,Do=1026,Ja=1027,bR=1028,Q1=1029,CR=1030,eS=1031,tS=1033,im=33776,rm=33777,sm=33778,om=33779,qx=35840,Zx=35841,Kx=35842,$x=35843,nS=36196,Jx=37492,Qx=37496,e_=37808,t_=37809,n_=37810,i_=37811,r_=37812,s_=37813,o_=37814,a_=37815,l_=37816,u_=37817,c_=37818,f_=37819,h_=37820,d_=37821,am=36492,p_=36494,m_=36495,PR=36283,g_=36284,v_=36285,y_=36286,RR=2200,LR=2201,IR=2202,Vf=2300,Hf=2301,lm=2302,Na=2400,Da=2401,Gf=2402,Ag=2500,iS=2501,r4=0,s4=1,o4=2,rS=3e3,Oo=3001,NR=3200,DR=3201,qo=0,OR=1,Yi="",Rn="srgb",hs="srgb-linear",bg="display-p3",ph="display-p3-linear",Wf="linear",Wt="srgb",jf="rec709",Xf="p3",a4=0,Ea=7680,l4=7681,u4=7682,c4=7683,f4=34055,h4=34056,d4=5386,p4=512,m4=513,g4=514,v4=515,y4=516,x4=517,_4=518,x_=519,UR=512,kR=513,FR=514,sS=515,zR=516,BR=517,VR=518,HR=519,Yf=35044,Va=35048,S4=35040,M4=35045,w4=35049,E4=35041,T4=35046,A4=35050,b4=35042,C4="100",__="300 es",Hm=1035,Fr=2e3,ku=2001;class ps{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ri=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let iT=1234567;const Ha=Math.PI/180,Fu=180/Math.PI;function Ki(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ri[n&255]+ri[n>>8&255]+ri[n>>16&255]+ri[n>>24&255]+"-"+ri[e&255]+ri[e>>8&255]+"-"+ri[e>>16&15|64]+ri[e>>24&255]+"-"+ri[t&63|128]+ri[t>>8&255]+"-"+ri[t>>16&255]+ri[t>>24&255]+ri[i&255]+ri[i>>8&255]+ri[i>>16&255]+ri[i>>24&255]).toLowerCase()}function pn(n,e,t){return Math.max(e,Math.min(t,n))}function oS(n,e){return(n%e+e)%e}function P4(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function R4(n,e,t){return n!==e?(t-n)/(e-n):0}function cf(n,e,t){return(1-t)*n+t*e}function L4(n,e,t,i){return cf(n,e,1-Math.exp(-t*i))}function I4(n,e=1){return e-Math.abs(oS(n,e*2)-e)}function N4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function D4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function O4(n,e){return n+Math.floor(Math.random()*(e-n+1))}function U4(n,e){return n+Math.random()*(e-n)}function k4(n){return n*(.5-Math.random())}function F4(n){n!==void 0&&(iT=n);let e=iT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function z4(n){return n*Ha}function B4(n){return n*Fu}function S_(n){return(n&n-1)===0&&n!==0}function V4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Gm(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function H4(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),f=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*d,l*p,a*f);break;case"YZY":n.set(l*p,a*h,l*d,a*f);break;case"ZXZ":n.set(l*d,l*p,a*h,a*f);break;case"XZX":n.set(a*h,l*y,l*m,a*f);break;case"YXY":n.set(l*m,a*h,l*y,a*f);break;case"ZYZ":n.set(l*y,l*m,a*h,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ii(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function St(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const G4={DEG2RAD:Ha,RAD2DEG:Fu,generateUUID:Ki,clamp:pn,euclideanModulo:oS,mapLinear:P4,inverseLerp:R4,lerp:cf,damp:L4,pingpong:I4,smoothstep:N4,smootherstep:D4,randInt:O4,randFloat:U4,randFloatSpread:k4,seededRandom:F4,degToRad:z4,radToDeg:B4,isPowerOfTwo:S_,ceilPowerOfTwo:V4,floorPowerOfTwo:Gm,setQuaternionFromProperEuler:H4,normalize:St,denormalize:Ii};class me{constructor(e=0,t=0){me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(pn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Et{constructor(e,t,i,r,s,o,a,l,f){Et.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,f)}set(e,t,i,r,s,o,a,l,f){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],f=i[1],h=i[4],d=i[7],p=i[2],m=i[5],y=i[8],w=r[0],x=r[3],v=r[6],S=r[1],M=r[4],T=r[7],P=r[2],b=r[5],L=r[8];return s[0]=o*w+a*S+l*P,s[3]=o*x+a*M+l*b,s[6]=o*v+a*T+l*L,s[1]=f*w+h*S+d*P,s[4]=f*x+h*M+d*b,s[7]=f*v+h*T+d*L,s[2]=p*w+m*S+y*P,s[5]=p*x+m*M+y*b,s[8]=p*v+m*T+y*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8];return t*o*h-t*a*f-i*s*h+i*a*l+r*s*f-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],d=h*o-a*f,p=a*l-h*s,m=f*s-o*l,y=t*d+i*p+r*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/y;return e[0]=d*w,e[1]=(r*f-h*i)*w,e[2]=(a*i-r*o)*w,e[3]=p*w,e[4]=(h*t-r*l)*w,e[5]=(r*s-a*t)*w,e[6]=m*w,e[7]=(i*l-f*t)*w,e[8]=(o*t-i*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),f=Math.sin(s);return this.set(i*l,i*f,-i*(l*o+f*a)+o+e,-r*f,r*l,-r*(-f*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Bv.makeScale(e,t)),this}rotate(e){return this.premultiply(Bv.makeRotation(-e)),this}translate(e,t){return this.premultiply(Bv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Bv=new Et;function GR(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const W4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cu(n,e){return new W4[n](e)}function qf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function WR(){const n=qf("canvas");return n.style.display="block",n}const rT={};function ff(n){n in rT||(rT[n]=!0,console.warn(n))}const sT=new Et().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),oT=new Et().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Gd={[hs]:{transfer:Wf,primaries:jf,toReference:n=>n,fromReference:n=>n},[Rn]:{transfer:Wt,primaries:jf,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[ph]:{transfer:Wf,primaries:Xf,toReference:n=>n.applyMatrix3(oT),fromReference:n=>n.applyMatrix3(sT)},[bg]:{transfer:Wt,primaries:Xf,toReference:n=>n.convertSRGBToLinear().applyMatrix3(oT),fromReference:n=>n.applyMatrix3(sT).convertLinearToSRGB()}},j4=new Set([hs,ph]),Ft={enabled:!0,_workingColorSpace:hs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!j4.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Gd[e].toReference,r=Gd[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Gd[n].primaries},getTransfer:function(n){return n===Yi?Wf:Gd[n].transfer}};function bu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Vv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let bl;class aS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{bl===void 0&&(bl=qf("canvas")),bl.width=e.width,bl.height=e.height;const i=bl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=bl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=bu(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(bu(t[i]/255)*255):t[i]=bu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let X4=0;class Oa{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:X4++}),this.uuid=Ki(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Hv(r[o].image)):s.push(Hv(r[o]))}else s=Hv(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Hv(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?aS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Y4=0;class mn extends ps{constructor(e=mn.DEFAULT_IMAGE,t=mn.DEFAULT_MAPPING,i=ui,r=ui,s=Sn,o=Bo,a=xi,l=us,f=mn.DEFAULT_ANISOTROPY,h=Yi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Y4++}),this.uuid=Ki(),this.name="",this.source=new Oa(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=l,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Et,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(ff("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Oo?Rn:Yi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Eg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zf:e.x=e.x-Math.floor(e.x);break;case ui:e.x=e.x<0?0:1;break;case Bf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zf:e.y=e.y-Math.floor(e.y);break;case ui:e.y=e.y<0?0:1;break;case Bf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return ff("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Rn?Oo:rS}set encoding(e){ff("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Oo?Rn:Yi}}mn.DEFAULT_IMAGE=null;mn.DEFAULT_MAPPING=Eg;mn.DEFAULT_ANISOTROPY=1;class zt{constructor(e=0,t=0,i=0,r=1){zt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,f=l[0],h=l[4],d=l[8],p=l[1],m=l[5],y=l[9],w=l[2],x=l[6],v=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-w)<.01&&Math.abs(y-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+w)<.1&&Math.abs(y+x)<.1&&Math.abs(f+m+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(f+1)/2,T=(m+1)/2,P=(v+1)/2,b=(h+p)/4,L=(d+w)/4,D=(y+x)/4;return M>T&&M>P?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=b/i,s=L/i):T>P?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=b/r,s=D/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=L/s,r=D/s),this.set(i,r,s,t),this}let S=Math.sqrt((x-y)*(x-y)+(d-w)*(d-w)+(p-h)*(p-h));return Math.abs(S)<.001&&(S=1),this.x=(x-y)/S,this.y=(d-w)/S,this.z=(p-h)/S,this.w=Math.acos((f+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class jR extends ps{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new zt(0,0,e,t),this.scissorTest=!1,this.viewport=new zt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(ff("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Oo?Rn:Yi),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Sn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new mn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Oa(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wr extends jR{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Cg extends mn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=xn,this.minFilter=xn,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class q4 extends Wr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Cg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class lS extends mn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=xn,this.minFilter=xn,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Z4 extends Wr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new lS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class K4 extends Wr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ci{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],f=i[r+1],h=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],y=s[o+2],w=s[o+3];if(a===0){e[t+0]=l,e[t+1]=f,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=w;return}if(d!==w||l!==p||f!==m||h!==y){let x=1-a;const v=l*p+f*m+h*y+d*w,S=v>=0?1:-1,M=1-v*v;if(M>Number.EPSILON){const P=Math.sqrt(M),b=Math.atan2(P,v*S);x=Math.sin(x*b)/P,a=Math.sin(a*b)/P}const T=a*S;if(l=l*x+p*T,f=f*x+m*T,h=h*x+y*T,d=d*x+w*T,x===1-a){const P=1/Math.sqrt(l*l+f*f+h*h+d*d);l*=P,f*=P,h*=P,d*=P}}e[t]=l,e[t+1]=f,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],f=i[r+2],h=i[r+3],d=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+h*d+l*m-f*p,e[t+1]=l*y+h*p+f*d-a*m,e[t+2]=f*y+h*m+a*p-l*d,e[t+3]=h*y-a*d-l*p-f*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,f=a(i/2),h=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*d+f*m*y,this._y=f*m*d-p*h*y,this._z=f*h*y+p*m*d,this._w=f*h*d-p*m*y;break;case"YXZ":this._x=p*h*d+f*m*y,this._y=f*m*d-p*h*y,this._z=f*h*y-p*m*d,this._w=f*h*d+p*m*y;break;case"ZXY":this._x=p*h*d-f*m*y,this._y=f*m*d+p*h*y,this._z=f*h*y+p*m*d,this._w=f*h*d-p*m*y;break;case"ZYX":this._x=p*h*d-f*m*y,this._y=f*m*d+p*h*y,this._z=f*h*y-p*m*d,this._w=f*h*d+p*m*y;break;case"YZX":this._x=p*h*d+f*m*y,this._y=f*m*d+p*h*y,this._z=f*h*y-p*m*d,this._w=f*h*d-p*m*y;break;case"XZY":this._x=p*h*d-f*m*y,this._y=f*m*d-p*h*y,this._z=f*h*y+p*m*d,this._w=f*h*d+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],f=t[2],h=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-f)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+f)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-f)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+f)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,f=t._z,h=t._w;return this._x=i*h+o*a+r*f-s*l,this._y=r*h+o*l+s*a-i*f,this._z=s*h+o*f+i*l-r*a,this._w=o*h-i*a-r*l-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const f=Math.sqrt(l),h=Math.atan2(f,a),d=Math.sin((1-t)*h)/f,p=Math.sin(t*h)/f;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,t=0,i=0){k.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(aT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(aT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,f=2*(o*r-a*i),h=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*f+o*d-a*h,this.y=i+l*h+a*f-s*d,this.z=r+l*d+s*h-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Gv.copy(this).projectOnVector(e),this.sub(Gv)}reflect(e){return this.sub(Gv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(pn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Gv=new k,aT=new ci;class Mi{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Cr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Cr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Cr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Cr):Cr.fromBufferAttribute(s,o),Cr.applyMatrix4(e.matrixWorld),this.expandByPoint(Cr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Wd.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Wd.copy(i.boundingBox)),Wd.applyMatrix4(e.matrixWorld),this.union(Wd)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Cr),Cr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bc),jd.subVectors(this.max,bc),Cl.subVectors(e.a,bc),Pl.subVectors(e.b,bc),Rl.subVectors(e.c,bc),oo.subVectors(Pl,Cl),ao.subVectors(Rl,Pl),la.subVectors(Cl,Rl);let t=[0,-oo.z,oo.y,0,-ao.z,ao.y,0,-la.z,la.y,oo.z,0,-oo.x,ao.z,0,-ao.x,la.z,0,-la.x,-oo.y,oo.x,0,-ao.y,ao.x,0,-la.y,la.x,0];return!Wv(t,Cl,Pl,Rl,jd)||(t=[1,0,0,0,1,0,0,0,1],!Wv(t,Cl,Pl,Rl,jd))?!1:(Xd.crossVectors(oo,ao),t=[Xd.x,Xd.y,Xd.z],Wv(t,Cl,Pl,Rl,jd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Cr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Cr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ms[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ms[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ms[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ms[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ms[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ms[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ms[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ms[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ms),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ms=[new k,new k,new k,new k,new k,new k,new k,new k],Cr=new k,Wd=new Mi,Cl=new k,Pl=new k,Rl=new k,oo=new k,ao=new k,la=new k,bc=new k,jd=new k,Xd=new k,ua=new k;function Wv(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ua.fromArray(n,s);const a=r.x*Math.abs(ua.x)+r.y*Math.abs(ua.y)+r.z*Math.abs(ua.z),l=e.dot(ua),f=t.dot(ua),h=i.dot(ua);if(Math.max(-Math.max(l,f,h),Math.min(l,f,h))>a)return!1}return!0}const $4=new Mi,Cc=new k,jv=new k;class fi{constructor(e=new k,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):$4.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cc.subVectors(e,this.center);const t=Cc.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Cc,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(jv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cc.copy(e.center).add(jv)),this.expandByPoint(Cc.copy(e.center).sub(jv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ws=new k,Xv=new k,Yd=new k,lo=new k,Yv=new k,qd=new k,qv=new k;class il{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ws)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ws.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ws.copy(this.origin).addScaledVector(this.direction,t),ws.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Xv.copy(e).add(t).multiplyScalar(.5),Yd.copy(t).sub(e).normalize(),lo.copy(this.origin).sub(Xv);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Yd),a=lo.dot(this.direction),l=-lo.dot(Yd),f=lo.lengthSq(),h=Math.abs(1-o*o);let d,p,m,y;if(h>0)if(d=o*l-a,p=o*a-l,y=s*h,d>=0)if(p>=-y)if(p<=y){const w=1/h;d*=w,p*=w,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+f}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;else p<=-y?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+f):p<=y?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+f):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+f);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Xv).addScaledVector(Yd,p),m}intersectSphere(e,t){ws.subVectors(e.center,this.origin);const i=ws.dot(this.direction),r=ws.dot(ws)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const f=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return f>=0?(i=(e.min.x-p.x)*f,r=(e.max.x-p.x)*f):(i=(e.max.x-p.x)*f,r=(e.min.x-p.x)*f),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ws)!==null}intersectTriangle(e,t,i,r,s){Yv.subVectors(t,e),qd.subVectors(i,e),qv.crossVectors(Yv,qd);let o=this.direction.dot(qv),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;lo.subVectors(this.origin,e);const l=a*this.direction.dot(qd.crossVectors(lo,qd));if(l<0)return null;const f=a*this.direction.dot(Yv.cross(lo));if(f<0||l+f>o)return null;const h=-a*lo.dot(qv);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(e,t,i,r,s,o,a,l,f,h,d,p,m,y,w,x){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,f,h,d,p,m,y,w,x)}set(e,t,i,r,s,o,a,l,f,h,d,p,m,y,w,x){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=f,v[6]=h,v[10]=d,v[14]=p,v[3]=m,v[7]=y,v[11]=w,v[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ll.setFromMatrixColumn(e,0).length(),s=1/Ll.setFromMatrixColumn(e,1).length(),o=1/Ll.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),f=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,y=a*h,w=a*d;t[0]=l*h,t[4]=-l*d,t[8]=f,t[1]=m+y*f,t[5]=p-w*f,t[9]=-a*l,t[2]=w-p*f,t[6]=y+m*f,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,y=f*h,w=f*d;t[0]=p+w*a,t[4]=y*a-m,t[8]=o*f,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-y,t[6]=w+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,y=f*h,w=f*d;t[0]=p-w*a,t[4]=-o*d,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*h,t[9]=w-p*a,t[2]=-o*f,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,y=a*h,w=a*d;t[0]=l*h,t[4]=y*f-m,t[8]=p*f+w,t[1]=l*d,t[5]=w*f+p,t[9]=m*f-y,t[2]=-f,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*f,y=a*l,w=a*f;t[0]=l*h,t[4]=w-p*d,t[8]=y*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-f*h,t[6]=m*d+y,t[10]=p-w*d}else if(e.order==="XZY"){const p=o*l,m=o*f,y=a*l,w=a*f;t[0]=l*h,t[4]=-d,t[8]=f*h,t[1]=p*d+w,t[5]=o*h,t[9]=m*d-y,t[2]=y*d-m,t[6]=a*h,t[10]=w*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(J4,e,Q4)}lookAt(e,t,i){const r=this.elements;return Wi.subVectors(e,t),Wi.lengthSq()===0&&(Wi.z=1),Wi.normalize(),uo.crossVectors(i,Wi),uo.lengthSq()===0&&(Math.abs(i.z)===1?Wi.x+=1e-4:Wi.z+=1e-4,Wi.normalize(),uo.crossVectors(i,Wi)),uo.normalize(),Zd.crossVectors(Wi,uo),r[0]=uo.x,r[4]=Zd.x,r[8]=Wi.x,r[1]=uo.y,r[5]=Zd.y,r[9]=Wi.y,r[2]=uo.z,r[6]=Zd.z,r[10]=Wi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],f=i[12],h=i[1],d=i[5],p=i[9],m=i[13],y=i[2],w=i[6],x=i[10],v=i[14],S=i[3],M=i[7],T=i[11],P=i[15],b=r[0],L=r[4],D=r[8],C=r[12],R=r[1],z=r[5],Z=r[9],oe=r[13],H=r[2],K=r[6],$=r[10],se=r[14],N=r[3],B=r[7],V=r[11],Y=r[15];return s[0]=o*b+a*R+l*H+f*N,s[4]=o*L+a*z+l*K+f*B,s[8]=o*D+a*Z+l*$+f*V,s[12]=o*C+a*oe+l*se+f*Y,s[1]=h*b+d*R+p*H+m*N,s[5]=h*L+d*z+p*K+m*B,s[9]=h*D+d*Z+p*$+m*V,s[13]=h*C+d*oe+p*se+m*Y,s[2]=y*b+w*R+x*H+v*N,s[6]=y*L+w*z+x*K+v*B,s[10]=y*D+w*Z+x*$+v*V,s[14]=y*C+w*oe+x*se+v*Y,s[3]=S*b+M*R+T*H+P*N,s[7]=S*L+M*z+T*K+P*B,s[11]=S*D+M*Z+T*$+P*V,s[15]=S*C+M*oe+T*se+P*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],f=e[13],h=e[2],d=e[6],p=e[10],m=e[14],y=e[3],w=e[7],x=e[11],v=e[15];return y*(+s*l*d-r*f*d-s*a*p+i*f*p+r*a*m-i*l*m)+w*(+t*l*m-t*f*p+s*o*p-r*o*m+r*f*h-s*l*h)+x*(+t*f*d-t*a*m-s*o*d+i*o*m+s*a*h-i*f*h)+v*(-r*a*h-t*l*d+t*a*p+r*o*d-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],d=e[9],p=e[10],m=e[11],y=e[12],w=e[13],x=e[14],v=e[15],S=d*x*f-w*p*f+w*l*m-a*x*m-d*l*v+a*p*v,M=y*p*f-h*x*f-y*l*m+o*x*m+h*l*v-o*p*v,T=h*w*f-y*d*f+y*a*m-o*w*m-h*a*v+o*d*v,P=y*d*l-h*w*l-y*a*p+o*w*p+h*a*x-o*d*x,b=t*S+i*M+r*T+s*P;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/b;return e[0]=S*L,e[1]=(w*p*s-d*x*s-w*r*m+i*x*m+d*r*v-i*p*v)*L,e[2]=(a*x*s-w*l*s+w*r*f-i*x*f-a*r*v+i*l*v)*L,e[3]=(d*l*s-a*p*s-d*r*f+i*p*f+a*r*m-i*l*m)*L,e[4]=M*L,e[5]=(h*x*s-y*p*s+y*r*m-t*x*m-h*r*v+t*p*v)*L,e[6]=(y*l*s-o*x*s-y*r*f+t*x*f+o*r*v-t*l*v)*L,e[7]=(o*p*s-h*l*s+h*r*f-t*p*f-o*r*m+t*l*m)*L,e[8]=T*L,e[9]=(y*d*s-h*w*s-y*i*m+t*w*m+h*i*v-t*d*v)*L,e[10]=(o*w*s-y*a*s+y*i*f-t*w*f-o*i*v+t*a*v)*L,e[11]=(h*a*s-o*d*s-h*i*f+t*d*f+o*i*m-t*a*m)*L,e[12]=P*L,e[13]=(h*w*r-y*d*r+y*i*p-t*w*p-h*i*x+t*d*x)*L,e[14]=(y*a*r-o*w*r-y*i*l+t*w*l+o*i*x-t*a*x)*L,e[15]=(o*d*r-h*a*r+h*i*l-t*d*l-o*i*p+t*a*p)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,f=s*o,h=s*a;return this.set(f*o+i,f*a-r*l,f*l+r*a,0,f*a+r*l,h*a+i,h*l-r*o,0,f*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,f=s+s,h=o+o,d=a+a,p=s*f,m=s*h,y=s*d,w=o*h,x=o*d,v=a*d,S=l*f,M=l*h,T=l*d,P=i.x,b=i.y,L=i.z;return r[0]=(1-(w+v))*P,r[1]=(m+T)*P,r[2]=(y-M)*P,r[3]=0,r[4]=(m-T)*b,r[5]=(1-(p+v))*b,r[6]=(x+S)*b,r[7]=0,r[8]=(y+M)*L,r[9]=(x-S)*L,r[10]=(1-(p+w))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ll.set(r[0],r[1],r[2]).length();const o=Ll.set(r[4],r[5],r[6]).length(),a=Ll.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Pr.copy(this);const f=1/s,h=1/o,d=1/a;return Pr.elements[0]*=f,Pr.elements[1]*=f,Pr.elements[2]*=f,Pr.elements[4]*=h,Pr.elements[5]*=h,Pr.elements[6]*=h,Pr.elements[8]*=d,Pr.elements[9]*=d,Pr.elements[10]*=d,t.setFromRotationMatrix(Pr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Fr){const l=this.elements,f=2*s/(t-e),h=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let m,y;if(a===Fr)m=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===ku)m=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=f,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Fr){const l=this.elements,f=1/(t-e),h=1/(i-r),d=1/(o-s),p=(t+e)*f,m=(i+r)*h;let y,w;if(a===Fr)y=(o+s)*d,w=-2*d;else if(a===ku)y=s*d,w=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*f,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=w,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ll=new k,Pr=new ft,J4=new k(0,0,0),Q4=new k(1,1,1),uo=new k,Zd=new k,Wi=new k,lT=new ft,uT=new ci;class mh{constructor(e=0,t=0,i=0,r=mh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],f=r[5],h=r[9],d=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(pn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(pn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-pn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-pn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return lT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(lT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return uT.setFromEuler(this),this.setFromQuaternion(uT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}mh.DEFAULT_ORDER="XYZ";class Ga{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ek=0;const cT=new k,Il=new ci,Es=new ft,Kd=new k,Pc=new k,tk=new k,nk=new ci,fT=new k(1,0,0),hT=new k(0,1,0),dT=new k(0,0,1),ik={type:"added"},rk={type:"removed"};class kt extends ps{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ek++}),this.uuid=Ki(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kt.DEFAULT_UP.clone();const e=new k,t=new mh,i=new ci,r=new k(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ft},normalMatrix:{value:new Et}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=kt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ga,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Il.setFromAxisAngle(e,t),this.quaternion.multiply(Il),this}rotateOnWorldAxis(e,t){return Il.setFromAxisAngle(e,t),this.quaternion.premultiply(Il),this}rotateX(e){return this.rotateOnAxis(fT,e)}rotateY(e){return this.rotateOnAxis(hT,e)}rotateZ(e){return this.rotateOnAxis(dT,e)}translateOnAxis(e,t){return cT.copy(e).applyQuaternion(this.quaternion),this.position.add(cT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fT,e)}translateY(e){return this.translateOnAxis(hT,e)}translateZ(e){return this.translateOnAxis(dT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Es.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Kd.copy(e):Kd.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Pc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Es.lookAt(Pc,Kd,this.up):Es.lookAt(Kd,Pc,this.up),this.quaternion.setFromRotationMatrix(Es),r&&(Es.extractRotation(r.matrixWorld),Il.setFromRotationMatrix(Es),this.quaternion.premultiply(Il.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ik)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(rk)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Es.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Es.multiply(e.parent.matrixWorld)),e.applyMatrix4(Es),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pc,e,tk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pc,nk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let f=0,h=l.length;f<h;f++){const d=l[f];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,f=this.material.length;l<f;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),f=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),f.length>0&&(i.textures=f),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const f in a){const h=a[f];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}kt.DEFAULT_UP=new k(0,1,0);kt.DEFAULT_MATRIX_AUTO_UPDATE=!0;kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Rr=new k,Ts=new k,Zv=new k,As=new k,Nl=new k,Dl=new k,pT=new k,Kv=new k,$v=new k,Jv=new k;let $d=!1;class Li{constructor(e=new k,t=new k,i=new k){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Rr.subVectors(e,t),r.cross(Rr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Rr.subVectors(r,t),Ts.subVectors(i,t),Zv.subVectors(e,t);const o=Rr.dot(Rr),a=Rr.dot(Ts),l=Rr.dot(Zv),f=Ts.dot(Ts),h=Ts.dot(Zv),d=o*f-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(f*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,As)===null?!1:As.x>=0&&As.y>=0&&As.x+As.y<=1}static getUV(e,t,i,r,s,o,a,l){return $d===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),$d=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,As)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,As.x),l.addScaledVector(o,As.y),l.addScaledVector(a,As.z),l)}static isFrontFacing(e,t,i,r){return Rr.subVectors(i,t),Ts.subVectors(e,t),Rr.cross(Ts).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Rr.subVectors(this.c,this.b),Ts.subVectors(this.a,this.b),Rr.cross(Ts).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Li.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Li.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return $d===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),$d=!0),Li.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Li.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Li.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Li.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Nl.subVectors(r,i),Dl.subVectors(s,i),Kv.subVectors(e,i);const l=Nl.dot(Kv),f=Dl.dot(Kv);if(l<=0&&f<=0)return t.copy(i);$v.subVectors(e,r);const h=Nl.dot($v),d=Dl.dot($v);if(h>=0&&d<=h)return t.copy(r);const p=l*d-h*f;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(Nl,o);Jv.subVectors(e,s);const m=Nl.dot(Jv),y=Dl.dot(Jv);if(y>=0&&m<=y)return t.copy(s);const w=m*f-l*y;if(w<=0&&f>=0&&y<=0)return a=f/(f-y),t.copy(i).addScaledVector(Dl,a);const x=h*y-m*d;if(x<=0&&d-h>=0&&m-y>=0)return pT.subVectors(s,r),a=(d-h)/(d-h+(m-y)),t.copy(r).addScaledVector(pT,a);const v=1/(x+w+p);return o=w*v,a=p*v,t.copy(i).addScaledVector(Nl,o).addScaledVector(Dl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const XR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},co={h:0,s:0,l:0},Jd={h:0,s:0,l:0};function Qv(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class He{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Rn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ft.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ft.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ft.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ft.workingColorSpace){if(e=oS(e,1),t=pn(t,0,1),i=pn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Qv(o,s,e+1/3),this.g=Qv(o,s,e),this.b=Qv(o,s,e-1/3)}return Ft.toWorkingColorSpace(this,r),this}setStyle(e,t=Rn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Rn){const i=XR[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bu(e.r),this.g=bu(e.g),this.b=bu(e.b),this}copyLinearToSRGB(e){return this.r=Vv(e.r),this.g=Vv(e.g),this.b=Vv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Rn){return Ft.fromWorkingColorSpace(si.copy(this),e),Math.round(pn(si.r*255,0,255))*65536+Math.round(pn(si.g*255,0,255))*256+Math.round(pn(si.b*255,0,255))}getHexString(e=Rn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ft.workingColorSpace){Ft.fromWorkingColorSpace(si.copy(this),t);const i=si.r,r=si.g,s=si.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,f;const h=(a+o)/2;if(a===o)l=0,f=0;else{const d=o-a;switch(f=h<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=f,e.l=h,e}getRGB(e,t=Ft.workingColorSpace){return Ft.fromWorkingColorSpace(si.copy(this),t),e.r=si.r,e.g=si.g,e.b=si.b,e}getStyle(e=Rn){Ft.fromWorkingColorSpace(si.copy(this),e);const t=si.r,i=si.g,r=si.b;return e!==Rn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(co),this.setHSL(co.h+e,co.s+t,co.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(co),e.getHSL(Jd);const i=cf(co.h,Jd.h,t),r=cf(co.s,Jd.s,t),s=cf(co.l,Jd.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const si=new He;He.NAMES=XR;let sk=0;class $n extends ps{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:sk++}),this.uuid=Ki(),this.name="",this.type="Material",this.blending=Ba,this.side=js,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zm,this.blendDst=Bm,this.blendEquation=Mo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new He(0,0,0),this.blendAlpha=0,this.depthFunc=Uf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=x_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ea,this.stencilZFail=Ea,this.stencilZPass=Ea,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ba&&(i.blending=this.blending),this.side!==js&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==zm&&(i.blendSrc=this.blendSrc),this.blendDst!==Bm&&(i.blendDst=this.blendDst),this.blendEquation!==Mo&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Uf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==x_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ea&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ea&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ea&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Zo extends $n{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ls=ok();function ok(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const f=l-127;f<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):f<-14?(i[l]=1024>>-f-14,i[l|256]=1024>>-f-14|32768,r[l]=-f-1,r[l|256]=-f-1):f<=15?(i[l]=f+15<<10,i[l|256]=f+15<<10|32768,r[l]=13,r[l|256]=13):f<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let f=l<<13,h=0;for(;!(f&8388608);)f<<=1,h-=8388608;f&=-8388609,h+=947912704,s[l]=f|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Pi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=pn(n,-65504,65504),Ls.floatView[0]=n;const e=Ls.uint32View[0],t=e>>23&511;return Ls.baseTable[t]+((e&8388607)>>Ls.shiftTable[t])}function Kc(n){const e=n>>10;return Ls.uint32View[0]=Ls.mantissaTable[Ls.offsetTable[e]+(n&1023)]+Ls.exponentTable[e],Ls.floatView[0]}const ak={toHalfFloat:Pi,fromHalfFloat:Kc},Tn=new k,Qd=new me;class Vt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Yf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=kr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Qd.fromBufferAttribute(this,t),Qd.applyMatrix3(e),this.setXY(t,Qd.x,Qd.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Tn.fromBufferAttribute(this,t),Tn.applyMatrix3(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Tn.fromBufferAttribute(this,t),Tn.applyMatrix4(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Tn.fromBufferAttribute(this,t),Tn.applyNormalMatrix(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Tn.fromBufferAttribute(this,t),Tn.transformDirection(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ii(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ii(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ii(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ii(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ii(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Yf&&(e.usage=this.usage),e}}class lk extends Vt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class uk extends Vt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class ck extends Vt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class fk extends Vt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class uS extends Vt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class hk extends Vt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class cS extends Vt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class dk extends Vt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Kc(this.array[e*this.itemSize]);return this.normalized&&(t=Ii(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=Pi(t),this}getY(e){let t=Kc(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ii(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=Pi(t),this}getZ(e){let t=Kc(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ii(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=Pi(t),this}getW(e){let t=Kc(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ii(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=Pi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=Pi(t),this.array[e+1]=Pi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=Pi(t),this.array[e+1]=Pi(i),this.array[e+2]=Pi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=Pi(t),this.array[e+1]=Pi(i),this.array[e+2]=Pi(r),this.array[e+3]=Pi(s),this}}class Ke extends Vt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class pk extends Vt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let mk=0;const hr=new ft,ey=new kt,Ol=new k,ji=new Mi,Rc=new Mi,Bn=new k;class Mt extends ps{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:mk++}),this.uuid=Ki(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(GR(e)?cS:uS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Et().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hr.makeRotationFromQuaternion(e),this.applyMatrix4(hr),this}rotateX(e){return hr.makeRotationX(e),this.applyMatrix4(hr),this}rotateY(e){return hr.makeRotationY(e),this.applyMatrix4(hr),this}rotateZ(e){return hr.makeRotationZ(e),this.applyMatrix4(hr),this}translate(e,t,i){return hr.makeTranslation(e,t,i),this.applyMatrix4(hr),this}scale(e,t,i){return hr.makeScale(e,t,i),this.applyMatrix4(hr),this}lookAt(e){return ey.lookAt(e),ey.updateMatrix(),this.applyMatrix4(ey.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ol).negate(),this.translate(Ol.x,Ol.y,Ol.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ke(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ji.setFromBufferAttribute(s),this.morphTargetsRelative?(Bn.addVectors(this.boundingBox.min,ji.min),this.boundingBox.expandByPoint(Bn),Bn.addVectors(this.boundingBox.max,ji.max),this.boundingBox.expandByPoint(Bn)):(this.boundingBox.expandByPoint(ji.min),this.boundingBox.expandByPoint(ji.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new k,1/0);return}if(e){const i=this.boundingSphere.center;if(ji.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Rc.setFromBufferAttribute(a),this.morphTargetsRelative?(Bn.addVectors(ji.min,Rc.min),ji.expandByPoint(Bn),Bn.addVectors(ji.max,Rc.max),ji.expandByPoint(Bn)):(ji.expandByPoint(Rc.min),ji.expandByPoint(Rc.max))}ji.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Bn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Bn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let f=0,h=a.count;f<h;f++)Bn.fromBufferAttribute(a,f),l&&(Ol.fromBufferAttribute(e,f),Bn.add(Ol)),r=Math.max(r,i.distanceToSquared(Bn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Vt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,f=[],h=[];for(let R=0;R<a;R++)f[R]=new k,h[R]=new k;const d=new k,p=new k,m=new k,y=new me,w=new me,x=new me,v=new k,S=new k;function M(R,z,Z){d.fromArray(r,R*3),p.fromArray(r,z*3),m.fromArray(r,Z*3),y.fromArray(o,R*2),w.fromArray(o,z*2),x.fromArray(o,Z*2),p.sub(d),m.sub(d),w.sub(y),x.sub(y);const oe=1/(w.x*x.y-x.x*w.y);isFinite(oe)&&(v.copy(p).multiplyScalar(x.y).addScaledVector(m,-w.y).multiplyScalar(oe),S.copy(m).multiplyScalar(w.x).addScaledVector(p,-x.x).multiplyScalar(oe),f[R].add(v),f[z].add(v),f[Z].add(v),h[R].add(S),h[z].add(S),h[Z].add(S))}let T=this.groups;T.length===0&&(T=[{start:0,count:i.length}]);for(let R=0,z=T.length;R<z;++R){const Z=T[R],oe=Z.start,H=Z.count;for(let K=oe,$=oe+H;K<$;K+=3)M(i[K+0],i[K+1],i[K+2])}const P=new k,b=new k,L=new k,D=new k;function C(R){L.fromArray(s,R*3),D.copy(L);const z=f[R];P.copy(z),P.sub(L.multiplyScalar(L.dot(z))).normalize(),b.crossVectors(D,z);const oe=b.dot(h[R])<0?-1:1;l[R*4]=P.x,l[R*4+1]=P.y,l[R*4+2]=P.z,l[R*4+3]=oe}for(let R=0,z=T.length;R<z;++R){const Z=T[R],oe=Z.start,H=Z.count;for(let K=oe,$=oe+H;K<$;K+=3)C(i[K+0]),C(i[K+1]),C(i[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Vt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new k,s=new k,o=new k,a=new k,l=new k,f=new k,h=new k,d=new k;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),w=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,x),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,w),f.fromBufferAttribute(i,x),a.add(h),l.add(h),f.add(h),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(w,l.x,l.y,l.z),i.setXYZ(x,f.x,f.y,f.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Bn.fromBufferAttribute(e,t),Bn.normalize(),e.setXYZ(t,Bn.x,Bn.y,Bn.z)}toNonIndexed(){function e(a,l){const f=a.array,h=a.itemSize,d=a.normalized,p=new f.constructor(l.length*h);let m=0,y=0;for(let w=0,x=l.length;w<x;w++){a.isInterleavedBufferAttribute?m=l[w]*a.data.stride+a.offset:m=l[w]*h;for(let v=0;v<h;v++)p[y++]=f[m++]}return new Vt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],f=e(l,i);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const l=[],f=s[a];for(let h=0,d=f.length;h<d;h++){const p=f[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const f=i[l];e.data.attributes[l]=f.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],h=[];for(let d=0,p=f.length;d<p;d++){const m=f[d];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const h=r[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],d=s[f];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const d=o[f];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const mT=new ft,ca=new il,ep=new fi,gT=new k,Ul=new k,kl=new k,Fl=new k,ty=new k,tp=new k,np=new me,ip=new me,rp=new me,vT=new k,yT=new k,xT=new k,sp=new k,op=new k;class In extends kt{constructor(e=new Mt,t=new Zo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){tp.set(0,0,0);for(let l=0,f=s.length;l<f;l++){const h=a[l],d=s[l];h!==0&&(ty.fromBufferAttribute(d,e),o?tp.addScaledVector(ty,h):tp.addScaledVector(ty.sub(t),h))}t.add(tp)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),ep.copy(i.boundingSphere),ep.applyMatrix4(s),ca.copy(e.ray).recast(e.near),!(ep.containsPoint(ca.origin)===!1&&(ca.intersectSphere(ep,gT)===null||ca.origin.distanceToSquared(gT)>(e.far-e.near)**2))&&(mT.copy(s).invert(),ca.copy(e.ray).applyMatrix4(mT),!(i.boundingBox!==null&&ca.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ca)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,f=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,w=p.length;y<w;y++){const x=p[y],v=o[x.materialIndex],S=Math.max(x.start,m.start),M=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let T=S,P=M;T<P;T+=3){const b=a.getX(T),L=a.getX(T+1),D=a.getX(T+2);r=ap(this,v,e,i,f,h,d,b,L,D),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),w=Math.min(a.count,m.start+m.count);for(let x=y,v=w;x<v;x+=3){const S=a.getX(x),M=a.getX(x+1),T=a.getX(x+2);r=ap(this,o,e,i,f,h,d,S,M,T),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,w=p.length;y<w;y++){const x=p[y],v=o[x.materialIndex],S=Math.max(x.start,m.start),M=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let T=S,P=M;T<P;T+=3){const b=T,L=T+1,D=T+2;r=ap(this,v,e,i,f,h,d,b,L,D),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),w=Math.min(l.count,m.start+m.count);for(let x=y,v=w;x<v;x+=3){const S=x,M=x+1,T=x+2;r=ap(this,o,e,i,f,h,d,S,M,T),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function gk(n,e,t,i,r,s,o,a){let l;if(e.side===Si?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===js,a),l===null)return null;op.copy(a),op.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(op);return f<t.near||f>t.far?null:{distance:f,point:op.clone(),object:n}}function ap(n,e,t,i,r,s,o,a,l,f){n.getVertexPosition(a,Ul),n.getVertexPosition(l,kl),n.getVertexPosition(f,Fl);const h=gk(n,e,t,i,Ul,kl,Fl,sp);if(h){r&&(np.fromBufferAttribute(r,a),ip.fromBufferAttribute(r,l),rp.fromBufferAttribute(r,f),h.uv=Li.getInterpolation(sp,Ul,kl,Fl,np,ip,rp,new me)),s&&(np.fromBufferAttribute(s,a),ip.fromBufferAttribute(s,l),rp.fromBufferAttribute(s,f),h.uv1=Li.getInterpolation(sp,Ul,kl,Fl,np,ip,rp,new me),h.uv2=h.uv1),o&&(vT.fromBufferAttribute(o,a),yT.fromBufferAttribute(o,l),xT.fromBufferAttribute(o,f),h.normal=Li.getInterpolation(sp,Ul,kl,Fl,vT,yT,xT,new k),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:f,normal:new k,materialIndex:0};Li.getNormal(Ul,kl,Fl,d.normal),h.face=d}return h}class rl extends Mt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],f=[],h=[],d=[];let p=0,m=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ke(f,3)),this.setAttribute("normal",new Ke(h,3)),this.setAttribute("uv",new Ke(d,2));function y(w,x,v,S,M,T,P,b,L,D,C){const R=T/L,z=P/D,Z=T/2,oe=P/2,H=b/2,K=L+1,$=D+1;let se=0,N=0;const B=new k;for(let V=0;V<$;V++){const Y=V*z-oe;for(let J=0;J<K;J++){const Q=J*R-Z;B[w]=Q*S,B[x]=Y*M,B[v]=H,f.push(B.x,B.y,B.z),B[w]=0,B[x]=0,B[v]=b>0?1:-1,h.push(B.x,B.y,B.z),d.push(J/L),d.push(1-V/D),se+=1}}for(let V=0;V<D;V++)for(let Y=0;Y<L;Y++){const J=p+Y+K*V,Q=p+Y+K*(V+1),le=p+(Y+1)+K*(V+1),ge=p+(Y+1)+K*V;l.push(J,Q,ge),l.push(Q,le,ge),N+=6}a.addGroup(m,N,C),m+=N,p+=se}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function gi(n){const e={};for(let t=0;t<n.length;t++){const i=zu(n[t]);for(const r in i)e[r]=i[r]}return e}function vk(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function YR(n){return n.getRenderTarget()===null?n.outputColorSpace:Ft.workingColorSpace}const qR={clone:zu,merge:gi};var yk=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xk=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ds extends $n{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yk,this.fragmentShader=xk,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zu(e.uniforms),this.uniformsGroups=vk(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class gh extends kt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=Fr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class tn extends gh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Fu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ha*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fu*2*Math.atan(Math.tan(Ha*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ha*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/f,r*=o.width/l,i*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const zl=-90,Bl=1;class fS extends kt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new tn(zl,Bl,e,t);r.layers=this.layers,this.add(r);const s=new tn(zl,Bl,e,t);s.layers=this.layers,this.add(s);const o=new tn(zl,Bl,e,t);o.layers=this.layers,this.add(o);const a=new tn(zl,Bl,e,t);a.layers=this.layers,this.add(a);const l=new tn(zl,Bl,e,t);l.layers=this.layers,this.add(l);const f=new tn(zl,Bl,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const f of t)this.remove(f);if(e===Fr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ku)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,f,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(d,p,m),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class vh extends mn{constructor(e,t,i,r,s,o,a,l,f,h){e=e!==void 0?e:[],t=t!==void 0?t:Xs,super(e,t,i,r,s,o,a,l,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class hS extends Wr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(ff("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Oo?Rn:Yi),this.texture=new vh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Sn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new rl(5,5,5),s=new ds({name:"CubemapFromEquirect",uniforms:zu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Si,blending:Fs});s.uniforms.tEquirect.value=t;const o=new In(r,s),a=t.minFilter;return t.minFilter===Bo&&(t.minFilter=Sn),new fS(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const ny=new k,_k=new k,Sk=new Et;class Rs{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ny.subVectors(i,t).cross(_k.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(ny),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Sk.getNormalMatrix(e),r=this.coplanarPoint(ny).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fa=new fi,lp=new k;class yh{constructor(e=new Rs,t=new Rs,i=new Rs,r=new Rs,s=new Rs,o=new Rs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Fr){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],f=r[4],h=r[5],d=r[6],p=r[7],m=r[8],y=r[9],w=r[10],x=r[11],v=r[12],S=r[13],M=r[14],T=r[15];if(i[0].setComponents(l-s,p-f,x-m,T-v).normalize(),i[1].setComponents(l+s,p+f,x+m,T+v).normalize(),i[2].setComponents(l+o,p+h,x+y,T+S).normalize(),i[3].setComponents(l-o,p-h,x-y,T-S).normalize(),i[4].setComponents(l-a,p-d,x-w,T-M).normalize(),t===Fr)i[5].setComponents(l+a,p+d,x+w,T+M).normalize();else if(t===ku)i[5].setComponents(a,d,w,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),fa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fa)}intersectsSprite(e){return fa.center.set(0,0,0),fa.radius=.7071067811865476,fa.applyMatrix4(e.matrixWorld),this.intersectsSphere(fa)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(lp.x=r.normal.x>0?e.max.x:e.min.x,lp.y=r.normal.y>0?e.max.y:e.min.y,lp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(lp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ZR(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Mk(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,h){const d=f.array,p=f.usage,m=d.byteLength,y=n.createBuffer();n.bindBuffer(h,y),n.bufferData(h,d,p),f.onUploadCallback();let w;if(d instanceof Float32Array)w=n.FLOAT;else if(d instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)w=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)w=n.SHORT;else if(d instanceof Uint32Array)w=n.UNSIGNED_INT;else if(d instanceof Int32Array)w=n.INT;else if(d instanceof Int8Array)w=n.BYTE;else if(d instanceof Uint8Array)w=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)w=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:y,type:w,bytesPerElement:d.BYTES_PER_ELEMENT,version:f.version,size:m}}function s(f,h,d){const p=h.array,m=h._updateRange,y=h.updateRanges;if(n.bindBuffer(d,f),m.count===-1&&y.length===0&&n.bufferSubData(d,0,p),y.length!==0){for(let w=0,x=y.length;w<x;w++){const v=y[w];t?n.bufferSubData(d,v.start*p.BYTES_PER_ELEMENT,p,v.start,v.count):n.bufferSubData(d,v.start*p.BYTES_PER_ELEMENT,p.subarray(v.start,v.start+v.count))}h.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const h=i.get(f);h&&(n.deleteBuffer(h.buffer),i.delete(f))}function l(f,h){if(f.isGLBufferAttribute){const p=i.get(f);(!p||p.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const d=i.get(f);if(d===void 0)i.set(f,r(f,h));else if(d.version<f.version){if(d.size!==f.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,f,h),d.version=f.version}}return{get:o,remove:a,update:l}}class xh extends Mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),f=a+1,h=l+1,d=e/a,p=t/l,m=[],y=[],w=[],x=[];for(let v=0;v<h;v++){const S=v*p-o;for(let M=0;M<f;M++){const T=M*d-s;y.push(T,-S,0),w.push(0,0,1),x.push(M/a),x.push(1-v/l)}}for(let v=0;v<l;v++)for(let S=0;S<a;S++){const M=S+f*v,T=S+f*(v+1),P=S+1+f*(v+1),b=S+1+f*v;m.push(M,T,b),m.push(T,P,b)}this.setIndex(m),this.setAttribute("position",new Ke(y,3)),this.setAttribute("normal",new Ke(w,3)),this.setAttribute("uv",new Ke(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xh(e.width,e.height,e.widthSegments,e.heightSegments)}}var wk=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Ek=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Tk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Ak=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bk=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Ck=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Pk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Rk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Lk=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ik=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Nk=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Dk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ok=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Uk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,kk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Fk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,zk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Bk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Vk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Hk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Gk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Wk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,jk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Xk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Yk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qk=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Zk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Kk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,$k=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Jk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Qk="gl_FragColor = linearToOutputTexel( gl_FragColor );",eF=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,tF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nF=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,iF=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rF=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,oF=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aF=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lF=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uF=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,cF=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fF=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,hF=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,dF=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,mF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,vF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,yF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_F=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,SF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,MF=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wF=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,EF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,TF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,AF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,PF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,RF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,LF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,IF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,NF=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,OF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,UF=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,kF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,FF=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,zF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,BF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,VF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,XF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,YF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ZF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,KF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$F=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,JF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,QF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ez=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,sz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,az=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,cz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,yz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,xz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_z=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Sz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Mz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,wz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ez=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Tz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Az=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Cz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Pz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Rz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Lz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Iz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Nz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Dz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Oz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Uz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,kz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Vz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Gz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Wz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Yz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$z=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Jz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_t={alphahash_fragment:wk,alphahash_pars_fragment:Ek,alphamap_fragment:Tk,alphamap_pars_fragment:Ak,alphatest_fragment:bk,alphatest_pars_fragment:Ck,aomap_fragment:Pk,aomap_pars_fragment:Rk,batching_pars_vertex:Lk,batching_vertex:Ik,begin_vertex:Nk,beginnormal_vertex:Dk,bsdfs:Ok,iridescence_fragment:Uk,bumpmap_pars_fragment:kk,clipping_planes_fragment:Fk,clipping_planes_pars_fragment:zk,clipping_planes_pars_vertex:Bk,clipping_planes_vertex:Vk,color_fragment:Hk,color_pars_fragment:Gk,color_pars_vertex:Wk,color_vertex:jk,common:Xk,cube_uv_reflection_fragment:Yk,defaultnormal_vertex:qk,displacementmap_pars_vertex:Zk,displacementmap_vertex:Kk,emissivemap_fragment:$k,emissivemap_pars_fragment:Jk,colorspace_fragment:Qk,colorspace_pars_fragment:eF,envmap_fragment:tF,envmap_common_pars_fragment:nF,envmap_pars_fragment:iF,envmap_pars_vertex:rF,envmap_physical_pars_fragment:gF,envmap_vertex:sF,fog_vertex:oF,fog_pars_vertex:aF,fog_fragment:lF,fog_pars_fragment:uF,gradientmap_pars_fragment:cF,lightmap_fragment:fF,lightmap_pars_fragment:hF,lights_lambert_fragment:dF,lights_lambert_pars_fragment:pF,lights_pars_begin:mF,lights_toon_fragment:vF,lights_toon_pars_fragment:yF,lights_phong_fragment:xF,lights_phong_pars_fragment:_F,lights_physical_fragment:SF,lights_physical_pars_fragment:MF,lights_fragment_begin:wF,lights_fragment_maps:EF,lights_fragment_end:TF,logdepthbuf_fragment:AF,logdepthbuf_pars_fragment:bF,logdepthbuf_pars_vertex:CF,logdepthbuf_vertex:PF,map_fragment:RF,map_pars_fragment:LF,map_particle_fragment:IF,map_particle_pars_fragment:NF,metalnessmap_fragment:DF,metalnessmap_pars_fragment:OF,morphcolor_vertex:UF,morphnormal_vertex:kF,morphtarget_pars_vertex:FF,morphtarget_vertex:zF,normal_fragment_begin:BF,normal_fragment_maps:VF,normal_pars_fragment:HF,normal_pars_vertex:GF,normal_vertex:WF,normalmap_pars_fragment:jF,clearcoat_normal_fragment_begin:XF,clearcoat_normal_fragment_maps:YF,clearcoat_pars_fragment:qF,iridescence_pars_fragment:ZF,opaque_fragment:KF,packing:$F,premultiplied_alpha_fragment:JF,project_vertex:QF,dithering_fragment:ez,dithering_pars_fragment:tz,roughnessmap_fragment:nz,roughnessmap_pars_fragment:iz,shadowmap_pars_fragment:rz,shadowmap_pars_vertex:sz,shadowmap_vertex:oz,shadowmask_pars_fragment:az,skinbase_vertex:lz,skinning_pars_vertex:uz,skinning_vertex:cz,skinnormal_vertex:fz,specularmap_fragment:hz,specularmap_pars_fragment:dz,tonemapping_fragment:pz,tonemapping_pars_fragment:mz,transmission_fragment:gz,transmission_pars_fragment:vz,uv_pars_fragment:yz,uv_pars_vertex:xz,uv_vertex:_z,worldpos_vertex:Sz,background_vert:Mz,background_frag:wz,backgroundCube_vert:Ez,backgroundCube_frag:Tz,cube_vert:Az,cube_frag:bz,depth_vert:Cz,depth_frag:Pz,distanceRGBA_vert:Rz,distanceRGBA_frag:Lz,equirect_vert:Iz,equirect_frag:Nz,linedashed_vert:Dz,linedashed_frag:Oz,meshbasic_vert:Uz,meshbasic_frag:kz,meshlambert_vert:Fz,meshlambert_frag:zz,meshmatcap_vert:Bz,meshmatcap_frag:Vz,meshnormal_vert:Hz,meshnormal_frag:Gz,meshphong_vert:Wz,meshphong_frag:jz,meshphysical_vert:Xz,meshphysical_frag:Yz,meshtoon_vert:qz,meshtoon_frag:Zz,points_vert:Kz,points_frag:$z,shadow_vert:Jz,shadow_frag:Qz,sprite_vert:eB,sprite_frag:tB},Ne={common:{diffuse:{value:new He(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Et}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Et}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Et}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Et},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Et},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Et},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Et}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Et}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Et}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new He(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new He(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0},uvTransform:{value:new Et}},sprite:{diffuse:{value:new He(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}}},Or={basic:{uniforms:gi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:_t.meshbasic_vert,fragmentShader:_t.meshbasic_frag},lambert:{uniforms:gi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new He(0)}}]),vertexShader:_t.meshlambert_vert,fragmentShader:_t.meshlambert_frag},phong:{uniforms:gi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:_t.meshphong_vert,fragmentShader:_t.meshphong_frag},standard:{uniforms:gi([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new He(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag},toon:{uniforms:gi([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new He(0)}}]),vertexShader:_t.meshtoon_vert,fragmentShader:_t.meshtoon_frag},matcap:{uniforms:gi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:_t.meshmatcap_vert,fragmentShader:_t.meshmatcap_frag},points:{uniforms:gi([Ne.points,Ne.fog]),vertexShader:_t.points_vert,fragmentShader:_t.points_frag},dashed:{uniforms:gi([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_t.linedashed_vert,fragmentShader:_t.linedashed_frag},depth:{uniforms:gi([Ne.common,Ne.displacementmap]),vertexShader:_t.depth_vert,fragmentShader:_t.depth_frag},normal:{uniforms:gi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:_t.meshnormal_vert,fragmentShader:_t.meshnormal_frag},sprite:{uniforms:gi([Ne.sprite,Ne.fog]),vertexShader:_t.sprite_vert,fragmentShader:_t.sprite_frag},background:{uniforms:{uvTransform:{value:new Et},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:_t.background_vert,fragmentShader:_t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:_t.backgroundCube_vert,fragmentShader:_t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_t.cube_vert,fragmentShader:_t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_t.equirect_vert,fragmentShader:_t.equirect_frag},distanceRGBA:{uniforms:gi([Ne.common,Ne.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_t.distanceRGBA_vert,fragmentShader:_t.distanceRGBA_frag},shadow:{uniforms:gi([Ne.lights,Ne.fog,{color:{value:new He(0)},opacity:{value:1}}]),vertexShader:_t.shadow_vert,fragmentShader:_t.shadow_frag}};Or.physical={uniforms:gi([Or.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Et},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Et},clearcoatNormalScale:{value:new me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Et},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Et},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Et},sheen:{value:0},sheenColor:{value:new He(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Et},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Et},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Et},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Et},attenuationDistance:{value:0},attenuationColor:{value:new He(0)},specularColor:{value:new He(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Et},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Et},anisotropyVector:{value:new me},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Et}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag};const up={r:0,b:0,g:0};function nB(n,e,t,i,r,s,o){const a=new He(0);let l=s===!0?0:1,f,h,d=null,p=0,m=null;function y(x,v){let S=!1,M=v.isScene===!0?v.background:null;M&&M.isTexture&&(M=(v.backgroundBlurriness>0?t:e).get(M)),M===null?w(a,l):M&&M.isColor&&(w(M,1),S=!0);const T=n.xr.getEnvironmentBlendMode();T==="additive"?i.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),M&&(M.isCubeTexture||M.mapping===qu)?(h===void 0&&(h=new In(new rl(1,1,1),new ds({name:"BackgroundCubeMaterial",uniforms:zu(Or.backgroundCube.uniforms),vertexShader:Or.backgroundCube.vertexShader,fragmentShader:Or.backgroundCube.fragmentShader,side:Si,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(P,b,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=M,h.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=Ft.getTransfer(M.colorSpace)!==Wt,(d!==M||p!==M.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=M,p=M.version,m=n.toneMapping),h.layers.enableAll(),x.unshift(h,h.geometry,h.material,0,0,null)):M&&M.isTexture&&(f===void 0&&(f=new In(new xh(2,2),new ds({name:"BackgroundMaterial",uniforms:zu(Or.background.uniforms),vertexShader:Or.background.vertexShader,fragmentShader:Or.background.fragmentShader,side:js,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=M,f.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,f.material.toneMapped=Ft.getTransfer(M.colorSpace)!==Wt,M.matrixAutoUpdate===!0&&M.updateMatrix(),f.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||p!==M.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,d=M,p=M.version,m=n.toneMapping),f.layers.enableAll(),x.unshift(f,f.geometry,f.material,0,0,null))}function w(x,v){x.getRGB(up,YR(n)),i.buffers.color.setClear(up.r,up.g,up.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(x,v=1){a.set(x),l=v,w(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,w(a,l)},render:y}}function iB(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=x(null);let f=l,h=!1;function d(H,K,$,se,N){let B=!1;if(o){const V=w(se,$,K);f!==V&&(f=V,m(f.object)),B=v(H,se,$,N),B&&S(H,se,$,N)}else{const V=K.wireframe===!0;(f.geometry!==se.id||f.program!==$.id||f.wireframe!==V)&&(f.geometry=se.id,f.program=$.id,f.wireframe=V,B=!0)}N!==null&&t.update(N,n.ELEMENT_ARRAY_BUFFER),(B||h)&&(h=!1,D(H,K,$,se),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(N).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(H){return i.isWebGL2?n.bindVertexArray(H):s.bindVertexArrayOES(H)}function y(H){return i.isWebGL2?n.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function w(H,K,$){const se=$.wireframe===!0;let N=a[H.id];N===void 0&&(N={},a[H.id]=N);let B=N[K.id];B===void 0&&(B={},N[K.id]=B);let V=B[se];return V===void 0&&(V=x(p()),B[se]=V),V}function x(H){const K=[],$=[],se=[];for(let N=0;N<r;N++)K[N]=0,$[N]=0,se[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:$,attributeDivisors:se,object:H,attributes:{},index:null}}function v(H,K,$,se){const N=f.attributes,B=K.attributes;let V=0;const Y=$.getAttributes();for(const J in Y)if(Y[J].location>=0){const le=N[J];let ge=B[J];if(ge===void 0&&(J==="instanceMatrix"&&H.instanceMatrix&&(ge=H.instanceMatrix),J==="instanceColor"&&H.instanceColor&&(ge=H.instanceColor)),le===void 0||le.attribute!==ge||ge&&le.data!==ge.data)return!0;V++}return f.attributesNum!==V||f.index!==se}function S(H,K,$,se){const N={},B=K.attributes;let V=0;const Y=$.getAttributes();for(const J in Y)if(Y[J].location>=0){let le=B[J];le===void 0&&(J==="instanceMatrix"&&H.instanceMatrix&&(le=H.instanceMatrix),J==="instanceColor"&&H.instanceColor&&(le=H.instanceColor));const ge={};ge.attribute=le,le&&le.data&&(ge.data=le.data),N[J]=ge,V++}f.attributes=N,f.attributesNum=V,f.index=se}function M(){const H=f.newAttributes;for(let K=0,$=H.length;K<$;K++)H[K]=0}function T(H){P(H,0)}function P(H,K){const $=f.newAttributes,se=f.enabledAttributes,N=f.attributeDivisors;$[H]=1,se[H]===0&&(n.enableVertexAttribArray(H),se[H]=1),N[H]!==K&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,K),N[H]=K)}function b(){const H=f.newAttributes,K=f.enabledAttributes;for(let $=0,se=K.length;$<se;$++)K[$]!==H[$]&&(n.disableVertexAttribArray($),K[$]=0)}function L(H,K,$,se,N,B,V){V===!0?n.vertexAttribIPointer(H,K,$,N,B):n.vertexAttribPointer(H,K,$,se,N,B)}function D(H,K,$,se){if(i.isWebGL2===!1&&(H.isInstancedMesh||se.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;M();const N=se.attributes,B=$.getAttributes(),V=K.defaultAttributeValues;for(const Y in B){const J=B[Y];if(J.location>=0){let Q=N[Y];if(Q===void 0&&(Y==="instanceMatrix"&&H.instanceMatrix&&(Q=H.instanceMatrix),Y==="instanceColor"&&H.instanceColor&&(Q=H.instanceColor)),Q!==void 0){const le=Q.normalized,ge=Q.itemSize,Ee=t.get(Q);if(Ee===void 0)continue;const be=Ee.buffer,$e=Ee.type,nt=Ee.bytesPerElement,Le=i.isWebGL2===!0&&($e===n.INT||$e===n.UNSIGNED_INT||Q.gpuType===K1);if(Q.isInterleavedBufferAttribute){const Ce=Q.data,G=Ce.stride,xe=Q.offset;if(Ce.isInstancedInterleavedBuffer){for(let de=0;de<J.locationSize;de++)P(J.location+de,Ce.meshPerAttribute);H.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=Ce.meshPerAttribute*Ce.count)}else for(let de=0;de<J.locationSize;de++)T(J.location+de);n.bindBuffer(n.ARRAY_BUFFER,be);for(let de=0;de<J.locationSize;de++)L(J.location+de,ge/J.locationSize,$e,le,G*nt,(xe+ge/J.locationSize*de)*nt,Le)}else{if(Q.isInstancedBufferAttribute){for(let Ce=0;Ce<J.locationSize;Ce++)P(J.location+Ce,Q.meshPerAttribute);H.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let Ce=0;Ce<J.locationSize;Ce++)T(J.location+Ce);n.bindBuffer(n.ARRAY_BUFFER,be);for(let Ce=0;Ce<J.locationSize;Ce++)L(J.location+Ce,ge/J.locationSize,$e,le,ge*nt,ge/J.locationSize*Ce*nt,Le)}}else if(V!==void 0){const le=V[Y];if(le!==void 0)switch(le.length){case 2:n.vertexAttrib2fv(J.location,le);break;case 3:n.vertexAttrib3fv(J.location,le);break;case 4:n.vertexAttrib4fv(J.location,le);break;default:n.vertexAttrib1fv(J.location,le)}}}}b()}function C(){Z();for(const H in a){const K=a[H];for(const $ in K){const se=K[$];for(const N in se)y(se[N].object),delete se[N];delete K[$]}delete a[H]}}function R(H){if(a[H.id]===void 0)return;const K=a[H.id];for(const $ in K){const se=K[$];for(const N in se)y(se[N].object),delete se[N];delete K[$]}delete a[H.id]}function z(H){for(const K in a){const $=a[K];if($[H.id]===void 0)continue;const se=$[H.id];for(const N in se)y(se[N].object),delete se[N];delete $[H.id]}}function Z(){oe(),h=!0,f!==l&&(f=l,m(f.object))}function oe(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:Z,resetDefaultState:oe,dispose:C,releaseStatesOfGeometry:R,releaseStatesOfProgram:z,initAttributes:M,enableAttribute:T,disableUnusedAttributes:b}}function rB(n,e,t,i){const r=i.isWebGL2;let s;function o(h){s=h}function a(h,d){n.drawArrays(s,h,d),t.update(d,s,1)}function l(h,d,p){if(p===0)return;let m,y;if(r)m=n,y="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[y](s,h,d,p),t.update(d,s,p)}function f(h,d,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<p;y++)this.render(h[y],d[y]);else{m.multiDrawArraysWEBGL(s,h,0,d,0,p);let y=0;for(let w=0;w<p;w++)y+=d[w];t.update(y,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=f}function sB(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const f=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),M=p>0,T=o||e.has("OES_texture_float"),P=M&&T,b=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:y,maxAttributes:w,maxVertexUniforms:x,maxVaryings:v,maxFragmentUniforms:S,vertexTextures:M,floatFragmentTextures:T,floatVertexTextures:P,maxSamples:b}}function oB(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Rs,a=new Et,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const y=d.clippingPlanes,w=d.clipIntersection,x=d.clipShadows,v=n.get(d);if(!r||y===null||y.length===0||s&&!x)s?h(null):f();else{const S=s?0:i,M=S*4;let T=v.clippingState||null;l.value=T,T=h(y,p,M,m);for(let P=0;P!==M;++P)T[P]=t[P];v.clippingState=T,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=S}};function f(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,m,y){const w=d!==null?d.length:0;let x=null;if(w!==0){if(x=l.value,y!==!0||x===null){const v=m+w*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<v)&&(x=new Float32Array(v));for(let M=0,T=m;M!==w;++M,T+=4)o.copy(d[M]).applyMatrix4(S,a),o.normal.toArray(x,T),x[T+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,x}}function aB(n){let e=new WeakMap;function t(o,a){return a===kf?o.mapping=Xs:a===Ff&&(o.mapping=zo),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===kf||a===Ff)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const f=new hS(l.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class zr extends gh{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const fu=4,_T=[.125,.215,.35,.446,.526,.582],Ca=20,iy=new zr,ST=new He;let ry=null,sy=0,oy=0;const Ta=(1+Math.sqrt(5))/2,Vl=1/Ta,MT=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,Ta,Vl),new k(0,Ta,-Vl),new k(Vl,0,Ta),new k(-Vl,0,Ta),new k(Ta,Vl,0),new k(-Ta,Vl,0)];class M_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){ry=this._renderer.getRenderTarget(),sy=this._renderer.getActiveCubeFace(),oy=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ET(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ry,sy,oy),e.scissorTest=!1,cp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Xs||e.mapping===zo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ry=this._renderer.getRenderTarget(),sy=this._renderer.getActiveCubeFace(),oy=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Sn,minFilter:Sn,generateMipmaps:!1,type:Uu,format:xi,colorSpace:hs,depthBuffer:!1},r=wT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=wT(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lB(s)),this._blurMaterial=uB(s,e,t)}return r}_compileMaterial(e){const t=new In(this._lodPlanes[0],e);this._renderer.compile(t,iy)}_sceneToCubeUV(e,t,i,r){const a=new tn(90,1,t,i),l=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(ST),h.toneMapping=ls,h.autoClear=!1;const m=new Zo({name:"PMREM.Background",side:Si,depthWrite:!1,depthTest:!1}),y=new In(new rl,m);let w=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,w=!0):(m.color.copy(ST),w=!0);for(let v=0;v<6;v++){const S=v%3;S===0?(a.up.set(0,l[v],0),a.lookAt(f[v],0,0)):S===1?(a.up.set(0,0,l[v]),a.lookAt(0,f[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,f[v]));const M=this._cubeSize;cp(r,S*M,v>2?M:0,M,M),h.setRenderTarget(r),w&&h.render(y,a),h.render(e,a)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Xs||e.mapping===zo;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=TT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ET());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new In(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;cp(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,iy)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=MT[(r-1)%MT.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new In(this._lodPlanes[r],f),p=f.uniforms,m=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Ca-1),w=s/y,x=isFinite(s)?1+Math.floor(h*w):Ca;x>Ca&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Ca}`);const v=[];let S=0;for(let L=0;L<Ca;++L){const D=L/w,C=Math.exp(-D*D/2);v.push(C),L===0?S+=C:L<x&&(S+=2*C)}for(let L=0;L<v.length;L++)v[L]=v[L]/S;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=v,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=y,p.mipInt.value=M-i;const T=this._sizeLods[r],P=3*T*(r>M-fu?r-M+fu:0),b=4*(this._cubeSize-T);cp(t,P,b,3*T,2*T),l.setRenderTarget(t),l.render(d,iy)}}function lB(n){const e=[],t=[],i=[];let r=n;const s=n-fu+1+_T.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-fu?l=_T[o-n+fu-1]:o===0&&(l=0),i.push(l);const f=1/(a-2),h=-f,d=1+f,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,y=6,w=3,x=2,v=1,S=new Float32Array(w*y*m),M=new Float32Array(x*y*m),T=new Float32Array(v*y*m);for(let b=0;b<m;b++){const L=b%3*2/3-1,D=b>2?0:-1,C=[L,D,0,L+2/3,D,0,L+2/3,D+1,0,L,D,0,L+2/3,D+1,0,L,D+1,0];S.set(C,w*y*b),M.set(p,x*y*b);const R=[b,b,b,b,b,b];T.set(R,v*y*b)}const P=new Mt;P.setAttribute("position",new Vt(S,w)),P.setAttribute("uv",new Vt(M,x)),P.setAttribute("faceIndex",new Vt(T,v)),e.push(P),r>fu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function wT(n,e,t){const i=new Wr(n,e,t);return i.texture.mapping=qu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function cp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function uB(n,e,t){const i=new Float32Array(Ca),r=new k(0,1,0);return new ds({name:"SphericalGaussianBlur",defines:{n:Ca,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:dS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fs,depthTest:!1,depthWrite:!1})}function ET(){return new ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:dS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fs,depthTest:!1,depthWrite:!1})}function TT(){return new ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:dS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fs,depthTest:!1,depthWrite:!1})}function dS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cB(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,f=l===kf||l===Ff,h=l===Xs||l===zo;if(f||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new M_(n)),d=f?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(f&&d&&d.height>0||h&&d&&r(d)){t===null&&(t=new M_(n));const p=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const f=6;for(let h=0;h<f;h++)a[h]!==void 0&&l++;return l===f}function s(a){const l=a.target;l.removeEventListener("dispose",s);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function fB(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function hB(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const w=p.morphAttributes[y];for(let x=0,v=w.length;x<v;x++)e.remove(w[x])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const y in p)e.update(p[y],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const y in m){const w=m[y];for(let x=0,v=w.length;x<v;x++)e.update(w[x],n.ARRAY_BUFFER)}}function f(d){const p=[],m=d.index,y=d.attributes.position;let w=0;if(m!==null){const S=m.array;w=m.version;for(let M=0,T=S.length;M<T;M+=3){const P=S[M+0],b=S[M+1],L=S[M+2];p.push(P,b,b,L,L,P)}}else if(y!==void 0){const S=y.array;w=y.version;for(let M=0,T=S.length/3-1;M<T;M+=3){const P=M+0,b=M+1,L=M+2;p.push(P,b,b,L,L,P)}}else return;const x=new(GR(p)?cS:uS)(p,1);x.version=w;const v=s.get(d);v&&e.remove(v),s.set(d,x)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&f(d)}else f(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function dB(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,l;function f(m){a=m.type,l=m.bytesPerElement}function h(m,y){n.drawElements(s,y,a,m*l),t.update(y,s,1)}function d(m,y,w){if(w===0)return;let x,v;if(r)x=n,v="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[v](s,y,a,m*l,w),t.update(y,s,w)}function p(m,y,w){if(w===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let v=0;v<w;v++)this.render(m[v]/l,y[v]);else{x.multiDrawElementsWEBGL(s,y,0,a,m,0,w);let v=0;for(let S=0;S<w;S++)v+=y[S];t.update(v,s,1)}}this.setMode=o,this.setIndex=f,this.render=h,this.renderInstances=d,this.renderMultiDraw=p}function pB(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function mB(n,e){return n[0]-e[0]}function gB(n,e){return Math.abs(e[1])-Math.abs(n[1])}function vB(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new zt,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function l(f,h,d){const p=f.morphTargetInfluences;if(e.isWebGL2===!0){const y=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,w=y!==void 0?y.length:0;let x=s.get(h);if(x===void 0||x.count!==w){let K=function(){oe.dispose(),s.delete(h),h.removeEventListener("dispose",K)};var m=K;x!==void 0&&x.texture.dispose();const M=h.morphAttributes.position!==void 0,T=h.morphAttributes.normal!==void 0,P=h.morphAttributes.color!==void 0,b=h.morphAttributes.position||[],L=h.morphAttributes.normal||[],D=h.morphAttributes.color||[];let C=0;M===!0&&(C=1),T===!0&&(C=2),P===!0&&(C=3);let R=h.attributes.position.count*C,z=1;R>e.maxTextureSize&&(z=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const Z=new Float32Array(R*z*4*w),oe=new Cg(Z,R,z,w);oe.type=kr,oe.needsUpdate=!0;const H=C*4;for(let $=0;$<w;$++){const se=b[$],N=L[$],B=D[$],V=R*z*4*$;for(let Y=0;Y<se.count;Y++){const J=Y*H;M===!0&&(o.fromBufferAttribute(se,Y),Z[V+J+0]=o.x,Z[V+J+1]=o.y,Z[V+J+2]=o.z,Z[V+J+3]=0),T===!0&&(o.fromBufferAttribute(N,Y),Z[V+J+4]=o.x,Z[V+J+5]=o.y,Z[V+J+6]=o.z,Z[V+J+7]=0),P===!0&&(o.fromBufferAttribute(B,Y),Z[V+J+8]=o.x,Z[V+J+9]=o.y,Z[V+J+10]=o.z,Z[V+J+11]=B.itemSize===4?o.w:1)}}x={count:w,texture:oe,size:new me(R,z)},s.set(h,x),h.addEventListener("dispose",K)}let v=0;for(let M=0;M<p.length;M++)v+=p[M];const S=h.morphTargetsRelative?1:1-v;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const y=p===void 0?0:p.length;let w=i[h.id];if(w===void 0||w.length!==y){w=[];for(let T=0;T<y;T++)w[T]=[T,0];i[h.id]=w}for(let T=0;T<y;T++){const P=w[T];P[0]=T,P[1]=p[T]}w.sort(gB);for(let T=0;T<8;T++)T<y&&w[T][1]?(a[T][0]=w[T][0],a[T][1]=w[T][1]):(a[T][0]=Number.MAX_SAFE_INTEGER,a[T][1]=0);a.sort(mB);const x=h.morphAttributes.position,v=h.morphAttributes.normal;let S=0;for(let T=0;T<8;T++){const P=a[T],b=P[0],L=P[1];b!==Number.MAX_SAFE_INTEGER&&L?(x&&h.getAttribute("morphTarget"+T)!==x[b]&&h.setAttribute("morphTarget"+T,x[b]),v&&h.getAttribute("morphNormal"+T)!==v[b]&&h.setAttribute("morphNormal"+T,v[b]),r[T]=L,S+=L):(x&&h.hasAttribute("morphTarget"+T)===!0&&h.deleteAttribute("morphTarget"+T),v&&h.hasAttribute("morphNormal"+T)===!0&&h.deleteAttribute("morphNormal"+T),r[T]=0)}const M=h.morphTargetsRelative?1:1-S;d.getUniforms().setValue(n,"morphTargetBaseInfluence",M),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function yB(n,e,t,i){let r=new WeakMap;function s(l){const f=i.render.frame,h=l.geometry,d=e.get(l,h);if(r.get(d)!==f&&(e.update(d),r.set(d,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==f&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,f))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==f&&(p.update(),r.set(p,f))}return d}function o(){r=new WeakMap}function a(l){const f=l.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}class pS extends mn{constructor(e,t,i,r,s,o,a,l,f,h){if(h=h!==void 0?h:Do,h!==Do&&h!==Ja)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Do&&(i=Ds),i===void 0&&h===Ja&&(i=No),super(null,r,s,o,a,l,h,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:xn,this.minFilter=l!==void 0?l:xn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const KR=new mn,$R=new pS(1,1);$R.compareFunction=sS;const JR=new Cg,QR=new lS,e3=new vh,AT=[],bT=[],CT=new Float32Array(16),PT=new Float32Array(9),RT=new Float32Array(4);function Zu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=AT[r];if(s===void 0&&(s=new Float32Array(r),AT[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Nn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Dn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Pg(n,e){let t=bT[e];t===void 0&&(t=new Int32Array(e),bT[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function xB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function _B(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Nn(t,e))return;n.uniform2fv(this.addr,e),Dn(t,e)}}function SB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Nn(t,e))return;n.uniform3fv(this.addr,e),Dn(t,e)}}function MB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Nn(t,e))return;n.uniform4fv(this.addr,e),Dn(t,e)}}function wB(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Dn(t,e)}else{if(Nn(t,i))return;RT.set(i),n.uniformMatrix2fv(this.addr,!1,RT),Dn(t,i)}}function EB(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Dn(t,e)}else{if(Nn(t,i))return;PT.set(i),n.uniformMatrix3fv(this.addr,!1,PT),Dn(t,i)}}function TB(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Dn(t,e)}else{if(Nn(t,i))return;CT.set(i),n.uniformMatrix4fv(this.addr,!1,CT),Dn(t,i)}}function AB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function bB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Nn(t,e))return;n.uniform2iv(this.addr,e),Dn(t,e)}}function CB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Nn(t,e))return;n.uniform3iv(this.addr,e),Dn(t,e)}}function PB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Nn(t,e))return;n.uniform4iv(this.addr,e),Dn(t,e)}}function RB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function LB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Nn(t,e))return;n.uniform2uiv(this.addr,e),Dn(t,e)}}function IB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Nn(t,e))return;n.uniform3uiv(this.addr,e),Dn(t,e)}}function NB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Nn(t,e))return;n.uniform4uiv(this.addr,e),Dn(t,e)}}function DB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?$R:KR;t.setTexture2D(e||s,r)}function OB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||QR,r)}function UB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||e3,r)}function kB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||JR,r)}function FB(n){switch(n){case 5126:return xB;case 35664:return _B;case 35665:return SB;case 35666:return MB;case 35674:return wB;case 35675:return EB;case 35676:return TB;case 5124:case 35670:return AB;case 35667:case 35671:return bB;case 35668:case 35672:return CB;case 35669:case 35673:return PB;case 5125:return RB;case 36294:return LB;case 36295:return IB;case 36296:return NB;case 35678:case 36198:case 36298:case 36306:case 35682:return DB;case 35679:case 36299:case 36307:return OB;case 35680:case 36300:case 36308:case 36293:return UB;case 36289:case 36303:case 36311:case 36292:return kB}}function zB(n,e){n.uniform1fv(this.addr,e)}function BB(n,e){const t=Zu(e,this.size,2);n.uniform2fv(this.addr,t)}function VB(n,e){const t=Zu(e,this.size,3);n.uniform3fv(this.addr,t)}function HB(n,e){const t=Zu(e,this.size,4);n.uniform4fv(this.addr,t)}function GB(n,e){const t=Zu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function WB(n,e){const t=Zu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function jB(n,e){const t=Zu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function XB(n,e){n.uniform1iv(this.addr,e)}function YB(n,e){n.uniform2iv(this.addr,e)}function qB(n,e){n.uniform3iv(this.addr,e)}function ZB(n,e){n.uniform4iv(this.addr,e)}function KB(n,e){n.uniform1uiv(this.addr,e)}function $B(n,e){n.uniform2uiv(this.addr,e)}function JB(n,e){n.uniform3uiv(this.addr,e)}function QB(n,e){n.uniform4uiv(this.addr,e)}function e5(n,e,t){const i=this.cache,r=e.length,s=Pg(t,r);Nn(i,s)||(n.uniform1iv(this.addr,s),Dn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||KR,s[o])}function t5(n,e,t){const i=this.cache,r=e.length,s=Pg(t,r);Nn(i,s)||(n.uniform1iv(this.addr,s),Dn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||QR,s[o])}function n5(n,e,t){const i=this.cache,r=e.length,s=Pg(t,r);Nn(i,s)||(n.uniform1iv(this.addr,s),Dn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||e3,s[o])}function i5(n,e,t){const i=this.cache,r=e.length,s=Pg(t,r);Nn(i,s)||(n.uniform1iv(this.addr,s),Dn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||JR,s[o])}function r5(n){switch(n){case 5126:return zB;case 35664:return BB;case 35665:return VB;case 35666:return HB;case 35674:return GB;case 35675:return WB;case 35676:return jB;case 5124:case 35670:return XB;case 35667:case 35671:return YB;case 35668:case 35672:return qB;case 35669:case 35673:return ZB;case 5125:return KB;case 36294:return $B;case 36295:return JB;case 36296:return QB;case 35678:case 36198:case 36298:case 36306:case 35682:return e5;case 35679:case 36299:case 36307:return t5;case 35680:case 36300:case 36308:case 36293:return n5;case 36289:case 36303:case 36311:case 36292:return i5}}class s5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=FB(t.type)}}class o5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=r5(t.type)}}class a5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const ay=/(\w+)(\])?(\[|\.)?/g;function LT(n,e){n.seq.push(e),n.map[e.id]=e}function l5(n,e,t){const i=n.name,r=i.length;for(ay.lastIndex=0;;){const s=ay.exec(i),o=ay.lastIndex;let a=s[1];const l=s[2]==="]",f=s[3];if(l&&(a=a|0),f===void 0||f==="["&&o+2===r){LT(t,f===void 0?new s5(a,n,e):new o5(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new a5(a),LT(t,d)),t=d}}}class um{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);l5(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function IT(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const u5=37297;let c5=0;function f5(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function h5(n){const e=Ft.getPrimaries(Ft.workingColorSpace),t=Ft.getPrimaries(n);let i;switch(e===t?i="":e===Xf&&t===jf?i="LinearDisplayP3ToLinearSRGB":e===jf&&t===Xf&&(i="LinearSRGBToLinearDisplayP3"),n){case hs:case ph:return[i,"LinearTransferOETF"];case Rn:case bg:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function NT(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+f5(n.getShaderSource(e),o)}else return r}function d5(n,e){const t=h5(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function p5(n,e){let t;switch(e){case gR:t="Linear";break;case vR:t="Reinhard";break;case yR:t="OptimizedCineon";break;case q1:t="ACESFilmic";break;case _R:t="AgX";break;case xR:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function m5(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hu).join(`
`)}function g5(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(hu).join(`
`)}function v5(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function y5(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function hu(n){return n!==""}function DT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function OT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const x5=/^[ \t]*#include +<([\w\d./]+)>/gm;function w_(n){return n.replace(x5,S5)}const _5=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function S5(n,e){let t=_t[e];if(t===void 0){const i=_5.get(e);if(i!==void 0)t=_t[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return w_(t)}const M5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function UT(n){return n.replace(M5,w5)}function w5(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function kT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function E5(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===wg?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===lf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ir&&(e="SHADOWMAP_TYPE_VSM"),e}function T5(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Xs:case zo:e="ENVMAP_TYPE_CUBE";break;case qu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function A5(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case zo:e="ENVMAP_MODE_REFRACTION";break}return e}function b5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case dh:e="ENVMAP_BLENDING_MULTIPLY";break;case pR:e="ENVMAP_BLENDING_MIX";break;case mR:e="ENVMAP_BLENDING_ADD";break}return e}function C5(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function P5(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=E5(t),f=T5(t),h=A5(t),d=b5(t),p=C5(t),m=t.isWebGL2?"":m5(t),y=g5(t),w=v5(s),x=r.createProgram();let v,S,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(hu).join(`
`),v.length>0&&(v+=`
`),S=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w].filter(hu).join(`
`),S.length>0&&(S+=`
`)):(v=[kT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hu).join(`
`),S=[m,kT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ls?"#define TONE_MAPPING":"",t.toneMapping!==ls?_t.tonemapping_pars_fragment:"",t.toneMapping!==ls?p5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",_t.colorspace_pars_fragment,d5("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(hu).join(`
`)),o=w_(o),o=DT(o,t),o=OT(o,t),a=w_(a),a=DT(a,t),a=OT(a,t),o=UT(o),a=UT(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,v=[y,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===__?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===__?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const T=M+v+o,P=M+S+a,b=IT(r,r.VERTEX_SHADER,T),L=IT(r,r.FRAGMENT_SHADER,P);r.attachShader(x,b),r.attachShader(x,L),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function D(Z){if(n.debug.checkShaderErrors){const oe=r.getProgramInfoLog(x).trim(),H=r.getShaderInfoLog(b).trim(),K=r.getShaderInfoLog(L).trim();let $=!0,se=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if($=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,b,L);else{const N=NT(r,b,"vertex"),B=NT(r,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Program Info Log: `+oe+`
`+N+`
`+B)}else oe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",oe):(H===""||K==="")&&(se=!1);se&&(Z.diagnostics={runnable:$,programLog:oe,vertexShader:{log:H,prefix:v},fragmentShader:{log:K,prefix:S}})}r.deleteShader(b),r.deleteShader(L),C=new um(r,x),R=y5(r,x)}let C;this.getUniforms=function(){return C===void 0&&D(this),C};let R;this.getAttributes=function(){return R===void 0&&D(this),R};let z=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=r.getProgramParameter(x,u5)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=c5++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=b,this.fragmentShader=L,this}let R5=0;class L5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new I5(e),t.set(e,i)),i}}class I5{constructor(e){this.id=R5++,this.code=e,this.usedTimes=0}}function N5(n,e,t,i,r,s,o){const a=new Ga,l=new L5,f=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(C){return C===0?"uv":`uv${C}`}function x(C,R,z,Z,oe){const H=Z.fog,K=oe.geometry,$=C.isMeshStandardMaterial?Z.environment:null,se=(C.isMeshStandardMaterial?t:e).get(C.envMap||$),N=se&&se.mapping===qu?se.image.height:null,B=y[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const V=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,Y=V!==void 0?V.length:0;let J=0;K.morphAttributes.position!==void 0&&(J=1),K.morphAttributes.normal!==void 0&&(J=2),K.morphAttributes.color!==void 0&&(J=3);let Q,le,ge,Ee;if(B){const Kt=Or[B];Q=Kt.vertexShader,le=Kt.fragmentShader}else Q=C.vertexShader,le=C.fragmentShader,l.update(C),ge=l.getVertexShaderID(C),Ee=l.getFragmentShaderID(C);const be=n.getRenderTarget(),$e=oe.isInstancedMesh===!0,nt=oe.isBatchedMesh===!0,Le=!!C.map,Ce=!!C.matcap,G=!!se,xe=!!C.aoMap,de=!!C.lightMap,Te=!!C.bumpMap,pe=!!C.normalMap,Ge=!!C.displacementMap,De=!!C.emissiveMap,O=!!C.metalnessMap,I=!!C.roughnessMap,ne=C.anisotropy>0,Se=C.clearcoat>0,_e=C.iridescence>0,ye=C.sheen>0,qe=C.transmission>0,Ie=ne&&!!C.anisotropyMap,Oe=Se&&!!C.clearcoatMap,it=Se&&!!C.clearcoatNormalMap,pt=Se&&!!C.clearcoatRoughnessMap,Me=_e&&!!C.iridescenceMap,Ct=_e&&!!C.iridescenceThicknessMap,xt=ye&&!!C.sheenColorMap,ct=ye&&!!C.sheenRoughnessMap,tt=!!C.specularMap,We=!!C.specularColorMap,X=!!C.specularIntensityMap,ve=qe&&!!C.transmissionMap,Be=qe&&!!C.thicknessMap,Fe=!!C.gradientMap,we=!!C.alphaMap,j=C.alphaTest>0,Re=!!C.alphaHash,Ue=!!C.extensions,rt=!!K.attributes.uv1,Ze=!!K.attributes.uv2,bt=!!K.attributes.uv3;let Rt=ls;return C.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(Rt=n.toneMapping),{isWebGL2:h,shaderID:B,shaderType:C.type,shaderName:C.name,vertexShader:Q,fragmentShader:le,defines:C.defines,customVertexShaderID:ge,customFragmentShaderID:Ee,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:nt,instancing:$e,instancingColor:$e&&oe.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:be===null?n.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:hs,map:Le,matcap:Ce,envMap:G,envMapMode:G&&se.mapping,envMapCubeUVHeight:N,aoMap:xe,lightMap:de,bumpMap:Te,normalMap:pe,displacementMap:p&&Ge,emissiveMap:De,normalMapObjectSpace:pe&&C.normalMapType===OR,normalMapTangentSpace:pe&&C.normalMapType===qo,metalnessMap:O,roughnessMap:I,anisotropy:ne,anisotropyMap:Ie,clearcoat:Se,clearcoatMap:Oe,clearcoatNormalMap:it,clearcoatRoughnessMap:pt,iridescence:_e,iridescenceMap:Me,iridescenceThicknessMap:Ct,sheen:ye,sheenColorMap:xt,sheenRoughnessMap:ct,specularMap:tt,specularColorMap:We,specularIntensityMap:X,transmission:qe,transmissionMap:ve,thicknessMap:Be,gradientMap:Fe,opaque:C.transparent===!1&&C.blending===Ba,alphaMap:we,alphaTest:j,alphaHash:Re,combine:C.combine,mapUv:Le&&w(C.map.channel),aoMapUv:xe&&w(C.aoMap.channel),lightMapUv:de&&w(C.lightMap.channel),bumpMapUv:Te&&w(C.bumpMap.channel),normalMapUv:pe&&w(C.normalMap.channel),displacementMapUv:Ge&&w(C.displacementMap.channel),emissiveMapUv:De&&w(C.emissiveMap.channel),metalnessMapUv:O&&w(C.metalnessMap.channel),roughnessMapUv:I&&w(C.roughnessMap.channel),anisotropyMapUv:Ie&&w(C.anisotropyMap.channel),clearcoatMapUv:Oe&&w(C.clearcoatMap.channel),clearcoatNormalMapUv:it&&w(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pt&&w(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Me&&w(C.iridescenceMap.channel),iridescenceThicknessMapUv:Ct&&w(C.iridescenceThicknessMap.channel),sheenColorMapUv:xt&&w(C.sheenColorMap.channel),sheenRoughnessMapUv:ct&&w(C.sheenRoughnessMap.channel),specularMapUv:tt&&w(C.specularMap.channel),specularColorMapUv:We&&w(C.specularColorMap.channel),specularIntensityMapUv:X&&w(C.specularIntensityMap.channel),transmissionMapUv:ve&&w(C.transmissionMap.channel),thicknessMapUv:Be&&w(C.thicknessMap.channel),alphaMapUv:we&&w(C.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(pe||ne),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,vertexUv1s:rt,vertexUv2s:Ze,vertexUv3s:bt,pointsUvs:oe.isPoints===!0&&!!K.attributes.uv&&(Le||we),fog:!!H,useFog:C.fog===!0,fogExp2:H&&H.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:oe.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:J,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&z.length>0,shadowMapType:n.shadowMap.type,toneMapping:Rt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Le&&C.map.isVideoTexture===!0&&Ft.getTransfer(C.map.colorSpace)===Wt,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ur,flipSided:C.side===Si,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:Ue&&C.extensions.derivatives===!0,extensionFragDepth:Ue&&C.extensions.fragDepth===!0,extensionDrawBuffers:Ue&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ue&&C.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Ue&&C.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()}}function v(C){const R=[];if(C.shaderID?R.push(C.shaderID):(R.push(C.customVertexShaderID),R.push(C.customFragmentShaderID)),C.defines!==void 0)for(const z in C.defines)R.push(z),R.push(C.defines[z]);return C.isRawShaderMaterial===!1&&(S(R,C),M(R,C),R.push(n.outputColorSpace)),R.push(C.customProgramCacheKey),R.join()}function S(C,R){C.push(R.precision),C.push(R.outputColorSpace),C.push(R.envMapMode),C.push(R.envMapCubeUVHeight),C.push(R.mapUv),C.push(R.alphaMapUv),C.push(R.lightMapUv),C.push(R.aoMapUv),C.push(R.bumpMapUv),C.push(R.normalMapUv),C.push(R.displacementMapUv),C.push(R.emissiveMapUv),C.push(R.metalnessMapUv),C.push(R.roughnessMapUv),C.push(R.anisotropyMapUv),C.push(R.clearcoatMapUv),C.push(R.clearcoatNormalMapUv),C.push(R.clearcoatRoughnessMapUv),C.push(R.iridescenceMapUv),C.push(R.iridescenceThicknessMapUv),C.push(R.sheenColorMapUv),C.push(R.sheenRoughnessMapUv),C.push(R.specularMapUv),C.push(R.specularColorMapUv),C.push(R.specularIntensityMapUv),C.push(R.transmissionMapUv),C.push(R.thicknessMapUv),C.push(R.combine),C.push(R.fogExp2),C.push(R.sizeAttenuation),C.push(R.morphTargetsCount),C.push(R.morphAttributeCount),C.push(R.numDirLights),C.push(R.numPointLights),C.push(R.numSpotLights),C.push(R.numSpotLightMaps),C.push(R.numHemiLights),C.push(R.numRectAreaLights),C.push(R.numDirLightShadows),C.push(R.numPointLightShadows),C.push(R.numSpotLightShadows),C.push(R.numSpotLightShadowsWithMaps),C.push(R.numLightProbes),C.push(R.shadowMapType),C.push(R.toneMapping),C.push(R.numClippingPlanes),C.push(R.numClipIntersection),C.push(R.depthPacking)}function M(C,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),C.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.useLegacyLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),C.push(a.mask)}function T(C){const R=y[C.type];let z;if(R){const Z=Or[R];z=qR.clone(Z.uniforms)}else z=C.uniforms;return z}function P(C,R){let z;for(let Z=0,oe=f.length;Z<oe;Z++){const H=f[Z];if(H.cacheKey===R){z=H,++z.usedTimes;break}}return z===void 0&&(z=new P5(n,R,C,s),f.push(z)),z}function b(C){if(--C.usedTimes===0){const R=f.indexOf(C);f[R]=f[f.length-1],f.pop(),C.destroy()}}function L(C){l.remove(C)}function D(){l.dispose()}return{getParameters:x,getProgramCacheKey:v,getUniforms:T,acquireProgram:P,releaseProgram:b,releaseShaderCache:L,programs:f,dispose:D}}function D5(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function O5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function FT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function zT(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,m,y,w,x){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:p,material:m,groupOrder:y,renderOrder:d.renderOrder,z:w,group:x},n[e]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=m,v.groupOrder=y,v.renderOrder=d.renderOrder,v.z=w,v.group=x),e++,v}function a(d,p,m,y,w,x){const v=o(d,p,m,y,w,x);m.transmission>0?i.push(v):m.transparent===!0?r.push(v):t.push(v)}function l(d,p,m,y,w,x){const v=o(d,p,m,y,w,x);m.transmission>0?i.unshift(v):m.transparent===!0?r.unshift(v):t.unshift(v)}function f(d,p){t.length>1&&t.sort(d||O5),i.length>1&&i.sort(p||FT),r.length>1&&r.sort(p||FT)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:f}}function U5(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new zT,n.set(i,[o])):r>=s.length?(o=new zT,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function k5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new He};break;case"SpotLight":t={position:new k,direction:new k,color:new He,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new He,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new He,groundColor:new He};break;case"RectAreaLight":t={color:new He,position:new k,halfWidth:new k,halfHeight:new k};break}return n[e.id]=t,t}}}function F5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let z5=0;function B5(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function V5(n,e){const t=new k5,i=F5(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)r.probe.push(new k);const s=new k,o=new ft,a=new ft;function l(h,d){let p=0,m=0,y=0;for(let Z=0;Z<9;Z++)r.probe[Z].set(0,0,0);let w=0,x=0,v=0,S=0,M=0,T=0,P=0,b=0,L=0,D=0,C=0;h.sort(B5);const R=d===!0?Math.PI:1;for(let Z=0,oe=h.length;Z<oe;Z++){const H=h[Z],K=H.color,$=H.intensity,se=H.distance,N=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)p+=K.r*$*R,m+=K.g*$*R,y+=K.b*$*R;else if(H.isLightProbe){for(let B=0;B<9;B++)r.probe[B].addScaledVector(H.sh.coefficients[B],$);C++}else if(H.isDirectionalLight){const B=t.get(H);if(B.color.copy(H.color).multiplyScalar(H.intensity*R),H.castShadow){const V=H.shadow,Y=i.get(H);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,r.directionalShadow[w]=Y,r.directionalShadowMap[w]=N,r.directionalShadowMatrix[w]=H.shadow.matrix,T++}r.directional[w]=B,w++}else if(H.isSpotLight){const B=t.get(H);B.position.setFromMatrixPosition(H.matrixWorld),B.color.copy(K).multiplyScalar($*R),B.distance=se,B.coneCos=Math.cos(H.angle),B.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),B.decay=H.decay,r.spot[v]=B;const V=H.shadow;if(H.map&&(r.spotLightMap[L]=H.map,L++,V.updateMatrices(H),H.castShadow&&D++),r.spotLightMatrix[v]=V.matrix,H.castShadow){const Y=i.get(H);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,r.spotShadow[v]=Y,r.spotShadowMap[v]=N,b++}v++}else if(H.isRectAreaLight){const B=t.get(H);B.color.copy(K).multiplyScalar($),B.halfWidth.set(H.width*.5,0,0),B.halfHeight.set(0,H.height*.5,0),r.rectArea[S]=B,S++}else if(H.isPointLight){const B=t.get(H);if(B.color.copy(H.color).multiplyScalar(H.intensity*R),B.distance=H.distance,B.decay=H.decay,H.castShadow){const V=H.shadow,Y=i.get(H);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,Y.shadowCameraNear=V.camera.near,Y.shadowCameraFar=V.camera.far,r.pointShadow[x]=Y,r.pointShadowMap[x]=N,r.pointShadowMatrix[x]=H.shadow.matrix,P++}r.point[x]=B,x++}else if(H.isHemisphereLight){const B=t.get(H);B.skyColor.copy(H.color).multiplyScalar($*R),B.groundColor.copy(H.groundColor).multiplyScalar($*R),r.hemi[M]=B,M++}}S>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_FLOAT_1,r.rectAreaLTC2=Ne.LTC_FLOAT_2):(r.rectAreaLTC1=Ne.LTC_HALF_1,r.rectAreaLTC2=Ne.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_FLOAT_1,r.rectAreaLTC2=Ne.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_HALF_1,r.rectAreaLTC2=Ne.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=y;const z=r.hash;(z.directionalLength!==w||z.pointLength!==x||z.spotLength!==v||z.rectAreaLength!==S||z.hemiLength!==M||z.numDirectionalShadows!==T||z.numPointShadows!==P||z.numSpotShadows!==b||z.numSpotMaps!==L||z.numLightProbes!==C)&&(r.directional.length=w,r.spot.length=v,r.rectArea.length=S,r.point.length=x,r.hemi.length=M,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=P,r.pointShadowMap.length=P,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=P,r.spotLightMatrix.length=b+L-D,r.spotLightMap.length=L,r.numSpotLightShadowsWithMaps=D,r.numLightProbes=C,z.directionalLength=w,z.pointLength=x,z.spotLength=v,z.rectAreaLength=S,z.hemiLength=M,z.numDirectionalShadows=T,z.numPointShadows=P,z.numSpotShadows=b,z.numSpotMaps=L,z.numLightProbes=C,r.version=z5++)}function f(h,d){let p=0,m=0,y=0,w=0,x=0;const v=d.matrixWorldInverse;for(let S=0,M=h.length;S<M;S++){const T=h[S];if(T.isDirectionalLight){const P=r.directional[p];P.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(v),p++}else if(T.isSpotLight){const P=r.spot[y];P.position.setFromMatrixPosition(T.matrixWorld),P.position.applyMatrix4(v),P.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(v),y++}else if(T.isRectAreaLight){const P=r.rectArea[w];P.position.setFromMatrixPosition(T.matrixWorld),P.position.applyMatrix4(v),a.identity(),o.copy(T.matrixWorld),o.premultiply(v),a.extractRotation(o),P.halfWidth.set(T.width*.5,0,0),P.halfHeight.set(0,T.height*.5,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),w++}else if(T.isPointLight){const P=r.point[m];P.position.setFromMatrixPosition(T.matrixWorld),P.position.applyMatrix4(v),m++}else if(T.isHemisphereLight){const P=r.hemi[x];P.direction.setFromMatrixPosition(T.matrixWorld),P.direction.transformDirection(v),x++}}}return{setup:l,setupView:f,state:r}}function BT(n,e){const t=new V5(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){t.setup(i,d)}function f(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:f,pushLight:o,pushShadow:a}}function H5(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new BT(n,e),t.set(s,[l])):o>=a.length?(l=new BT(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class mS extends $n{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=NR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class gS extends $n{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const G5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,W5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function j5(n,e,t){let i=new yh;const r=new me,s=new me,o=new zt,a=new mS({depthPacking:DR}),l=new gS,f={},h=t.maxTextureSize,d={[js]:Si,[Si]:js,[Ur]:Ur},p=new ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:G5,fragmentShader:W5}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new Mt;y.setAttribute("position",new Vt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new In(y,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wg;let v=this.type;this.render=function(b,L,D){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||b.length===0)return;const C=n.getRenderTarget(),R=n.getActiveCubeFace(),z=n.getActiveMipmapLevel(),Z=n.state;Z.setBlending(Fs),Z.buffers.color.setClear(1,1,1,1),Z.buffers.depth.setTest(!0),Z.setScissorTest(!1);const oe=v!==Ir&&this.type===Ir,H=v===Ir&&this.type!==Ir;for(let K=0,$=b.length;K<$;K++){const se=b[K],N=se.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;r.copy(N.mapSize);const B=N.getFrameExtents();if(r.multiply(B),s.copy(N.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/B.x),r.x=s.x*B.x,N.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/B.y),r.y=s.y*B.y,N.mapSize.y=s.y)),N.map===null||oe===!0||H===!0){const Y=this.type!==Ir?{minFilter:xn,magFilter:xn}:{};N.map!==null&&N.map.dispose(),N.map=new Wr(r.x,r.y,Y),N.map.texture.name=se.name+".shadowMap",N.camera.updateProjectionMatrix()}n.setRenderTarget(N.map),n.clear();const V=N.getViewportCount();for(let Y=0;Y<V;Y++){const J=N.getViewport(Y);o.set(s.x*J.x,s.y*J.y,s.x*J.z,s.y*J.w),Z.viewport(o),N.updateMatrices(se,Y),i=N.getFrustum(),T(L,D,N.camera,se,this.type)}N.isPointLightShadow!==!0&&this.type===Ir&&S(N,D),N.needsUpdate=!1}v=this.type,x.needsUpdate=!1,n.setRenderTarget(C,R,z)};function S(b,L){const D=e.update(w);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Wr(r.x,r.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(L,null,D,p,w,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(L,null,D,m,w,null)}function M(b,L,D,C){let R=null;const z=D.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(z!==void 0)R=z;else if(R=D.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const Z=R.uuid,oe=L.uuid;let H=f[Z];H===void 0&&(H={},f[Z]=H);let K=H[oe];K===void 0&&(K=R.clone(),H[oe]=K,L.addEventListener("dispose",P)),R=K}if(R.visible=L.visible,R.wireframe=L.wireframe,C===Ir?R.side=L.shadowSide!==null?L.shadowSide:L.side:R.side=L.shadowSide!==null?L.shadowSide:d[L.side],R.alphaMap=L.alphaMap,R.alphaTest=L.alphaTest,R.map=L.map,R.clipShadows=L.clipShadows,R.clippingPlanes=L.clippingPlanes,R.clipIntersection=L.clipIntersection,R.displacementMap=L.displacementMap,R.displacementScale=L.displacementScale,R.displacementBias=L.displacementBias,R.wireframeLinewidth=L.wireframeLinewidth,R.linewidth=L.linewidth,D.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const Z=n.properties.get(R);Z.light=D}return R}function T(b,L,D,C,R){if(b.visible===!1)return;if(b.layers.test(L.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&R===Ir)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,b.matrixWorld);const oe=e.update(b),H=b.material;if(Array.isArray(H)){const K=oe.groups;for(let $=0,se=K.length;$<se;$++){const N=K[$],B=H[N.materialIndex];if(B&&B.visible){const V=M(b,B,C,R);b.onBeforeShadow(n,b,L,D,oe,V,N),n.renderBufferDirect(D,null,oe,V,b,N),b.onAfterShadow(n,b,L,D,oe,V,N)}}}else if(H.visible){const K=M(b,H,C,R);b.onBeforeShadow(n,b,L,D,oe,K,null),n.renderBufferDirect(D,null,oe,K,b,null),b.onAfterShadow(n,b,L,D,oe,K,null)}}const Z=b.children;for(let oe=0,H=Z.length;oe<H;oe++)T(Z[oe],L,D,C,R)}function P(b){b.target.removeEventListener("dispose",P);for(const D in f){const C=f[D],R=b.target.uuid;R in C&&(C[R].dispose(),delete C[R])}}}function X5(n,e,t){const i=t.isWebGL2;function r(){let j=!1;const Re=new zt;let Ue=null;const rt=new zt(0,0,0,0);return{setMask:function(Ze){Ue!==Ze&&!j&&(n.colorMask(Ze,Ze,Ze,Ze),Ue=Ze)},setLocked:function(Ze){j=Ze},setClear:function(Ze,bt,Rt,Ht,Kt){Kt===!0&&(Ze*=Ht,bt*=Ht,Rt*=Ht),Re.set(Ze,bt,Rt,Ht),rt.equals(Re)===!1&&(n.clearColor(Ze,bt,Rt,Ht),rt.copy(Re))},reset:function(){j=!1,Ue=null,rt.set(-1,0,0,0)}}}function s(){let j=!1,Re=null,Ue=null,rt=null;return{setTest:function(Ze){Ze?nt(n.DEPTH_TEST):Le(n.DEPTH_TEST)},setMask:function(Ze){Re!==Ze&&!j&&(n.depthMask(Ze),Re=Ze)},setFunc:function(Ze){if(Ue!==Ze){switch(Ze){case aR:n.depthFunc(n.NEVER);break;case lR:n.depthFunc(n.ALWAYS);break;case uR:n.depthFunc(n.LESS);break;case Uf:n.depthFunc(n.LEQUAL);break;case cR:n.depthFunc(n.EQUAL);break;case fR:n.depthFunc(n.GEQUAL);break;case hR:n.depthFunc(n.GREATER);break;case dR:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ue=Ze}},setLocked:function(Ze){j=Ze},setClear:function(Ze){rt!==Ze&&(n.clearDepth(Ze),rt=Ze)},reset:function(){j=!1,Re=null,Ue=null,rt=null}}}function o(){let j=!1,Re=null,Ue=null,rt=null,Ze=null,bt=null,Rt=null,Ht=null,Kt=null;return{setTest:function(Lt){j||(Lt?nt(n.STENCIL_TEST):Le(n.STENCIL_TEST))},setMask:function(Lt){Re!==Lt&&!j&&(n.stencilMask(Lt),Re=Lt)},setFunc:function(Lt,Gn,tr){(Ue!==Lt||rt!==Gn||Ze!==tr)&&(n.stencilFunc(Lt,Gn,tr),Ue=Lt,rt=Gn,Ze=tr)},setOp:function(Lt,Gn,tr){(bt!==Lt||Rt!==Gn||Ht!==tr)&&(n.stencilOp(Lt,Gn,tr),bt=Lt,Rt=Gn,Ht=tr)},setLocked:function(Lt){j=Lt},setClear:function(Lt){Kt!==Lt&&(n.clearStencil(Lt),Kt=Lt)},reset:function(){j=!1,Re=null,Ue=null,rt=null,Ze=null,bt=null,Rt=null,Ht=null,Kt=null}}}const a=new r,l=new s,f=new o,h=new WeakMap,d=new WeakMap;let p={},m={},y=new WeakMap,w=[],x=null,v=!1,S=null,M=null,T=null,P=null,b=null,L=null,D=null,C=new He(0,0,0),R=0,z=!1,Z=null,oe=null,H=null,K=null,$=null;const se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,B=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(V)[1]),N=B>=1):V.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),N=B>=2);let Y=null,J={};const Q=n.getParameter(n.SCISSOR_BOX),le=n.getParameter(n.VIEWPORT),ge=new zt().fromArray(Q),Ee=new zt().fromArray(le);function be(j,Re,Ue,rt){const Ze=new Uint8Array(4),bt=n.createTexture();n.bindTexture(j,bt),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Rt=0;Rt<Ue;Rt++)i&&(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)?n.texImage3D(Re,0,n.RGBA,1,1,rt,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(Re+Rt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return bt}const $e={};$e[n.TEXTURE_2D]=be(n.TEXTURE_2D,n.TEXTURE_2D,1),$e[n.TEXTURE_CUBE_MAP]=be(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&($e[n.TEXTURE_2D_ARRAY]=be(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),$e[n.TEXTURE_3D]=be(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),f.setClear(0),nt(n.DEPTH_TEST),l.setFunc(Uf),De(!1),O(Vx),nt(n.CULL_FACE),pe(Fs);function nt(j){p[j]!==!0&&(n.enable(j),p[j]=!0)}function Le(j){p[j]!==!1&&(n.disable(j),p[j]=!1)}function Ce(j,Re){return m[j]!==Re?(n.bindFramebuffer(j,Re),m[j]=Re,i&&(j===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Re),j===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Re)),!0):!1}function G(j,Re){let Ue=w,rt=!1;if(j)if(Ue=y.get(Re),Ue===void 0&&(Ue=[],y.set(Re,Ue)),j.isWebGLMultipleRenderTargets){const Ze=j.texture;if(Ue.length!==Ze.length||Ue[0]!==n.COLOR_ATTACHMENT0){for(let bt=0,Rt=Ze.length;bt<Rt;bt++)Ue[bt]=n.COLOR_ATTACHMENT0+bt;Ue.length=Ze.length,rt=!0}}else Ue[0]!==n.COLOR_ATTACHMENT0&&(Ue[0]=n.COLOR_ATTACHMENT0,rt=!0);else Ue[0]!==n.BACK&&(Ue[0]=n.BACK,rt=!0);rt&&(t.isWebGL2?n.drawBuffers(Ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ue))}function xe(j){return x!==j?(n.useProgram(j),x=j,!0):!1}const de={[Mo]:n.FUNC_ADD,[XP]:n.FUNC_SUBTRACT,[YP]:n.FUNC_REVERSE_SUBTRACT};if(i)de[jx]=n.MIN,de[Xx]=n.MAX;else{const j=e.get("EXT_blend_minmax");j!==null&&(de[jx]=j.MIN_EXT,de[Xx]=j.MAX_EXT)}const Te={[qP]:n.ZERO,[ZP]:n.ONE,[KP]:n.SRC_COLOR,[zm]:n.SRC_ALPHA,[nR]:n.SRC_ALPHA_SATURATE,[eR]:n.DST_COLOR,[JP]:n.DST_ALPHA,[$P]:n.ONE_MINUS_SRC_COLOR,[Bm]:n.ONE_MINUS_SRC_ALPHA,[tR]:n.ONE_MINUS_DST_COLOR,[QP]:n.ONE_MINUS_DST_ALPHA,[iR]:n.CONSTANT_COLOR,[rR]:n.ONE_MINUS_CONSTANT_COLOR,[sR]:n.CONSTANT_ALPHA,[oR]:n.ONE_MINUS_CONSTANT_ALPHA};function pe(j,Re,Ue,rt,Ze,bt,Rt,Ht,Kt,Lt){if(j===Fs){v===!0&&(Le(n.BLEND),v=!1);return}if(v===!1&&(nt(n.BLEND),v=!0),j!==jP){if(j!==S||Lt!==z){if((M!==Mo||b!==Mo)&&(n.blendEquation(n.FUNC_ADD),M=Mo,b=Mo),Lt)switch(j){case Ba:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Hx:n.blendFunc(n.ONE,n.ONE);break;case Gx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Wx:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case Ba:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Hx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Gx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Wx:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}T=null,P=null,L=null,D=null,C.set(0,0,0),R=0,S=j,z=Lt}return}Ze=Ze||Re,bt=bt||Ue,Rt=Rt||rt,(Re!==M||Ze!==b)&&(n.blendEquationSeparate(de[Re],de[Ze]),M=Re,b=Ze),(Ue!==T||rt!==P||bt!==L||Rt!==D)&&(n.blendFuncSeparate(Te[Ue],Te[rt],Te[bt],Te[Rt]),T=Ue,P=rt,L=bt,D=Rt),(Ht.equals(C)===!1||Kt!==R)&&(n.blendColor(Ht.r,Ht.g,Ht.b,Kt),C.copy(Ht),R=Kt),S=j,z=!1}function Ge(j,Re){j.side===Ur?Le(n.CULL_FACE):nt(n.CULL_FACE);let Ue=j.side===Si;Re&&(Ue=!Ue),De(Ue),j.blending===Ba&&j.transparent===!1?pe(Fs):pe(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),l.setFunc(j.depthFunc),l.setTest(j.depthTest),l.setMask(j.depthWrite),a.setMask(j.colorWrite);const rt=j.stencilWrite;f.setTest(rt),rt&&(f.setMask(j.stencilWriteMask),f.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),f.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),ne(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?nt(n.SAMPLE_ALPHA_TO_COVERAGE):Le(n.SAMPLE_ALPHA_TO_COVERAGE)}function De(j){Z!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),Z=j)}function O(j){j!==HP?(nt(n.CULL_FACE),j!==oe&&(j===Vx?n.cullFace(n.BACK):j===GP?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Le(n.CULL_FACE),oe=j}function I(j){j!==H&&(N&&n.lineWidth(j),H=j)}function ne(j,Re,Ue){j?(nt(n.POLYGON_OFFSET_FILL),(K!==Re||$!==Ue)&&(n.polygonOffset(Re,Ue),K=Re,$=Ue)):Le(n.POLYGON_OFFSET_FILL)}function Se(j){j?nt(n.SCISSOR_TEST):Le(n.SCISSOR_TEST)}function _e(j){j===void 0&&(j=n.TEXTURE0+se-1),Y!==j&&(n.activeTexture(j),Y=j)}function ye(j,Re,Ue){Ue===void 0&&(Y===null?Ue=n.TEXTURE0+se-1:Ue=Y);let rt=J[Ue];rt===void 0&&(rt={type:void 0,texture:void 0},J[Ue]=rt),(rt.type!==j||rt.texture!==Re)&&(Y!==Ue&&(n.activeTexture(Ue),Y=Ue),n.bindTexture(j,Re||$e[j]),rt.type=j,rt.texture=Re)}function qe(){const j=J[Y];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function Ie(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function it(){try{n.texSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function pt(){try{n.texSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Me(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ct(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function xt(){try{n.texStorage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ct(){try{n.texStorage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function tt(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function We(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function X(j){ge.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),ge.copy(j))}function ve(j){Ee.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),Ee.copy(j))}function Be(j,Re){let Ue=d.get(Re);Ue===void 0&&(Ue=new WeakMap,d.set(Re,Ue));let rt=Ue.get(j);rt===void 0&&(rt=n.getUniformBlockIndex(Re,j.name),Ue.set(j,rt))}function Fe(j,Re){const rt=d.get(Re).get(j);h.get(Re)!==rt&&(n.uniformBlockBinding(Re,rt,j.__bindingPointIndex),h.set(Re,rt))}function we(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Y=null,J={},m={},y=new WeakMap,w=[],x=null,v=!1,S=null,M=null,T=null,P=null,b=null,L=null,D=null,C=new He(0,0,0),R=0,z=!1,Z=null,oe=null,H=null,K=null,$=null,ge.set(0,0,n.canvas.width,n.canvas.height),Ee.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),f.reset()}return{buffers:{color:a,depth:l,stencil:f},enable:nt,disable:Le,bindFramebuffer:Ce,drawBuffers:G,useProgram:xe,setBlending:pe,setMaterial:Ge,setFlipSided:De,setCullFace:O,setLineWidth:I,setPolygonOffset:ne,setScissorTest:Se,activeTexture:_e,bindTexture:ye,unbindTexture:qe,compressedTexImage2D:Ie,compressedTexImage3D:Oe,texImage2D:tt,texImage3D:We,updateUBOMapping:Be,uniformBlockBinding:Fe,texStorage2D:xt,texStorage3D:ct,texSubImage2D:it,texSubImage3D:pt,compressedTexSubImage2D:Me,compressedTexSubImage3D:Ct,scissor:X,viewport:ve,reset:we}}function Y5(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(O,I){return m?new OffscreenCanvas(O,I):qf("canvas")}function w(O,I,ne,Se){let _e=1;if((O.width>Se||O.height>Se)&&(_e=Se/Math.max(O.width,O.height)),_e<1||I===!0)if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap){const ye=I?Gm:Math.floor,qe=ye(_e*O.width),Ie=ye(_e*O.height);d===void 0&&(d=y(qe,Ie));const Oe=ne?y(qe,Ie):d;return Oe.width=qe,Oe.height=Ie,Oe.getContext("2d").drawImage(O,0,0,qe,Ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+O.width+"x"+O.height+") to ("+qe+"x"+Ie+")."),Oe}else return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+O.width+"x"+O.height+")."),O;return O}function x(O){return S_(O.width)&&S_(O.height)}function v(O){return a?!1:O.wrapS!==ui||O.wrapT!==ui||O.minFilter!==xn&&O.minFilter!==Sn}function S(O,I){return O.generateMipmaps&&I&&O.minFilter!==xn&&O.minFilter!==Sn}function M(O){n.generateMipmap(O)}function T(O,I,ne,Se,_e=!1){if(a===!1)return I;if(O!==null){if(n[O]!==void 0)return n[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let ye=I;if(I===n.RED&&(ne===n.FLOAT&&(ye=n.R32F),ne===n.HALF_FLOAT&&(ye=n.R16F),ne===n.UNSIGNED_BYTE&&(ye=n.R8)),I===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(ye=n.R8UI),ne===n.UNSIGNED_SHORT&&(ye=n.R16UI),ne===n.UNSIGNED_INT&&(ye=n.R32UI),ne===n.BYTE&&(ye=n.R8I),ne===n.SHORT&&(ye=n.R16I),ne===n.INT&&(ye=n.R32I)),I===n.RG&&(ne===n.FLOAT&&(ye=n.RG32F),ne===n.HALF_FLOAT&&(ye=n.RG16F),ne===n.UNSIGNED_BYTE&&(ye=n.RG8)),I===n.RGBA){const qe=_e?Wf:Ft.getTransfer(Se);ne===n.FLOAT&&(ye=n.RGBA32F),ne===n.HALF_FLOAT&&(ye=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(ye=qe===Wt?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ye}function P(O,I,ne){return S(O,ne)===!0||O.isFramebufferTexture&&O.minFilter!==xn&&O.minFilter!==Sn?Math.log2(Math.max(I.width,I.height))+1:O.mipmaps!==void 0&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?I.mipmaps.length:1}function b(O){return O===xn||O===Vm||O===uf?n.NEAREST:n.LINEAR}function L(O){const I=O.target;I.removeEventListener("dispose",L),C(I),I.isVideoTexture&&h.delete(I)}function D(O){const I=O.target;I.removeEventListener("dispose",D),z(I)}function C(O){const I=i.get(O);if(I.__webglInit===void 0)return;const ne=O.source,Se=p.get(ne);if(Se){const _e=Se[I.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&R(O),Object.keys(Se).length===0&&p.delete(ne)}i.remove(O)}function R(O){const I=i.get(O);n.deleteTexture(I.__webglTexture);const ne=O.source,Se=p.get(ne);delete Se[I.__cacheKey],o.memory.textures--}function z(O){const I=O.texture,ne=i.get(O),Se=i.get(I);if(Se.__webglTexture!==void 0&&(n.deleteTexture(Se.__webglTexture),o.memory.textures--),O.depthTexture&&O.depthTexture.dispose(),O.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(ne.__webglFramebuffer[_e]))for(let ye=0;ye<ne.__webglFramebuffer[_e].length;ye++)n.deleteFramebuffer(ne.__webglFramebuffer[_e][ye]);else n.deleteFramebuffer(ne.__webglFramebuffer[_e]);ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer[_e])}else{if(Array.isArray(ne.__webglFramebuffer))for(let _e=0;_e<ne.__webglFramebuffer.length;_e++)n.deleteFramebuffer(ne.__webglFramebuffer[_e]);else n.deleteFramebuffer(ne.__webglFramebuffer);if(ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let _e=0;_e<ne.__webglColorRenderbuffer.length;_e++)ne.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(ne.__webglColorRenderbuffer[_e]);ne.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(O.isWebGLMultipleRenderTargets)for(let _e=0,ye=I.length;_e<ye;_e++){const qe=i.get(I[_e]);qe.__webglTexture&&(n.deleteTexture(qe.__webglTexture),o.memory.textures--),i.remove(I[_e])}i.remove(I),i.remove(O)}let Z=0;function oe(){Z=0}function H(){const O=Z;return O>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+r.maxTextures),Z+=1,O}function K(O){const I=[];return I.push(O.wrapS),I.push(O.wrapT),I.push(O.wrapR||0),I.push(O.magFilter),I.push(O.minFilter),I.push(O.anisotropy),I.push(O.internalFormat),I.push(O.format),I.push(O.type),I.push(O.generateMipmaps),I.push(O.premultiplyAlpha),I.push(O.flipY),I.push(O.unpackAlignment),I.push(O.colorSpace),I.join()}function $(O,I){const ne=i.get(O);if(O.isVideoTexture&&Ge(O),O.isRenderTargetTexture===!1&&O.version>0&&ne.__version!==O.version){const Se=O.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(ne,O,I);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+I)}function se(O,I){const ne=i.get(O);if(O.version>0&&ne.__version!==O.version){ge(ne,O,I);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+I)}function N(O,I){const ne=i.get(O);if(O.version>0&&ne.__version!==O.version){ge(ne,O,I);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+I)}function B(O,I){const ne=i.get(O);if(O.version>0&&ne.__version!==O.version){Ee(ne,O,I);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+I)}const V={[zf]:n.REPEAT,[ui]:n.CLAMP_TO_EDGE,[Bf]:n.MIRRORED_REPEAT},Y={[xn]:n.NEAREST,[Vm]:n.NEAREST_MIPMAP_NEAREST,[uf]:n.NEAREST_MIPMAP_LINEAR,[Sn]:n.LINEAR,[Z1]:n.LINEAR_MIPMAP_NEAREST,[Bo]:n.LINEAR_MIPMAP_LINEAR},J={[UR]:n.NEVER,[HR]:n.ALWAYS,[kR]:n.LESS,[sS]:n.LEQUAL,[FR]:n.EQUAL,[VR]:n.GEQUAL,[zR]:n.GREATER,[BR]:n.NOTEQUAL};function Q(O,I,ne){if(ne?(n.texParameteri(O,n.TEXTURE_WRAP_S,V[I.wrapS]),n.texParameteri(O,n.TEXTURE_WRAP_T,V[I.wrapT]),(O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY)&&n.texParameteri(O,n.TEXTURE_WRAP_R,V[I.wrapR]),n.texParameteri(O,n.TEXTURE_MAG_FILTER,Y[I.magFilter]),n.texParameteri(O,n.TEXTURE_MIN_FILTER,Y[I.minFilter])):(n.texParameteri(O,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(O,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY)&&n.texParameteri(O,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(I.wrapS!==ui||I.wrapT!==ui)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(O,n.TEXTURE_MAG_FILTER,b(I.magFilter)),n.texParameteri(O,n.TEXTURE_MIN_FILTER,b(I.minFilter)),I.minFilter!==xn&&I.minFilter!==Sn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),I.compareFunction&&(n.texParameteri(O,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(O,n.TEXTURE_COMPARE_FUNC,J[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Se=e.get("EXT_texture_filter_anisotropic");if(I.magFilter===xn||I.minFilter!==uf&&I.minFilter!==Bo||I.type===kr&&e.has("OES_texture_float_linear")===!1||a===!1&&I.type===Uu&&e.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(O,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function le(O,I){let ne=!1;O.__webglInit===void 0&&(O.__webglInit=!0,I.addEventListener("dispose",L));const Se=I.source;let _e=p.get(Se);_e===void 0&&(_e={},p.set(Se,_e));const ye=K(I);if(ye!==O.__cacheKey){_e[ye]===void 0&&(_e[ye]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),_e[ye].usedTimes++;const qe=_e[O.__cacheKey];qe!==void 0&&(_e[O.__cacheKey].usedTimes--,qe.usedTimes===0&&R(I)),O.__cacheKey=ye,O.__webglTexture=_e[ye].texture}return ne}function ge(O,I,ne){let Se=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(Se=n.TEXTURE_3D);const _e=le(O,I),ye=I.source;t.bindTexture(Se,O.__webglTexture,n.TEXTURE0+ne);const qe=i.get(ye);if(ye.version!==qe.__version||_e===!0){t.activeTexture(n.TEXTURE0+ne);const Ie=Ft.getPrimaries(Ft.workingColorSpace),Oe=I.colorSpace===Yi?null:Ft.getPrimaries(I.colorSpace),it=I.colorSpace===Yi||Ie===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);const pt=v(I)&&x(I.image)===!1;let Me=w(I.image,pt,!1,r.maxTextureSize);Me=De(I,Me);const Ct=x(Me)||a,xt=s.convert(I.format,I.colorSpace);let ct=s.convert(I.type),tt=T(I.internalFormat,xt,ct,I.colorSpace,I.isVideoTexture);Q(Se,I,Ct);let We;const X=I.mipmaps,ve=a&&I.isVideoTexture!==!0&&tt!==nS,Be=qe.__version===void 0||_e===!0,Fe=P(I,Me,Ct);if(I.isDepthTexture)tt=n.DEPTH_COMPONENT,a?I.type===kr?tt=n.DEPTH_COMPONENT32F:I.type===Ds?tt=n.DEPTH_COMPONENT24:I.type===No?tt=n.DEPTH24_STENCIL8:tt=n.DEPTH_COMPONENT16:I.type===kr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===Do&&tt===n.DEPTH_COMPONENT&&I.type!==Tg&&I.type!==Ds&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Ds,ct=s.convert(I.type)),I.format===Ja&&tt===n.DEPTH_COMPONENT&&(tt=n.DEPTH_STENCIL,I.type!==No&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=No,ct=s.convert(I.type))),Be&&(ve?t.texStorage2D(n.TEXTURE_2D,1,tt,Me.width,Me.height):t.texImage2D(n.TEXTURE_2D,0,tt,Me.width,Me.height,0,xt,ct,null));else if(I.isDataTexture)if(X.length>0&&Ct){ve&&Be&&t.texStorage2D(n.TEXTURE_2D,Fe,tt,X[0].width,X[0].height);for(let we=0,j=X.length;we<j;we++)We=X[we],ve?t.texSubImage2D(n.TEXTURE_2D,we,0,0,We.width,We.height,xt,ct,We.data):t.texImage2D(n.TEXTURE_2D,we,tt,We.width,We.height,0,xt,ct,We.data);I.generateMipmaps=!1}else ve?(Be&&t.texStorage2D(n.TEXTURE_2D,Fe,tt,Me.width,Me.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Me.width,Me.height,xt,ct,Me.data)):t.texImage2D(n.TEXTURE_2D,0,tt,Me.width,Me.height,0,xt,ct,Me.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){ve&&Be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Fe,tt,X[0].width,X[0].height,Me.depth);for(let we=0,j=X.length;we<j;we++)We=X[we],I.format!==xi?xt!==null?ve?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,We.width,We.height,Me.depth,xt,We.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,we,tt,We.width,We.height,Me.depth,0,We.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ve?t.texSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,We.width,We.height,Me.depth,xt,ct,We.data):t.texImage3D(n.TEXTURE_2D_ARRAY,we,tt,We.width,We.height,Me.depth,0,xt,ct,We.data)}else{ve&&Be&&t.texStorage2D(n.TEXTURE_2D,Fe,tt,X[0].width,X[0].height);for(let we=0,j=X.length;we<j;we++)We=X[we],I.format!==xi?xt!==null?ve?t.compressedTexSubImage2D(n.TEXTURE_2D,we,0,0,We.width,We.height,xt,We.data):t.compressedTexImage2D(n.TEXTURE_2D,we,tt,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ve?t.texSubImage2D(n.TEXTURE_2D,we,0,0,We.width,We.height,xt,ct,We.data):t.texImage2D(n.TEXTURE_2D,we,tt,We.width,We.height,0,xt,ct,We.data)}else if(I.isDataArrayTexture)ve?(Be&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Fe,tt,Me.width,Me.height,Me.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,xt,ct,Me.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,tt,Me.width,Me.height,Me.depth,0,xt,ct,Me.data);else if(I.isData3DTexture)ve?(Be&&t.texStorage3D(n.TEXTURE_3D,Fe,tt,Me.width,Me.height,Me.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,xt,ct,Me.data)):t.texImage3D(n.TEXTURE_3D,0,tt,Me.width,Me.height,Me.depth,0,xt,ct,Me.data);else if(I.isFramebufferTexture){if(Be)if(ve)t.texStorage2D(n.TEXTURE_2D,Fe,tt,Me.width,Me.height);else{let we=Me.width,j=Me.height;for(let Re=0;Re<Fe;Re++)t.texImage2D(n.TEXTURE_2D,Re,tt,we,j,0,xt,ct,null),we>>=1,j>>=1}}else if(X.length>0&&Ct){ve&&Be&&t.texStorage2D(n.TEXTURE_2D,Fe,tt,X[0].width,X[0].height);for(let we=0,j=X.length;we<j;we++)We=X[we],ve?t.texSubImage2D(n.TEXTURE_2D,we,0,0,xt,ct,We):t.texImage2D(n.TEXTURE_2D,we,tt,xt,ct,We);I.generateMipmaps=!1}else ve?(Be&&t.texStorage2D(n.TEXTURE_2D,Fe,tt,Me.width,Me.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,xt,ct,Me)):t.texImage2D(n.TEXTURE_2D,0,tt,xt,ct,Me);S(I,Ct)&&M(Se),qe.__version=ye.version,I.onUpdate&&I.onUpdate(I)}O.__version=I.version}function Ee(O,I,ne){if(I.image.length!==6)return;const Se=le(O,I),_e=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,O.__webglTexture,n.TEXTURE0+ne);const ye=i.get(_e);if(_e.version!==ye.__version||Se===!0){t.activeTexture(n.TEXTURE0+ne);const qe=Ft.getPrimaries(Ft.workingColorSpace),Ie=I.colorSpace===Yi?null:Ft.getPrimaries(I.colorSpace),Oe=I.colorSpace===Yi||qe===Ie?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const it=I.isCompressedTexture||I.image[0].isCompressedTexture,pt=I.image[0]&&I.image[0].isDataTexture,Me=[];for(let we=0;we<6;we++)!it&&!pt?Me[we]=w(I.image[we],!1,!0,r.maxCubemapSize):Me[we]=pt?I.image[we].image:I.image[we],Me[we]=De(I,Me[we]);const Ct=Me[0],xt=x(Ct)||a,ct=s.convert(I.format,I.colorSpace),tt=s.convert(I.type),We=T(I.internalFormat,ct,tt,I.colorSpace),X=a&&I.isVideoTexture!==!0,ve=ye.__version===void 0||Se===!0;let Be=P(I,Ct,xt);Q(n.TEXTURE_CUBE_MAP,I,xt);let Fe;if(it){X&&ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Be,We,Ct.width,Ct.height);for(let we=0;we<6;we++){Fe=Me[we].mipmaps;for(let j=0;j<Fe.length;j++){const Re=Fe[j];I.format!==xi?ct!==null?X?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j,0,0,Re.width,Re.height,ct,Re.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j,We,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j,0,0,Re.width,Re.height,ct,tt,Re.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j,We,Re.width,Re.height,0,ct,tt,Re.data)}}}else{Fe=I.mipmaps,X&&ve&&(Fe.length>0&&Be++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Be,We,Me[0].width,Me[0].height));for(let we=0;we<6;we++)if(pt){X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,Me[we].width,Me[we].height,ct,tt,Me[we].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,We,Me[we].width,Me[we].height,0,ct,tt,Me[we].data);for(let j=0;j<Fe.length;j++){const Ue=Fe[j].image[we].image;X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j+1,0,0,Ue.width,Ue.height,ct,tt,Ue.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j+1,We,Ue.width,Ue.height,0,ct,tt,Ue.data)}}else{X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,ct,tt,Me[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,We,ct,tt,Me[we]);for(let j=0;j<Fe.length;j++){const Re=Fe[j];X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j+1,0,0,ct,tt,Re.image[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,j+1,We,ct,tt,Re.image[we])}}}S(I,xt)&&M(n.TEXTURE_CUBE_MAP),ye.__version=_e.version,I.onUpdate&&I.onUpdate(I)}O.__version=I.version}function be(O,I,ne,Se,_e,ye){const qe=s.convert(ne.format,ne.colorSpace),Ie=s.convert(ne.type),Oe=T(ne.internalFormat,qe,Ie,ne.colorSpace);if(!i.get(I).__hasExternalTextures){const pt=Math.max(1,I.width>>ye),Me=Math.max(1,I.height>>ye);_e===n.TEXTURE_3D||_e===n.TEXTURE_2D_ARRAY?t.texImage3D(_e,ye,Oe,pt,Me,I.depth,0,qe,Ie,null):t.texImage2D(_e,ye,Oe,pt,Me,0,qe,Ie,null)}t.bindFramebuffer(n.FRAMEBUFFER,O),pe(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,_e,i.get(ne).__webglTexture,0,Te(I)):(_e===n.TEXTURE_2D||_e>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,_e,i.get(ne).__webglTexture,ye),t.bindFramebuffer(n.FRAMEBUFFER,null)}function $e(O,I,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,O),I.depthBuffer&&!I.stencilBuffer){let Se=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ne||pe(I)){const _e=I.depthTexture;_e&&_e.isDepthTexture&&(_e.type===kr?Se=n.DEPTH_COMPONENT32F:_e.type===Ds&&(Se=n.DEPTH_COMPONENT24));const ye=Te(I);pe(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ye,Se,I.width,I.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ye,Se,I.width,I.height)}else n.renderbufferStorage(n.RENDERBUFFER,Se,I.width,I.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,O)}else if(I.depthBuffer&&I.stencilBuffer){const Se=Te(I);ne&&pe(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Se,n.DEPTH24_STENCIL8,I.width,I.height):pe(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Se,n.DEPTH24_STENCIL8,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,O)}else{const Se=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let _e=0;_e<Se.length;_e++){const ye=Se[_e],qe=s.convert(ye.format,ye.colorSpace),Ie=s.convert(ye.type),Oe=T(ye.internalFormat,qe,Ie,ye.colorSpace),it=Te(I);ne&&pe(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,it,Oe,I.width,I.height):pe(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,it,Oe,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function nt(O,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,O),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),$(I.depthTexture,0);const Se=i.get(I.depthTexture).__webglTexture,_e=Te(I);if(I.depthTexture.format===Do)pe(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(I.depthTexture.format===Ja)pe(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function Le(O){const I=i.get(O),ne=O.isWebGLCubeRenderTarget===!0;if(O.depthTexture&&!I.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");nt(I.__webglFramebuffer,O)}else if(ne){I.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[Se]),I.__webglDepthbuffer[Se]=n.createRenderbuffer(),$e(I.__webglDepthbuffer[Se],O,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),$e(I.__webglDepthbuffer,O,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ce(O,I,ne){const Se=i.get(O);I!==void 0&&be(Se.__webglFramebuffer,O,O.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&Le(O)}function G(O){const I=O.texture,ne=i.get(O),Se=i.get(I);O.addEventListener("dispose",D),O.isWebGLMultipleRenderTargets!==!0&&(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=I.version,o.memory.textures++);const _e=O.isWebGLCubeRenderTarget===!0,ye=O.isWebGLMultipleRenderTargets===!0,qe=x(O)||a;if(_e){ne.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)if(a&&I.mipmaps&&I.mipmaps.length>0){ne.__webglFramebuffer[Ie]=[];for(let Oe=0;Oe<I.mipmaps.length;Oe++)ne.__webglFramebuffer[Ie][Oe]=n.createFramebuffer()}else ne.__webglFramebuffer[Ie]=n.createFramebuffer()}else{if(a&&I.mipmaps&&I.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Ie=0;Ie<I.mipmaps.length;Ie++)ne.__webglFramebuffer[Ie]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(ye)if(r.drawBuffers){const Ie=O.texture;for(let Oe=0,it=Ie.length;Oe<it;Oe++){const pt=i.get(Ie[Oe]);pt.__webglTexture===void 0&&(pt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&O.samples>0&&pe(O)===!1){const Ie=ye?I:[I];ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Oe=0;Oe<Ie.length;Oe++){const it=Ie[Oe];ne.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[Oe]);const pt=s.convert(it.format,it.colorSpace),Me=s.convert(it.type),Ct=T(it.internalFormat,pt,Me,it.colorSpace,O.isXRRenderTarget===!0),xt=Te(O);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,Ct,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,ne.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),O.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),$e(ne.__webglDepthRenderbuffer,O,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(_e){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),Q(n.TEXTURE_CUBE_MAP,I,qe);for(let Ie=0;Ie<6;Ie++)if(a&&I.mipmaps&&I.mipmaps.length>0)for(let Oe=0;Oe<I.mipmaps.length;Oe++)be(ne.__webglFramebuffer[Ie][Oe],O,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Oe);else be(ne.__webglFramebuffer[Ie],O,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0);S(I,qe)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ye){const Ie=O.texture;for(let Oe=0,it=Ie.length;Oe<it;Oe++){const pt=Ie[Oe],Me=i.get(pt);t.bindTexture(n.TEXTURE_2D,Me.__webglTexture),Q(n.TEXTURE_2D,pt,qe),be(ne.__webglFramebuffer,O,pt,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D,0),S(pt,qe)&&M(n.TEXTURE_2D)}t.unbindTexture()}else{let Ie=n.TEXTURE_2D;if((O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(a?Ie=O.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ie,Se.__webglTexture),Q(Ie,I,qe),a&&I.mipmaps&&I.mipmaps.length>0)for(let Oe=0;Oe<I.mipmaps.length;Oe++)be(ne.__webglFramebuffer[Oe],O,I,n.COLOR_ATTACHMENT0,Ie,Oe);else be(ne.__webglFramebuffer,O,I,n.COLOR_ATTACHMENT0,Ie,0);S(I,qe)&&M(Ie),t.unbindTexture()}O.depthBuffer&&Le(O)}function xe(O){const I=x(O)||a,ne=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let Se=0,_e=ne.length;Se<_e;Se++){const ye=ne[Se];if(S(ye,I)){const qe=O.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ie=i.get(ye).__webglTexture;t.bindTexture(qe,Ie),M(qe),t.unbindTexture()}}}function de(O){if(a&&O.samples>0&&pe(O)===!1){const I=O.isWebGLMultipleRenderTargets?O.texture:[O.texture],ne=O.width,Se=O.height;let _e=n.COLOR_BUFFER_BIT;const ye=[],qe=O.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=i.get(O),Oe=O.isWebGLMultipleRenderTargets===!0;if(Oe)for(let it=0;it<I.length;it++)t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ie.__webglFramebuffer);for(let it=0;it<I.length;it++){ye.push(n.COLOR_ATTACHMENT0+it),O.depthBuffer&&ye.push(qe);const pt=Ie.__ignoreDepthValues!==void 0?Ie.__ignoreDepthValues:!1;if(pt===!1&&(O.depthBuffer&&(_e|=n.DEPTH_BUFFER_BIT),O.stencilBuffer&&(_e|=n.STENCIL_BUFFER_BIT)),Oe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ie.__webglColorRenderbuffer[it]),pt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[qe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[qe])),Oe){const Me=i.get(I[it]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Me,0)}n.blitFramebuffer(0,0,ne,Se,0,0,ne,Se,_e,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ye)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Oe)for(let it=0;it<I.length;it++){t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.RENDERBUFFER,Ie.__webglColorRenderbuffer[it]);const pt=i.get(I[it]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ie.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.TEXTURE_2D,pt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ie.__webglMultisampledFramebuffer)}}function Te(O){return Math.min(r.maxSamples,O.samples)}function pe(O){const I=i.get(O);return a&&O.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Ge(O){const I=o.render.frame;h.get(O)!==I&&(h.set(O,I),O.update())}function De(O,I){const ne=O.colorSpace,Se=O.format,_e=O.type;return O.isCompressedTexture===!0||O.isVideoTexture===!0||O.format===Hm||ne!==hs&&ne!==Yi&&(Ft.getTransfer(ne)===Wt?a===!1?e.has("EXT_sRGB")===!0&&Se===xi?(O.format=Hm,O.minFilter=Sn,O.generateMipmaps=!1):I=aS.sRGBToLinear(I):(Se!==xi||_e!==us)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),I}this.allocateTextureUnit=H,this.resetTextureUnits=oe,this.setTexture2D=$,this.setTexture2DArray=se,this.setTexture3D=N,this.setTextureCube=B,this.rebindTextures=Ce,this.setupRenderTarget=G,this.updateRenderTargetMipmap=xe,this.updateMultisampleRenderTarget=de,this.setupDepthRenderbuffer=Le,this.setupFrameBufferTexture=be,this.useMultisampledRTT=pe}function t3(n,e,t){const i=t.isWebGL2;function r(s,o=Yi){let a;const l=Ft.getTransfer(o);if(s===us)return n.UNSIGNED_BYTE;if(s===$1)return n.UNSIGNED_SHORT_4_4_4_4;if(s===J1)return n.UNSIGNED_SHORT_5_5_5_1;if(s===MR)return n.BYTE;if(s===wR)return n.SHORT;if(s===Tg)return n.UNSIGNED_SHORT;if(s===K1)return n.INT;if(s===Ds)return n.UNSIGNED_INT;if(s===kr)return n.FLOAT;if(s===Uu)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===ER)return n.ALPHA;if(s===xi)return n.RGBA;if(s===TR)return n.LUMINANCE;if(s===AR)return n.LUMINANCE_ALPHA;if(s===Do)return n.DEPTH_COMPONENT;if(s===Ja)return n.DEPTH_STENCIL;if(s===Hm)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===bR)return n.RED;if(s===Q1)return n.RED_INTEGER;if(s===CR)return n.RG;if(s===eS)return n.RG_INTEGER;if(s===tS)return n.RGBA_INTEGER;if(s===im||s===rm||s===sm||s===om)if(l===Wt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===im)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===rm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===sm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===om)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===im)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===rm)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===sm)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===om)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===qx||s===Zx||s===Kx||s===$x)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===qx)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Zx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Kx)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===$x)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===nS)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Jx||s===Qx)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Jx)return l===Wt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Qx)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===e_||s===t_||s===n_||s===i_||s===r_||s===s_||s===o_||s===a_||s===l_||s===u_||s===c_||s===f_||s===h_||s===d_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===e_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===t_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===n_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===i_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===r_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===s_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===o_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===a_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===l_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===u_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===c_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===f_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===h_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===d_)return l===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===am||s===p_||s===m_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===am)return l===Wt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===p_)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===m_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===PR||s===g_||s===v_||s===y_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===am)return a.COMPRESSED_RED_RGTC1_EXT;if(s===g_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===v_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===y_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===No?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class n3 extends tn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class du extends kt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const q5={type:"move"};class ly{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new du,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new du,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new du,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const w of e.hand.values()){const x=t.getJointPose(w,i),v=this._getHandJoint(f,w);x!==null&&(v.matrix.fromArray(x.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=x.radius),v.visible=x!==null}const h=f.joints["index-finger-tip"],d=f.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,y=.005;f.inputState.pinching&&p>m+y?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&p<=m-y&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(q5)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new du;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Z5 extends ps{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,f=null,h=null,d=null,p=null,m=null,y=null;const w=t.getContextAttributes();let x=null,v=null;const S=[],M=[],T=new me;let P=null;const b=new tn;b.layers.enable(1),b.viewport=new zt;const L=new tn;L.layers.enable(2),L.viewport=new zt;const D=[b,L],C=new n3;C.layers.enable(1),C.layers.enable(2);let R=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let le=S[Q];return le===void 0&&(le=new ly,S[Q]=le),le.getTargetRaySpace()},this.getControllerGrip=function(Q){let le=S[Q];return le===void 0&&(le=new ly,S[Q]=le),le.getGripSpace()},this.getHand=function(Q){let le=S[Q];return le===void 0&&(le=new ly,S[Q]=le),le.getHandSpace()};function Z(Q){const le=M.indexOf(Q.inputSource);if(le===-1)return;const ge=S[le];ge!==void 0&&(ge.update(Q.inputSource,Q.frame,f||o),ge.dispatchEvent({type:Q.type,data:Q.inputSource}))}function oe(){r.removeEventListener("select",Z),r.removeEventListener("selectstart",Z),r.removeEventListener("selectend",Z),r.removeEventListener("squeeze",Z),r.removeEventListener("squeezestart",Z),r.removeEventListener("squeezeend",Z),r.removeEventListener("end",oe),r.removeEventListener("inputsourceschange",H);for(let Q=0;Q<S.length;Q++){const le=M[Q];le!==null&&(M[Q]=null,S[Q].disconnect(le))}R=null,z=null,e.setRenderTarget(x),m=null,p=null,d=null,r=null,v=null,J.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(T.width,T.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){s=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){a=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(Q){f=Q},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(Q){if(r=Q,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",Z),r.addEventListener("selectstart",Z),r.addEventListener("selectend",Z),r.addEventListener("squeeze",Z),r.addEventListener("squeezestart",Z),r.addEventListener("squeezeend",Z),r.addEventListener("end",oe),r.addEventListener("inputsourceschange",H),w.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(T),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const le={antialias:r.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,le),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),v=new Wr(m.framebufferWidth,m.framebufferHeight,{format:xi,type:us,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let le=null,ge=null,Ee=null;w.depth&&(Ee=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,le=w.stencil?Ja:Do,ge=w.stencil?No:Ds);const be={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(be),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),v=new Wr(p.textureWidth,p.textureHeight,{format:xi,type:us,depthTexture:new pS(p.textureWidth,p.textureHeight,ge,void 0,void 0,void 0,void 0,void 0,void 0,le),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const $e=e.properties.get(v);$e.__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),f=null,o=await r.requestReferenceSpace(a),J.setContext(r),J.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function H(Q){for(let le=0;le<Q.removed.length;le++){const ge=Q.removed[le],Ee=M.indexOf(ge);Ee>=0&&(M[Ee]=null,S[Ee].disconnect(ge))}for(let le=0;le<Q.added.length;le++){const ge=Q.added[le];let Ee=M.indexOf(ge);if(Ee===-1){for(let $e=0;$e<S.length;$e++)if($e>=M.length){M.push(ge),Ee=$e;break}else if(M[$e]===null){M[$e]=ge,Ee=$e;break}if(Ee===-1)break}const be=S[Ee];be&&be.connect(ge)}}const K=new k,$=new k;function se(Q,le,ge){K.setFromMatrixPosition(le.matrixWorld),$.setFromMatrixPosition(ge.matrixWorld);const Ee=K.distanceTo($),be=le.projectionMatrix.elements,$e=ge.projectionMatrix.elements,nt=be[14]/(be[10]-1),Le=be[14]/(be[10]+1),Ce=(be[9]+1)/be[5],G=(be[9]-1)/be[5],xe=(be[8]-1)/be[0],de=($e[8]+1)/$e[0],Te=nt*xe,pe=nt*de,Ge=Ee/(-xe+de),De=Ge*-xe;le.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(De),Q.translateZ(Ge),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const O=nt+Ge,I=Le+Ge,ne=Te-De,Se=pe+(Ee-De),_e=Ce*Le/I*O,ye=G*Le/I*O;Q.projectionMatrix.makePerspective(ne,Se,_e,ye,O,I),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function N(Q,le){le===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(le.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(r===null)return;C.near=L.near=b.near=Q.near,C.far=L.far=b.far=Q.far,(R!==C.near||z!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),R=C.near,z=C.far);const le=Q.parent,ge=C.cameras;N(C,le);for(let Ee=0;Ee<ge.length;Ee++)N(ge[Ee],le);ge.length===2?se(C,b,L):C.projectionMatrix.copy(b.projectionMatrix),B(Q,C,le)};function B(Q,le,ge){ge===null?Q.matrix.copy(le.matrixWorld):(Q.matrix.copy(ge.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(le.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(le.projectionMatrix),Q.projectionMatrixInverse.copy(le.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=Fu*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(Q){l=Q,p!==null&&(p.fixedFoveation=Q),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Q)};let V=null;function Y(Q,le){if(h=le.getViewerPose(f||o),y=le,h!==null){const ge=h.views;m!==null&&(e.setRenderTargetFramebuffer(v,m.framebuffer),e.setRenderTarget(v));let Ee=!1;ge.length!==C.cameras.length&&(C.cameras.length=0,Ee=!0);for(let be=0;be<ge.length;be++){const $e=ge[be];let nt=null;if(m!==null)nt=m.getViewport($e);else{const Ce=d.getViewSubImage(p,$e);nt=Ce.viewport,be===0&&(e.setRenderTargetTextures(v,Ce.colorTexture,p.ignoreDepthValues?void 0:Ce.depthStencilTexture),e.setRenderTarget(v))}let Le=D[be];Le===void 0&&(Le=new tn,Le.layers.enable(be),Le.viewport=new zt,D[be]=Le),Le.matrix.fromArray($e.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray($e.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(nt.x,nt.y,nt.width,nt.height),be===0&&(C.matrix.copy(Le.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Ee===!0&&C.cameras.push(Le)}}for(let ge=0;ge<S.length;ge++){const Ee=M[ge],be=S[ge];Ee!==null&&be!==void 0&&be.update(Ee,le,f||o)}V&&V(Q,le),le.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:le}),y=null}const J=new ZR;J.setAnimationLoop(Y),this.setAnimationLoop=function(Q){V=Q},this.dispose=function(){}}}function K5(n,e){function t(x,v){x.matrixAutoUpdate===!0&&x.updateMatrix(),v.value.copy(x.matrix)}function i(x,v){v.color.getRGB(x.fogColor.value,YR(n)),v.isFog?(x.fogNear.value=v.near,x.fogFar.value=v.far):v.isFogExp2&&(x.fogDensity.value=v.density)}function r(x,v,S,M,T){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(x,v):v.isMeshToonMaterial?(s(x,v),d(x,v)):v.isMeshPhongMaterial?(s(x,v),h(x,v)):v.isMeshStandardMaterial?(s(x,v),p(x,v),v.isMeshPhysicalMaterial&&m(x,v,T)):v.isMeshMatcapMaterial?(s(x,v),y(x,v)):v.isMeshDepthMaterial?s(x,v):v.isMeshDistanceMaterial?(s(x,v),w(x,v)):v.isMeshNormalMaterial?s(x,v):v.isLineBasicMaterial?(o(x,v),v.isLineDashedMaterial&&a(x,v)):v.isPointsMaterial?l(x,v,S,M):v.isSpriteMaterial?f(x,v):v.isShadowMaterial?(x.color.value.copy(v.color),x.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(x,v){x.opacity.value=v.opacity,v.color&&x.diffuse.value.copy(v.color),v.emissive&&x.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(x.map.value=v.map,t(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,t(v.alphaMap,x.alphaMapTransform)),v.bumpMap&&(x.bumpMap.value=v.bumpMap,t(v.bumpMap,x.bumpMapTransform),x.bumpScale.value=v.bumpScale,v.side===Si&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,t(v.normalMap,x.normalMapTransform),x.normalScale.value.copy(v.normalScale),v.side===Si&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,t(v.displacementMap,x.displacementMapTransform),x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias),v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,x.emissiveMapTransform)),v.specularMap&&(x.specularMap.value=v.specularMap,t(v.specularMap,x.specularMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest);const S=e.get(v).envMap;if(S&&(x.envMap.value=S,x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=v.reflectivity,x.ior.value=v.ior,x.refractionRatio.value=v.refractionRatio),v.lightMap){x.lightMap.value=v.lightMap;const M=n._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=v.lightMapIntensity*M,t(v.lightMap,x.lightMapTransform)}v.aoMap&&(x.aoMap.value=v.aoMap,x.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,x.aoMapTransform))}function o(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,v.map&&(x.map.value=v.map,t(v.map,x.mapTransform))}function a(x,v){x.dashSize.value=v.dashSize,x.totalSize.value=v.dashSize+v.gapSize,x.scale.value=v.scale}function l(x,v,S,M){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.size.value=v.size*S,x.scale.value=M*.5,v.map&&(x.map.value=v.map,t(v.map,x.uvTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,t(v.alphaMap,x.alphaMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function f(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.rotation.value=v.rotation,v.map&&(x.map.value=v.map,t(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,t(v.alphaMap,x.alphaMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function h(x,v){x.specular.value.copy(v.specular),x.shininess.value=Math.max(v.shininess,1e-4)}function d(x,v){v.gradientMap&&(x.gradientMap.value=v.gradientMap)}function p(x,v){x.metalness.value=v.metalness,v.metalnessMap&&(x.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,x.metalnessMapTransform)),x.roughness.value=v.roughness,v.roughnessMap&&(x.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,x.roughnessMapTransform)),e.get(v).envMap&&(x.envMapIntensity.value=v.envMapIntensity)}function m(x,v,S){x.ior.value=v.ior,v.sheen>0&&(x.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),x.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(x.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,x.sheenColorMapTransform)),v.sheenRoughnessMap&&(x.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,x.sheenRoughnessMapTransform))),v.clearcoat>0&&(x.clearcoat.value=v.clearcoat,x.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(x.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,x.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(x.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Si&&x.clearcoatNormalScale.value.negate())),v.iridescence>0&&(x.iridescence.value=v.iridescence,x.iridescenceIOR.value=v.iridescenceIOR,x.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(x.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,x.iridescenceMapTransform)),v.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),v.transmission>0&&(x.transmission.value=v.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&&(x.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,x.transmissionMapTransform)),x.thickness.value=v.thickness,v.thicknessMap&&(x.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=v.attenuationDistance,x.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(x.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(x.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=v.specularIntensity,x.specularColor.value.copy(v.specularColor),v.specularColorMap&&(x.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,x.specularColorMapTransform)),v.specularIntensityMap&&(x.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,v){v.matcap&&(x.matcap.value=v.matcap)}function w(x,v){const S=e.get(v).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function $5(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,M){const T=M.program;i.uniformBlockBinding(S,T)}function f(S,M){let T=r[S.id];T===void 0&&(y(S),T=h(S),r[S.id]=T,S.addEventListener("dispose",x));const P=M.program;i.updateUBOMapping(S,P);const b=e.render.frame;s[S.id]!==b&&(p(S),s[S.id]=b)}function h(S){const M=d();S.__bindingPointIndex=M;const T=n.createBuffer(),P=S.__size,b=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,P,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,T),T}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const M=r[S.id],T=S.uniforms,P=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let b=0,L=T.length;b<L;b++){const D=Array.isArray(T[b])?T[b]:[T[b]];for(let C=0,R=D.length;C<R;C++){const z=D[C];if(m(z,b,C,P)===!0){const Z=z.__offset,oe=Array.isArray(z.value)?z.value:[z.value];let H=0;for(let K=0;K<oe.length;K++){const $=oe[K],se=w($);typeof $=="number"||typeof $=="boolean"?(z.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,Z+H,z.__data)):$.isMatrix3?(z.__data[0]=$.elements[0],z.__data[1]=$.elements[1],z.__data[2]=$.elements[2],z.__data[3]=0,z.__data[4]=$.elements[3],z.__data[5]=$.elements[4],z.__data[6]=$.elements[5],z.__data[7]=0,z.__data[8]=$.elements[6],z.__data[9]=$.elements[7],z.__data[10]=$.elements[8],z.__data[11]=0):($.toArray(z.__data,H),H+=se.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Z,z.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,M,T,P){const b=S.value,L=M+"_"+T;if(P[L]===void 0)return typeof b=="number"||typeof b=="boolean"?P[L]=b:P[L]=b.clone(),!0;{const D=P[L];if(typeof b=="number"||typeof b=="boolean"){if(D!==b)return P[L]=b,!0}else if(D.equals(b)===!1)return D.copy(b),!0}return!1}function y(S){const M=S.uniforms;let T=0;const P=16;for(let L=0,D=M.length;L<D;L++){const C=Array.isArray(M[L])?M[L]:[M[L]];for(let R=0,z=C.length;R<z;R++){const Z=C[R],oe=Array.isArray(Z.value)?Z.value:[Z.value];for(let H=0,K=oe.length;H<K;H++){const $=oe[H],se=w($),N=T%P;N!==0&&P-N<se.boundary&&(T+=P-N),Z.__data=new Float32Array(se.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=T,T+=se.storage}}}const b=T%P;return b>0&&(T+=P-b),S.__size=T,S.__cache={},this}function w(S){const M={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(M.boundary=4,M.storage=4):S.isVector2?(M.boundary=8,M.storage=8):S.isVector3||S.isColor?(M.boundary=16,M.storage=12):S.isVector4?(M.boundary=16,M.storage=16):S.isMatrix3?(M.boundary=48,M.storage=48):S.isMatrix4?(M.boundary=64,M.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),M}function x(S){const M=S.target;M.removeEventListener("dispose",x);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function v(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:f,dispose:v}}class vS{constructor(e={}){const{canvas:t=WR(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),y=new Int32Array(4);let w=null,x=null;const v=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Rn,this._useLegacyLights=!1,this.toneMapping=ls,this.toneMappingExposure=1;const M=this;let T=!1,P=0,b=0,L=null,D=-1,C=null;const R=new zt,z=new zt;let Z=null;const oe=new He(0);let H=0,K=t.width,$=t.height,se=1,N=null,B=null;const V=new zt(0,0,K,$),Y=new zt(0,0,K,$);let J=!1;const Q=new yh;let le=!1,ge=!1,Ee=null;const be=new ft,$e=new me,nt=new k,Le={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ce(){return L===null?se:1}let G=i;function xe(U,ie){for(let ue=0;ue<U.length;ue++){const ce=U[ue],ae=t.getContext(ce,ie);if(ae!==null)return ae}return null}try{const U={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${hh}`),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",j,!1),t.addEventListener("webglcontextcreationerror",Re,!1),G===null){const ie=["webgl2","webgl","experimental-webgl"];if(M.isWebGL1Renderer===!0&&ie.shift(),G=xe(ie,U),G===null)throw xe(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&G instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let de,Te,pe,Ge,De,O,I,ne,Se,_e,ye,qe,Ie,Oe,it,pt,Me,Ct,xt,ct,tt,We,X,ve;function Be(){de=new fB(G),Te=new sB(G,de,e),de.init(Te),We=new t3(G,de,Te),pe=new X5(G,de,Te),Ge=new pB(G),De=new D5,O=new Y5(G,de,pe,De,Te,We,Ge),I=new aB(M),ne=new cB(M),Se=new Mk(G,Te),X=new iB(G,de,Se,Te),_e=new hB(G,Se,Ge,X),ye=new yB(G,_e,Se,Ge),xt=new vB(G,Te,O),pt=new oB(De),qe=new N5(M,I,ne,de,Te,X,pt),Ie=new K5(M,De),Oe=new U5,it=new H5(de,Te),Ct=new nB(M,I,ne,pe,ye,p,l),Me=new j5(M,ye,Te),ve=new $5(G,Ge,Te,pe),ct=new rB(G,de,Ge,Te),tt=new dB(G,de,Ge,Te),Ge.programs=qe.programs,M.capabilities=Te,M.extensions=de,M.properties=De,M.renderLists=Oe,M.shadowMap=Me,M.state=pe,M.info=Ge}Be();const Fe=new Z5(M,G);this.xr=Fe,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const U=de.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=de.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return se},this.setPixelRatio=function(U){U!==void 0&&(se=U,this.setSize(K,$,!1))},this.getSize=function(U){return U.set(K,$)},this.setSize=function(U,ie,ue=!0){if(Fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=U,$=ie,t.width=Math.floor(U*se),t.height=Math.floor(ie*se),ue===!0&&(t.style.width=U+"px",t.style.height=ie+"px"),this.setViewport(0,0,U,ie)},this.getDrawingBufferSize=function(U){return U.set(K*se,$*se).floor()},this.setDrawingBufferSize=function(U,ie,ue){K=U,$=ie,se=ue,t.width=Math.floor(U*ue),t.height=Math.floor(ie*ue),this.setViewport(0,0,U,ie)},this.getCurrentViewport=function(U){return U.copy(R)},this.getViewport=function(U){return U.copy(V)},this.setViewport=function(U,ie,ue,ce){U.isVector4?V.set(U.x,U.y,U.z,U.w):V.set(U,ie,ue,ce),pe.viewport(R.copy(V).multiplyScalar(se).floor())},this.getScissor=function(U){return U.copy(Y)},this.setScissor=function(U,ie,ue,ce){U.isVector4?Y.set(U.x,U.y,U.z,U.w):Y.set(U,ie,ue,ce),pe.scissor(z.copy(Y).multiplyScalar(se).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(U){pe.setScissorTest(J=U)},this.setOpaqueSort=function(U){N=U},this.setTransparentSort=function(U){B=U},this.getClearColor=function(U){return U.copy(Ct.getClearColor())},this.setClearColor=function(){Ct.setClearColor.apply(Ct,arguments)},this.getClearAlpha=function(){return Ct.getClearAlpha()},this.setClearAlpha=function(){Ct.setClearAlpha.apply(Ct,arguments)},this.clear=function(U=!0,ie=!0,ue=!0){let ce=0;if(U){let ae=!1;if(L!==null){const Ve=L.texture.format;ae=Ve===tS||Ve===eS||Ve===Q1}if(ae){const Ve=L.texture.type,Qe=Ve===us||Ve===Ds||Ve===Tg||Ve===No||Ve===$1||Ve===J1,ot=Ct.getClearColor(),at=Ct.getClearAlpha(),mt=ot.r,dt=ot.g,gt=ot.b;Qe?(m[0]=mt,m[1]=dt,m[2]=gt,m[3]=at,G.clearBufferuiv(G.COLOR,0,m)):(y[0]=mt,y[1]=dt,y[2]=gt,y[3]=at,G.clearBufferiv(G.COLOR,0,y))}else ce|=G.COLOR_BUFFER_BIT}ie&&(ce|=G.DEPTH_BUFFER_BIT),ue&&(ce|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",j,!1),t.removeEventListener("webglcontextcreationerror",Re,!1),Oe.dispose(),it.dispose(),De.dispose(),I.dispose(),ne.dispose(),ye.dispose(),X.dispose(),ve.dispose(),qe.dispose(),Fe.dispose(),Fe.removeEventListener("sessionstart",Kt),Fe.removeEventListener("sessionend",Lt),Ee&&(Ee.dispose(),Ee=null),Gn.stop()};function we(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function j(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const U=Ge.autoReset,ie=Me.enabled,ue=Me.autoUpdate,ce=Me.needsUpdate,ae=Me.type;Be(),Ge.autoReset=U,Me.enabled=ie,Me.autoUpdate=ue,Me.needsUpdate=ce,Me.type=ae}function Re(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Ue(U){const ie=U.target;ie.removeEventListener("dispose",Ue),rt(ie)}function rt(U){Ze(U),De.remove(U)}function Ze(U){const ie=De.get(U).programs;ie!==void 0&&(ie.forEach(function(ue){qe.releaseProgram(ue)}),U.isShaderMaterial&&qe.releaseShaderCache(U))}this.renderBufferDirect=function(U,ie,ue,ce,ae,Ve){ie===null&&(ie=Le);const Qe=ae.isMesh&&ae.matrixWorld.determinant()<0,ot=o0(U,ie,ue,ce,ae);pe.setMaterial(ce,Qe);let at=ue.index,mt=1;if(ce.wireframe===!0){if(at=_e.getWireframeAttribute(ue),at===void 0)return;mt=2}const dt=ue.drawRange,gt=ue.attributes.position;let nn=dt.start*mt,Wn=(dt.start+dt.count)*mt;Ve!==null&&(nn=Math.max(nn,Ve.start*mt),Wn=Math.min(Wn,(Ve.start+Ve.count)*mt)),at!==null?(nn=Math.max(nn,0),Wn=Math.min(Wn,at.count)):gt!=null&&(nn=Math.max(nn,0),Wn=Math.min(Wn,gt.count));const Xt=Wn-nn;if(Xt<0||Xt===1/0)return;X.setup(ae,ce,ot,ue,at);let On,lt=ct;if(at!==null&&(On=Se.get(at),lt=tt,lt.setIndex(On)),ae.isMesh)ce.wireframe===!0?(pe.setLineWidth(ce.wireframeLinewidth*Ce()),lt.setMode(G.LINES)):lt.setMode(G.TRIANGLES);else if(ae.isLine){let Xe=ce.linewidth;Xe===void 0&&(Xe=1),pe.setLineWidth(Xe*Ce()),ae.isLineSegments?lt.setMode(G.LINES):ae.isLineLoop?lt.setMode(G.LINE_LOOP):lt.setMode(G.LINE_STRIP)}else ae.isPoints?lt.setMode(G.POINTS):ae.isSprite&&lt.setMode(G.TRIANGLES);if(ae.isBatchedMesh)lt.renderMultiDraw(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount);else if(ae.isInstancedMesh)lt.renderInstances(nn,Xt,ae.count);else if(ue.isInstancedBufferGeometry){const Xe=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,nr=Math.min(ue.instanceCount,Xe);lt.renderInstances(nn,Xt,nr)}else lt.render(nn,Xt)};function bt(U,ie,ue){U.transparent===!0&&U.side===Ur&&U.forceSinglePass===!1?(U.side=Si,U.needsUpdate=!0,fl(U,ie,ue),U.side=js,U.needsUpdate=!0,fl(U,ie,ue),U.side=Ur):fl(U,ie,ue)}this.compile=function(U,ie,ue=null){ue===null&&(ue=U),x=it.get(ue),x.init(),S.push(x),ue.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ie.layers)&&(x.pushLight(ae),ae.castShadow&&x.pushShadow(ae))}),U!==ue&&U.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ie.layers)&&(x.pushLight(ae),ae.castShadow&&x.pushShadow(ae))}),x.setupLights(M._useLegacyLights);const ce=new Set;return U.traverse(function(ae){const Ve=ae.material;if(Ve)if(Array.isArray(Ve))for(let Qe=0;Qe<Ve.length;Qe++){const ot=Ve[Qe];bt(ot,ue,ae),ce.add(ot)}else bt(Ve,ue,ae),ce.add(Ve)}),S.pop(),x=null,ce},this.compileAsync=function(U,ie,ue=null){const ce=this.compile(U,ie,ue);return new Promise(ae=>{function Ve(){if(ce.forEach(function(Qe){De.get(Qe).currentProgram.isReady()&&ce.delete(Qe)}),ce.size===0){ae(U);return}setTimeout(Ve,10)}de.get("KHR_parallel_shader_compile")!==null?Ve():setTimeout(Ve,10)})};let Rt=null;function Ht(U){Rt&&Rt(U)}function Kt(){Gn.stop()}function Lt(){Gn.start()}const Gn=new ZR;Gn.setAnimationLoop(Ht),typeof self<"u"&&Gn.setContext(self),this.setAnimationLoop=function(U){Rt=U,Fe.setAnimationLoop(U),U===null?Gn.stop():Gn.start()},Fe.addEventListener("sessionstart",Kt),Fe.addEventListener("sessionend",Lt),this.render=function(U,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),Fe.enabled===!0&&Fe.isPresenting===!0&&(Fe.cameraAutoUpdate===!0&&Fe.updateCamera(ie),ie=Fe.getCamera()),U.isScene===!0&&U.onBeforeRender(M,U,ie,L),x=it.get(U,S.length),x.init(),S.push(x),be.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),Q.setFromProjectionMatrix(be),ge=this.localClippingEnabled,le=pt.init(this.clippingPlanes,ge),w=Oe.get(U,v.length),w.init(),v.push(w),tr(U,ie,0,M.sortObjects),w.finish(),M.sortObjects===!0&&w.sort(N,B),this.info.render.frame++,le===!0&&pt.beginShadows();const ue=x.state.shadowsArray;if(Me.render(ue,U,ie),le===!0&&pt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ct.render(w,U),x.setupLights(M._useLegacyLights),ie.isArrayCamera){const ce=ie.cameras;for(let ae=0,Ve=ce.length;ae<Ve;ae++){const Qe=ce[ae];Ju(w,U,Qe,Qe.viewport)}}else Ju(w,U,ie);L!==null&&(O.updateMultisampleRenderTarget(L),O.updateRenderTargetMipmap(L)),U.isScene===!0&&U.onAfterRender(M,U,ie),X.resetDefaultState(),D=-1,C=null,S.pop(),S.length>0?x=S[S.length-1]:x=null,v.pop(),v.length>0?w=v[v.length-1]:w=null};function tr(U,ie,ue,ce){if(U.visible===!1)return;if(U.layers.test(ie.layers)){if(U.isGroup)ue=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(ie);else if(U.isLight)x.pushLight(U),U.castShadow&&x.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||Q.intersectsSprite(U)){ce&&nt.setFromMatrixPosition(U.matrixWorld).applyMatrix4(be);const Qe=ye.update(U),ot=U.material;ot.visible&&w.push(U,Qe,ot,ue,nt.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||Q.intersectsObject(U))){const Qe=ye.update(U),ot=U.material;if(ce&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),nt.copy(U.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),nt.copy(Qe.boundingSphere.center)),nt.applyMatrix4(U.matrixWorld).applyMatrix4(be)),Array.isArray(ot)){const at=Qe.groups;for(let mt=0,dt=at.length;mt<dt;mt++){const gt=at[mt],nn=ot[gt.materialIndex];nn&&nn.visible&&w.push(U,Qe,nn,ue,nt.z,gt)}}else ot.visible&&w.push(U,Qe,ot,ue,nt.z,null)}}const Ve=U.children;for(let Qe=0,ot=Ve.length;Qe<ot;Qe++)tr(Ve[Qe],ie,ue,ce)}function Ju(U,ie,ue,ce){const ae=U.opaque,Ve=U.transmissive,Qe=U.transparent;x.setupLightsView(ue),le===!0&&pt.setGlobalState(M.clippingPlanes,ue),Ve.length>0&&Qu(ae,Ve,ie,ue),ce&&pe.viewport(R.copy(ce)),ae.length>0&&cl(ae,ie,ue),Ve.length>0&&cl(Ve,ie,ue),Qe.length>0&&cl(Qe,ie,ue),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function Qu(U,ie,ue,ce){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;const Ve=Te.isWebGL2;Ee===null&&(Ee=new Wr(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")?Uu:us,minFilter:Bo,samples:Ve?4:0})),M.getDrawingBufferSize($e),Ve?Ee.setSize($e.x,$e.y):Ee.setSize(Gm($e.x),Gm($e.y));const Qe=M.getRenderTarget();M.setRenderTarget(Ee),M.getClearColor(oe),H=M.getClearAlpha(),H<1&&M.setClearColor(16777215,.5),M.clear();const ot=M.toneMapping;M.toneMapping=ls,cl(U,ue,ce),O.updateMultisampleRenderTarget(Ee),O.updateRenderTargetMipmap(Ee);let at=!1;for(let mt=0,dt=ie.length;mt<dt;mt++){const gt=ie[mt],nn=gt.object,Wn=gt.geometry,Xt=gt.material,On=gt.group;if(Xt.side===Ur&&nn.layers.test(ce.layers)){const lt=Xt.side;Xt.side=Si,Xt.needsUpdate=!0,Ks(nn,ue,ce,Wn,Xt,On),Xt.side=lt,Xt.needsUpdate=!0,at=!0}}at===!0&&(O.updateMultisampleRenderTarget(Ee),O.updateRenderTargetMipmap(Ee)),M.setRenderTarget(Qe),M.setClearColor(oe,H),M.toneMapping=ot}function cl(U,ie,ue){const ce=ie.isScene===!0?ie.overrideMaterial:null;for(let ae=0,Ve=U.length;ae<Ve;ae++){const Qe=U[ae],ot=Qe.object,at=Qe.geometry,mt=ce===null?Qe.material:ce,dt=Qe.group;ot.layers.test(ue.layers)&&Ks(ot,ie,ue,at,mt,dt)}}function Ks(U,ie,ue,ce,ae,Ve){U.onBeforeRender(M,ie,ue,ce,ae,Ve),U.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),ae.onBeforeRender(M,ie,ue,ce,U,Ve),ae.transparent===!0&&ae.side===Ur&&ae.forceSinglePass===!1?(ae.side=Si,ae.needsUpdate=!0,M.renderBufferDirect(ue,ie,ce,ae,U,Ve),ae.side=js,ae.needsUpdate=!0,M.renderBufferDirect(ue,ie,ce,ae,U,Ve),ae.side=Ur):M.renderBufferDirect(ue,ie,ce,ae,U,Ve),U.onAfterRender(M,ie,ue,ce,ae,Ve)}function fl(U,ie,ue){ie.isScene!==!0&&(ie=Le);const ce=De.get(U),ae=x.state.lights,Ve=x.state.shadowsArray,Qe=ae.state.version,ot=qe.getParameters(U,ae.state,Ve,ie,ue),at=qe.getProgramCacheKey(ot);let mt=ce.programs;ce.environment=U.isMeshStandardMaterial?ie.environment:null,ce.fog=ie.fog,ce.envMap=(U.isMeshStandardMaterial?ne:I).get(U.envMap||ce.environment),mt===void 0&&(U.addEventListener("dispose",Ue),mt=new Map,ce.programs=mt);let dt=mt.get(at);if(dt!==void 0){if(ce.currentProgram===dt&&ce.lightsStateVersion===Qe)return Ih(U,ot),dt}else ot.uniforms=qe.getUniforms(U),U.onBuild(ue,ot,M),U.onBeforeCompile(ot,M),dt=qe.acquireProgram(ot,at),mt.set(at,dt),ce.uniforms=ot.uniforms;const gt=ce.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(gt.clippingPlanes=pt.uniform),Ih(U,ot),ce.needsLights=l0(U),ce.lightsStateVersion=Qe,ce.needsLights&&(gt.ambientLightColor.value=ae.state.ambient,gt.lightProbe.value=ae.state.probe,gt.directionalLights.value=ae.state.directional,gt.directionalLightShadows.value=ae.state.directionalShadow,gt.spotLights.value=ae.state.spot,gt.spotLightShadows.value=ae.state.spotShadow,gt.rectAreaLights.value=ae.state.rectArea,gt.ltc_1.value=ae.state.rectAreaLTC1,gt.ltc_2.value=ae.state.rectAreaLTC2,gt.pointLights.value=ae.state.point,gt.pointLightShadows.value=ae.state.pointShadow,gt.hemisphereLights.value=ae.state.hemi,gt.directionalShadowMap.value=ae.state.directionalShadowMap,gt.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,gt.spotShadowMap.value=ae.state.spotShadowMap,gt.spotLightMatrix.value=ae.state.spotLightMatrix,gt.spotLightMap.value=ae.state.spotLightMap,gt.pointShadowMap.value=ae.state.pointShadowMap,gt.pointShadowMatrix.value=ae.state.pointShadowMatrix),ce.currentProgram=dt,ce.uniformsList=null,dt}function Lh(U){if(U.uniformsList===null){const ie=U.currentProgram.getUniforms();U.uniformsList=um.seqWithValue(ie.seq,U.uniforms)}return U.uniformsList}function Ih(U,ie){const ue=De.get(U);ue.outputColorSpace=ie.outputColorSpace,ue.batching=ie.batching,ue.instancing=ie.instancing,ue.instancingColor=ie.instancingColor,ue.skinning=ie.skinning,ue.morphTargets=ie.morphTargets,ue.morphNormals=ie.morphNormals,ue.morphColors=ie.morphColors,ue.morphTargetsCount=ie.morphTargetsCount,ue.numClippingPlanes=ie.numClippingPlanes,ue.numIntersection=ie.numClipIntersection,ue.vertexAlphas=ie.vertexAlphas,ue.vertexTangents=ie.vertexTangents,ue.toneMapping=ie.toneMapping}function o0(U,ie,ue,ce,ae){ie.isScene!==!0&&(ie=Le),O.resetTextureUnits();const Ve=ie.fog,Qe=ce.isMeshStandardMaterial?ie.environment:null,ot=L===null?M.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:hs,at=(ce.isMeshStandardMaterial?ne:I).get(ce.envMap||Qe),mt=ce.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,dt=!!ue.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),gt=!!ue.morphAttributes.position,nn=!!ue.morphAttributes.normal,Wn=!!ue.morphAttributes.color;let Xt=ls;ce.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Xt=M.toneMapping);const On=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,lt=On!==void 0?On.length:0,Xe=De.get(ce),nr=x.state.lights;if(le===!0&&(ge===!0||U!==C)){const jn=U===C&&ce.id===D;pt.setState(ce,U,jn)}let Tt=!1;ce.version===Xe.__version?(Xe.needsLights&&Xe.lightsStateVersion!==nr.state.version||Xe.outputColorSpace!==ot||ae.isBatchedMesh&&Xe.batching===!1||!ae.isBatchedMesh&&Xe.batching===!0||ae.isInstancedMesh&&Xe.instancing===!1||!ae.isInstancedMesh&&Xe.instancing===!0||ae.isSkinnedMesh&&Xe.skinning===!1||!ae.isSkinnedMesh&&Xe.skinning===!0||ae.isInstancedMesh&&Xe.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&Xe.instancingColor===!1&&ae.instanceColor!==null||Xe.envMap!==at||ce.fog===!0&&Xe.fog!==Ve||Xe.numClippingPlanes!==void 0&&(Xe.numClippingPlanes!==pt.numPlanes||Xe.numIntersection!==pt.numIntersection)||Xe.vertexAlphas!==mt||Xe.vertexTangents!==dt||Xe.morphTargets!==gt||Xe.morphNormals!==nn||Xe.morphColors!==Wn||Xe.toneMapping!==Xt||Te.isWebGL2===!0&&Xe.morphTargetsCount!==lt)&&(Tt=!0):(Tt=!0,Xe.__version=ce.version);let cn=Xe.currentProgram;Tt===!0&&(cn=fl(ce,ie,ae));let qr=!1,ir=!1,Un=!1;const gn=cn.getUniforms(),Zr=Xe.uniforms;if(pe.useProgram(cn.program)&&(qr=!0,ir=!0,Un=!0),ce.id!==D&&(D=ce.id,ir=!0),qr||C!==U){gn.setValue(G,"projectionMatrix",U.projectionMatrix),gn.setValue(G,"viewMatrix",U.matrixWorldInverse);const jn=gn.map.cameraPosition;jn!==void 0&&jn.setValue(G,nt.setFromMatrixPosition(U.matrixWorld)),Te.logarithmicDepthBuffer&&gn.setValue(G,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&gn.setValue(G,"isOrthographic",U.isOrthographicCamera===!0),C!==U&&(C=U,ir=!0,Un=!0)}if(ae.isSkinnedMesh){gn.setOptional(G,ae,"bindMatrix"),gn.setOptional(G,ae,"bindMatrixInverse");const jn=ae.skeleton;jn&&(Te.floatVertexTextures?(jn.boneTexture===null&&jn.computeBoneTexture(),gn.setValue(G,"boneTexture",jn.boneTexture,O)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ae.isBatchedMesh&&(gn.setOptional(G,ae,"batchingTexture"),gn.setValue(G,"batchingTexture",ae._matricesTexture,O));const hl=ue.morphAttributes;if((hl.position!==void 0||hl.normal!==void 0||hl.color!==void 0&&Te.isWebGL2===!0)&&xt.update(ae,ue,cn),(ir||Xe.receiveShadow!==ae.receiveShadow)&&(Xe.receiveShadow=ae.receiveShadow,gn.setValue(G,"receiveShadow",ae.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(Zr.envMap.value=at,Zr.flipEnvMap.value=at.isCubeTexture&&at.isRenderTargetTexture===!1?-1:1),ir&&(gn.setValue(G,"toneMappingExposure",M.toneMappingExposure),Xe.needsLights&&a0(Zr,Un),Ve&&ce.fog===!0&&Ie.refreshFogUniforms(Zr,Ve),Ie.refreshMaterialUniforms(Zr,ce,se,$,Ee),um.upload(G,Lh(Xe),Zr,O)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(um.upload(G,Lh(Xe),Zr,O),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&gn.setValue(G,"center",ae.center),gn.setValue(G,"modelViewMatrix",ae.modelViewMatrix),gn.setValue(G,"normalMatrix",ae.normalMatrix),gn.setValue(G,"modelMatrix",ae.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const jn=ce.uniformsGroups;for(let dl=0,zi=jn.length;dl<zi;dl++)if(Te.isWebGL2){const Nh=jn[dl];ve.update(Nh,cn),ve.bind(Nh,cn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return cn}function a0(U,ie){U.ambientLightColor.needsUpdate=ie,U.lightProbe.needsUpdate=ie,U.directionalLights.needsUpdate=ie,U.directionalLightShadows.needsUpdate=ie,U.pointLights.needsUpdate=ie,U.pointLightShadows.needsUpdate=ie,U.spotLights.needsUpdate=ie,U.spotLightShadows.needsUpdate=ie,U.rectAreaLights.needsUpdate=ie,U.hemisphereLights.needsUpdate=ie}function l0(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(U,ie,ue){De.get(U.texture).__webglTexture=ie,De.get(U.depthTexture).__webglTexture=ue;const ce=De.get(U);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=ue===void 0,ce.__autoAllocateDepthBuffer||de.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,ie){const ue=De.get(U);ue.__webglFramebuffer=ie,ue.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(U,ie=0,ue=0){L=U,P=ie,b=ue;let ce=!0,ae=null,Ve=!1,Qe=!1;if(U){const at=De.get(U);at.__useDefaultFramebuffer!==void 0?(pe.bindFramebuffer(G.FRAMEBUFFER,null),ce=!1):at.__webglFramebuffer===void 0?O.setupRenderTarget(U):at.__hasExternalTextures&&O.rebindTextures(U,De.get(U.texture).__webglTexture,De.get(U.depthTexture).__webglTexture);const mt=U.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Qe=!0);const dt=De.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(dt[ie])?ae=dt[ie][ue]:ae=dt[ie],Ve=!0):Te.isWebGL2&&U.samples>0&&O.useMultisampledRTT(U)===!1?ae=De.get(U).__webglMultisampledFramebuffer:Array.isArray(dt)?ae=dt[ue]:ae=dt,R.copy(U.viewport),z.copy(U.scissor),Z=U.scissorTest}else R.copy(V).multiplyScalar(se).floor(),z.copy(Y).multiplyScalar(se).floor(),Z=J;if(pe.bindFramebuffer(G.FRAMEBUFFER,ae)&&Te.drawBuffers&&ce&&pe.drawBuffers(U,ae),pe.viewport(R),pe.scissor(z),pe.setScissorTest(Z),Ve){const at=De.get(U.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+ie,at.__webglTexture,ue)}else if(Qe){const at=De.get(U.texture),mt=ie||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,at.__webglTexture,ue||0,mt)}D=-1},this.readRenderTargetPixels=function(U,ie,ue,ce,ae,Ve,Qe){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=De.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Qe!==void 0&&(ot=ot[Qe]),ot){pe.bindFramebuffer(G.FRAMEBUFFER,ot);try{const at=U.texture,mt=at.format,dt=at.type;if(mt!==xi&&We.convert(mt)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=dt===Uu&&(de.has("EXT_color_buffer_half_float")||Te.isWebGL2&&de.has("EXT_color_buffer_float"));if(dt!==us&&We.convert(dt)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)&&!(dt===kr&&(Te.isWebGL2||de.has("OES_texture_float")||de.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=U.width-ce&&ue>=0&&ue<=U.height-ae&&G.readPixels(ie,ue,ce,ae,We.convert(mt),We.convert(dt),Ve)}finally{const at=L!==null?De.get(L).__webglFramebuffer:null;pe.bindFramebuffer(G.FRAMEBUFFER,at)}}},this.copyFramebufferToTexture=function(U,ie,ue=0){const ce=Math.pow(2,-ue),ae=Math.floor(ie.image.width*ce),Ve=Math.floor(ie.image.height*ce);O.setTexture2D(ie,0),G.copyTexSubImage2D(G.TEXTURE_2D,ue,0,0,U.x,U.y,ae,Ve),pe.unbindTexture()},this.copyTextureToTexture=function(U,ie,ue,ce=0){const ae=ie.image.width,Ve=ie.image.height,Qe=We.convert(ue.format),ot=We.convert(ue.type);O.setTexture2D(ue,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ue.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ue.unpackAlignment),ie.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,ce,U.x,U.y,ae,Ve,Qe,ot,ie.image.data):ie.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,ce,U.x,U.y,ie.mipmaps[0].width,ie.mipmaps[0].height,Qe,ie.mipmaps[0].data):G.texSubImage2D(G.TEXTURE_2D,ce,U.x,U.y,Qe,ot,ie.image),ce===0&&ue.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),pe.unbindTexture()},this.copyTextureToTexture3D=function(U,ie,ue,ce,ae=0){if(M.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ve=U.max.x-U.min.x+1,Qe=U.max.y-U.min.y+1,ot=U.max.z-U.min.z+1,at=We.convert(ce.format),mt=We.convert(ce.type);let dt;if(ce.isData3DTexture)O.setTexture3D(ce,0),dt=G.TEXTURE_3D;else if(ce.isDataArrayTexture||ce.isCompressedArrayTexture)O.setTexture2DArray(ce,0),dt=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ce.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ce.unpackAlignment);const gt=G.getParameter(G.UNPACK_ROW_LENGTH),nn=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Wn=G.getParameter(G.UNPACK_SKIP_PIXELS),Xt=G.getParameter(G.UNPACK_SKIP_ROWS),On=G.getParameter(G.UNPACK_SKIP_IMAGES),lt=ue.isCompressedTexture?ue.mipmaps[ae]:ue.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,lt.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,lt.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,U.min.x),G.pixelStorei(G.UNPACK_SKIP_ROWS,U.min.y),G.pixelStorei(G.UNPACK_SKIP_IMAGES,U.min.z),ue.isDataTexture||ue.isData3DTexture?G.texSubImage3D(dt,ae,ie.x,ie.y,ie.z,Ve,Qe,ot,at,mt,lt.data):ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(dt,ae,ie.x,ie.y,ie.z,Ve,Qe,ot,at,lt.data)):G.texSubImage3D(dt,ae,ie.x,ie.y,ie.z,Ve,Qe,ot,at,mt,lt),G.pixelStorei(G.UNPACK_ROW_LENGTH,gt),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,nn),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Wn),G.pixelStorei(G.UNPACK_SKIP_ROWS,Xt),G.pixelStorei(G.UNPACK_SKIP_IMAGES,On),ae===0&&ce.generateMipmaps&&G.generateMipmap(dt),pe.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?O.setTextureCube(U,0):U.isData3DTexture?O.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?O.setTexture2DArray(U,0):O.setTexture2D(U,0),pe.unbindTexture()},this.resetState=function(){P=0,b=0,L=null,pe.reset(),X.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Fr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===bg?"display-p3":"srgb",t.unpackColorSpace=Ft.workingColorSpace===ph?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Rn?Oo:rS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Oo?Rn:hs}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class i3 extends vS{}i3.prototype.isWebGL1Renderer=!0;class Rg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new He(e),this.density=t}clone(){return new Rg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Lg{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new He(e),this.near=t,this.far=i}clone(){return new Lg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Wm extends kt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Ig{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Yf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ki()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const mi=new k;class Qa{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyMatrix4(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyNormalMatrix(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.transformDirection(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ii(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ii(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ii(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ii(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Vt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class yS extends $n{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Hl;const Lc=new k,Gl=new k,Wl=new k,jl=new me,Ic=new me,r3=new ft,fp=new k,Nc=new k,hp=new k,VT=new me,uy=new me,HT=new me;class s3 extends kt{constructor(e=new yS){if(super(),this.isSprite=!0,this.type="Sprite",Hl===void 0){Hl=new Mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ig(t,5);Hl.setIndex([0,1,2,0,2,3]),Hl.setAttribute("position",new Qa(i,3,0,!1)),Hl.setAttribute("uv",new Qa(i,2,3,!1))}this.geometry=Hl,this.material=e,this.center=new me(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gl.setFromMatrixScale(this.matrixWorld),r3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Wl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gl.multiplyScalar(-Wl.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;dp(fp.set(-.5,-.5,0),Wl,o,Gl,r,s),dp(Nc.set(.5,-.5,0),Wl,o,Gl,r,s),dp(hp.set(.5,.5,0),Wl,o,Gl,r,s),VT.set(0,0),uy.set(1,0),HT.set(1,1);let a=e.ray.intersectTriangle(fp,Nc,hp,!1,Lc);if(a===null&&(dp(Nc.set(-.5,.5,0),Wl,o,Gl,r,s),uy.set(0,1),a=e.ray.intersectTriangle(fp,hp,Nc,!1,Lc),a===null))return;const l=e.ray.origin.distanceTo(Lc);l<e.near||l>e.far||t.push({distance:l,point:Lc.clone(),uv:Li.getInterpolation(Lc,fp,Nc,hp,VT,uy,HT,new me),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function dp(n,e,t,i,r,s){jl.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Ic.x=s*jl.x-r*jl.y,Ic.y=r*jl.x+s*jl.y):Ic.copy(jl),n.copy(e),n.x+=Ic.x,n.y+=Ic.y,n.applyMatrix4(r3)}const pp=new k,GT=new k;class o3 extends kt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){pp.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(pp);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){pp.setFromMatrixPosition(e.matrixWorld),GT.setFromMatrixPosition(this.matrixWorld);const i=pp.distanceTo(GT)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const WT=new k,jT=new zt,XT=new zt,J5=new k,YT=new ft,mp=new k,cy=new fi,qT=new ft,fy=new il;class a3 extends In{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Yx,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Mi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,mp),this.boundingBox.expandByPoint(mp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new fi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,mp),this.boundingSphere.expandByPoint(mp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),cy.copy(this.boundingSphere),cy.applyMatrix4(r),e.ray.intersectsSphere(cy)!==!1&&(qT.copy(r).invert(),fy.copy(e.ray).applyMatrix4(qT),!(this.boundingBox!==null&&fy.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,fy)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Yx?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===SR?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;jT.fromBufferAttribute(r.attributes.skinIndex,e),XT.fromBufferAttribute(r.attributes.skinWeight,e),WT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=XT.getComponent(s);if(o!==0){const a=jT.getComponent(s);YT.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(J5.copy(WT).applyMatrix4(YT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class xS extends kt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Wa extends mn{constructor(e=null,t=1,i=1,r,s,o,a,l,f=xn,h=xn,d,p){super(null,o,a,l,f,h,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ZT=new ft,Q5=new ft;class Ng{constructor(e=[],t=[]){this.uuid=Ki(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ft;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Q5;ZT.multiplyMatrices(a,t[s]),ZT.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Ng(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Wa(t,e,e,xi,kr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new xS),this.bones.push(o),this.boneInverses.push(new ft().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Bu extends Vt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Xl=new ft,KT=new ft,gp=[],$T=new Mi,eV=new ft,Dc=new In,Oc=new fi;class l3 extends In{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bu(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,eV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Mi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xl),$T.copy(e.boundingBox).applyMatrix4(Xl),this.boundingBox.union($T)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new fi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xl),Oc.copy(e.boundingSphere).applyMatrix4(Xl),this.boundingSphere.union(Oc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Dc.geometry=this.geometry,Dc.material=this.material,Dc.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Oc.copy(this.boundingSphere),Oc.applyMatrix4(i),e.ray.intersectsSphere(Oc)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Xl),KT.multiplyMatrices(i,Xl),Dc.matrixWorld=KT,Dc.raycast(e,gp);for(let o=0,a=gp.length;o<a;o++){const l=gp[o];l.instanceId=s,l.object=this,t.push(l)}gp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Bu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function tV(n,e){return n.z-e.z}function nV(n,e){return e.z-n.z}class iV{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Yl="batchId",fo=new ft,JT=new ft,rV=new ft,QT=new ft,hy=new yh,vp=new Mi,ha=new fi,Uc=new k,dy=new iV,oi=new In,yp=[];function sV(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class u3 extends In{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Mt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Wa(t,e,e,xi,kr);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:f,itemSize:h,normalized:d}=l,p=new f.constructor(i*h),m=new l.constructor(p,h,d);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Vt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Yl,new Vt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Yl))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Yl}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Yl)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,fo),this.getBoundingBoxAt(r,vp).applyMatrix4(fo),t.union(vp))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fi);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,fo),this.getBoundingSphereAt(r,ha).applyMatrix4(fo),t.union(ha))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const f=e.getIndex(),h=f!==null;if(h&&(i===-1?r.indexCount=f.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,m=this._matricesTexture,y=this._matricesTexture.image.data;d.push(!0),p.push(!0);const w=this._geometryCount;this._geometryCount++,rV.toArray(y,w*16),m.needsUpdate=!0,o.push(r),a.push({start:h?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Mi,sphereInitialized:!1,sphere:new fi});const x=this.geometry.getAttribute(Yl);for(let v=0;v<r.vertexCount;v++)x.setX(r.vertexStart+v,w);return x.needsUpdate=!0,this.setGeometryAt(w,e),w}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,f=a.vertexCount;for(const m in i.attributes){if(m===Yl)continue;const y=t.getAttribute(m),w=i.getAttribute(m);sV(y,w,l);const x=y.itemSize;for(let v=y.count,S=f;v<S;v++){const M=l+v;for(let T=0;T<x;T++)w.setComponent(M,T,0)}w.needsUpdate=!0}if(r){const m=a.indexStart;for(let y=0;y<o.count;y++)s.setX(m+y,l+o.getX(y));for(let y=o.count,w=a.indexCount;y<w;y++)s.setX(m+y,l);s.needsUpdate=!0}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,f=this._drawRanges[e];for(let h=f.start,d=f.start+f.count;h<d;h++){let p=h;a&&(p=a.getX(p)),s.expandByPoint(Uc.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,vp),vp.getCenter(s.center);const a=o.index,l=o.attributes.position,f=this._drawRanges[e];let h=0;for(let d=f.start,p=f.start+f.count;d<p;d++){let m=d;a&&(m=a.getX(m)),Uc.fromBufferAttribute(l,m),h=Math.max(h,s.center.distanceToSquared(Uc))}s.radius=Math.sqrt(h),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;oi.material=this.material,oi.geometry.index=l.index,oi.geometry.attributes=l.attributes,oi.geometry.boundingBox===null&&(oi.geometry.boundingBox=new Mi),oi.geometry.boundingSphere===null&&(oi.geometry.boundingSphere=new fi);for(let f=0;f<o;f++){if(!i[f]||!r[f])continue;const h=s[f];oi.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(f,oi.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,oi.geometry.boundingBox),this.getBoundingSphereAt(f,oi.geometry.boundingSphere),oi.raycast(e,yp);for(let d=0,p=yp.length;d<p;d++){const m=yp[d];m.object=this,m.batchId=f,t.push(m)}yp.length=0}oi.material=null,oi.geometry.index=null,oi.geometry.attributes={},oi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,f=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled;p&&(QT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),hy.setFromProjectionMatrix(QT,e.isWebGPURenderer?ku:Fr));let m=0;if(this.sortObjects){JT.copy(this.matrixWorld).invert(),Uc.setFromMatrixPosition(i.matrixWorld).applyMatrix4(JT);for(let x=0,v=l.length;x<v;x++)if(l[x]){this.getMatrixAt(x,fo),this.getBoundingSphereAt(x,ha).applyMatrix4(fo);let S=!1;if(p&&(S=!hy.intersectsSphere(ha)),!S){const M=Uc.distanceTo(ha.center);dy.push(d[x],M)}}const y=dy.list,w=this.customSort;w===null?y.sort(s.transparent?nV:tV):w.call(this,y,i);for(let x=0,v=y.length;x<v;x++){const S=y[x];f[m]=S.start*a,h[m]=S.count,m++}dy.reset()}else for(let y=0,w=l.length;y<w;y++)if(l[y]){let x=!1;if(p&&(this.getMatrixAt(y,fo),this.getBoundingSphereAt(y,ha).applyMatrix4(fo),x=!hy.intersectsSphere(ha)),!x){const v=d[y];f[m]=v.start*a,h[m]=v.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Ti extends $n{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new He(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const e2=new k,t2=new k,n2=new ft,py=new il,xp=new fi;class Vo extends kt{constructor(e=new Mt,t=new Ti){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)e2.fromBufferAttribute(t,r-1),t2.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=e2.distanceTo(t2);e.setAttribute("lineDistance",new Ke(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),xp.copy(i.boundingSphere),xp.applyMatrix4(r),xp.radius+=s,e.ray.intersectsSphere(xp)===!1)return;n2.copy(r).invert(),py.copy(e.ray).applyMatrix4(n2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=new k,h=new k,d=new k,p=new k,m=this.isLineSegments?2:1,y=i.index,x=i.attributes.position;if(y!==null){const v=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count);for(let M=v,T=S-1;M<T;M+=m){const P=y.getX(M),b=y.getX(M+1);if(f.fromBufferAttribute(x,P),h.fromBufferAttribute(x,b),py.distanceSqToSegment(f,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(p);D<e.near||D>e.far||t.push({distance:D,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),S=Math.min(x.count,o.start+o.count);for(let M=v,T=S-1;M<T;M+=m){if(f.fromBufferAttribute(x,M),h.fromBufferAttribute(x,M+1),py.distanceSqToSegment(f,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(p);b<e.near||b>e.far||t.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const i2=new k,r2=new k;class ms extends Vo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)i2.fromBufferAttribute(t,r),r2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+i2.distanceTo(r2);e.setAttribute("lineDistance",new Ke(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class c3 extends Vo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Dg extends $n{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const s2=new ft,E_=new il,_p=new fi,Sp=new k;let f3=class extends kt{constructor(e=new Mt,t=new Dg){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_p.copy(i.boundingSphere),_p.applyMatrix4(r),_p.radius+=s,e.ray.intersectsSphere(_p)===!1)return;s2.copy(r).invert(),E_.copy(e.ray).applyMatrix4(s2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=i.index,d=i.attributes.position;if(f!==null){const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let y=p,w=m;y<w;y++){const x=f.getX(y);Sp.fromBufferAttribute(d,x),o2(Sp,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let y=p,w=m;y<w;y++)Sp.fromBufferAttribute(d,y),o2(Sp,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function o2(n,e,t,i,r,s,o){const a=E_.distanceSqToPoint(n);if(a<t){const l=new k;E_.closestPointToPoint(n,l),l.applyMatrix4(i);const f=r.ray.origin.distanceTo(l);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class oV extends mn{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Sn,this.magFilter=s!==void 0?s:Sn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class aV extends mn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=xn,this.minFilter=xn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Og extends mn{constructor(e,t,i,r,s,o,a,l,f,h,d,p){super(null,o,a,l,f,h,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class lV extends Og{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ui}}class uV extends Og{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Xs),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class cV extends mn{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,f;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),f=i[r]-o,f<0)a=r+1;else if(f>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new me:new k);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new k,r=[],s=[],o=[],a=new k,l=new ft;for(let m=0;m<=e;m++){const y=m/e;r[m]=this.getTangentAt(y,new k)}s[0]=new k,o[0]=new k;let f=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=f&&(f=h,i.set(1,0,0)),d<=f&&(f=d,i.set(0,1,0)),p<=f&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(pn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(pn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],m*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ug extends Xr{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new me,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=f-this.aY;l=p*h-m*d+this.aX,f=p*d+m*h+this.aY}return i.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class h3 extends Ug{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function _S(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,f){r(o,a,f*(a-s),f*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,f,h,d){let p=(o-s)/f-(a-s)/(f+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Mp=new k,my=new _S,gy=new _S,vy=new _S;class d3 extends Xr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new k){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let f,h;this.closed||a>0?f=r[(a-1)%s]:(Mp.subVectors(r[0],r[1]).add(r[0]),f=Mp);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(Mp.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=Mp),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(f.distanceToSquared(d),m),w=Math.pow(d.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m);w<1e-4&&(w=1),y<1e-4&&(y=w),x<1e-4&&(x=w),my.initNonuniformCatmullRom(f.x,d.x,p.x,h.x,y,w,x),gy.initNonuniformCatmullRom(f.y,d.y,p.y,h.y,y,w,x),vy.initNonuniformCatmullRom(f.z,d.z,p.z,h.z,y,w,x)}else this.curveType==="catmullrom"&&(my.initCatmullRom(f.x,d.x,p.x,h.x,this.tension),gy.initCatmullRom(f.y,d.y,p.y,h.y,this.tension),vy.initCatmullRom(f.z,d.z,p.z,h.z,this.tension));return i.set(my.calc(l),gy.calc(l),vy.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new k().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function a2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function fV(n,e){const t=1-n;return t*t*e}function hV(n,e){return 2*(1-n)*n*e}function dV(n,e){return n*n*e}function hf(n,e,t,i){return fV(n,e)+hV(n,t)+dV(n,i)}function pV(n,e){const t=1-n;return t*t*t*e}function mV(n,e){const t=1-n;return 3*t*t*n*e}function gV(n,e){return 3*(1-n)*n*n*e}function vV(n,e){return n*n*n*e}function df(n,e,t,i,r){return pV(n,e)+mV(n,t)+gV(n,i)+vV(n,r)}class SS extends Xr{constructor(e=new me,t=new me,i=new me,r=new me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new me){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(df(e,r.x,s.x,o.x,a.x),df(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class p3 extends Xr{constructor(e=new k,t=new k,i=new k,r=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(df(e,r.x,s.x,o.x,a.x),df(e,r.y,s.y,o.y,a.y),df(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class MS extends Xr{constructor(e=new me,t=new me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new me){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m3 extends Xr{constructor(e=new k,t=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new k){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new k){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wS extends Xr{constructor(e=new me,t=new me,i=new me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new me){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(hf(e,r.x,s.x,o.x),hf(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ES extends Xr{constructor(e=new k,t=new k,i=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(hf(e,r.x,s.x,o.x),hf(e,r.y,s.y,o.y),hf(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TS extends Xr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new me){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],f=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(a2(a,l.x,f.x,h.x,d.x),a2(a,l.y,f.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new me().fromArray(r))}return this}}var jm=Object.freeze({__proto__:null,ArcCurve:h3,CatmullRomCurve3:d3,CubicBezierCurve:SS,CubicBezierCurve3:p3,EllipseCurve:Ug,LineCurve:MS,LineCurve3:m3,QuadraticBezierCurve:wS,QuadraticBezierCurve3:ES,SplineCurve:TS});class g3 extends Xr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new jm[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),f=l===0?0:1-o/l;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let f=0;f<l.length;f++){const h=l[f];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new jm[r.type]().fromJSON(r))}return this}}class Zf extends g3{constructor(e){super(),this.type="Path",this.currentPoint=new me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new MS(this.currentPoint.clone(),new me(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new wS(this.currentPoint.clone(),new me(e,t),new me(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new SS(this.currentPoint.clone(),new me(e,t),new me(i,r),new me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new TS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const f=new Ug(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=f.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _h extends Mt{constructor(e=[new me(0,-.5),new me(.5,0),new me(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=pn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],f=[],h=1/t,d=new k,p=new me,m=new k,y=new k,w=new k;let x=0,v=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,m.x=v*1,m.y=-x,m.z=v*0,w.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:x=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,m.x=v*1,m.y=-x,m.z=v*0,y.copy(m),m.x+=w.x,m.y+=w.y,m.z+=w.z,m.normalize(),l.push(m.x,m.y,m.z),w.copy(y)}for(let S=0;S<=t;S++){const M=i+S*h*r,T=Math.sin(M),P=Math.cos(M);for(let b=0;b<=e.length-1;b++){d.x=e[b].x*T,d.y=e[b].y,d.z=e[b].x*P,o.push(d.x,d.y,d.z),p.x=S/t,p.y=b/(e.length-1),a.push(p.x,p.y);const L=l[3*b+0]*T,D=l[3*b+1],C=l[3*b+0]*P;f.push(L,D,C)}}for(let S=0;S<t;S++)for(let M=0;M<e.length-1;M++){const T=M+S*e.length,P=T,b=T+e.length,L=T+e.length+1,D=T+1;s.push(P,b,D),s.push(L,D,b)}this.setIndex(s),this.setAttribute("position",new Ke(o,3)),this.setAttribute("uv",new Ke(a,2)),this.setAttribute("normal",new Ke(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _h(e.points,e.segments,e.phiStart,e.phiLength)}}class kg extends _h{constructor(e=1,t=1,i=4,r=8){const s=new Zf;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new kg(e.radius,e.length,e.capSegments,e.radialSegments)}}class Fg extends Mt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],f=new k,h=new me;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=i+d/t*r;f.x=e*Math.cos(m),f.y=e*Math.sin(m),o.push(f.x,f.y,f.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Ke(o,3)),this.setAttribute("normal",new Ke(a,3)),this.setAttribute("uv",new Ke(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ku extends Mt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const f=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],p=[],m=[];let y=0;const w=[],x=i/2;let v=0;S(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new Ke(d,3)),this.setAttribute("normal",new Ke(p,3)),this.setAttribute("uv",new Ke(m,2));function S(){const T=new k,P=new k;let b=0;const L=(t-e)/i;for(let D=0;D<=s;D++){const C=[],R=D/s,z=R*(t-e)+e;for(let Z=0;Z<=r;Z++){const oe=Z/r,H=oe*l+a,K=Math.sin(H),$=Math.cos(H);P.x=z*K,P.y=-R*i+x,P.z=z*$,d.push(P.x,P.y,P.z),T.set(K,L,$).normalize(),p.push(T.x,T.y,T.z),m.push(oe,1-R),C.push(y++)}w.push(C)}for(let D=0;D<r;D++)for(let C=0;C<s;C++){const R=w[C][D],z=w[C+1][D],Z=w[C+1][D+1],oe=w[C][D+1];h.push(R,z,oe),h.push(z,Z,oe),b+=6}f.addGroup(v,b,0),v+=b}function M(T){const P=y,b=new me,L=new k;let D=0;const C=T===!0?e:t,R=T===!0?1:-1;for(let Z=1;Z<=r;Z++)d.push(0,x*R,0),p.push(0,R,0),m.push(.5,.5),y++;const z=y;for(let Z=0;Z<=r;Z++){const H=Z/r*l+a,K=Math.cos(H),$=Math.sin(H);L.x=C*$,L.y=x*R,L.z=C*K,d.push(L.x,L.y,L.z),p.push(0,R,0),b.x=K*.5+.5,b.y=$*.5*R+.5,m.push(b.x,b.y),y++}for(let Z=0;Z<r;Z++){const oe=P+Z,H=z+Z;T===!0?h.push(H,H+1,oe):h.push(H+1,H,oe),D+=3}f.addGroup(v,D,T===!0?1:2),v+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ku(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zg extends Ku{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new zg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ko extends Mt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),f(i),h(),this.setAttribute("position",new Ke(s,3)),this.setAttribute("normal",new Ke(s.slice(),3)),this.setAttribute("uv",new Ke(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const M=new k,T=new k,P=new k;for(let b=0;b<t.length;b+=3)m(t[b+0],M),m(t[b+1],T),m(t[b+2],P),l(M,T,P,S)}function l(S,M,T,P){const b=P+1,L=[];for(let D=0;D<=b;D++){L[D]=[];const C=S.clone().lerp(T,D/b),R=M.clone().lerp(T,D/b),z=b-D;for(let Z=0;Z<=z;Z++)Z===0&&D===b?L[D][Z]=C:L[D][Z]=C.clone().lerp(R,Z/z)}for(let D=0;D<b;D++)for(let C=0;C<2*(b-D)-1;C++){const R=Math.floor(C/2);C%2===0?(p(L[D][R+1]),p(L[D+1][R]),p(L[D][R])):(p(L[D][R+1]),p(L[D+1][R+1]),p(L[D+1][R]))}}function f(S){const M=new k;for(let T=0;T<s.length;T+=3)M.x=s[T+0],M.y=s[T+1],M.z=s[T+2],M.normalize().multiplyScalar(S),s[T+0]=M.x,s[T+1]=M.y,s[T+2]=M.z}function h(){const S=new k;for(let M=0;M<s.length;M+=3){S.x=s[M+0],S.y=s[M+1],S.z=s[M+2];const T=x(S)/2/Math.PI+.5,P=v(S)/Math.PI+.5;o.push(T,1-P)}y(),d()}function d(){for(let S=0;S<o.length;S+=6){const M=o[S+0],T=o[S+2],P=o[S+4],b=Math.max(M,T,P),L=Math.min(M,T,P);b>.9&&L<.1&&(M<.2&&(o[S+0]+=1),T<.2&&(o[S+2]+=1),P<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,M){const T=S*3;M.x=e[T+0],M.y=e[T+1],M.z=e[T+2]}function y(){const S=new k,M=new k,T=new k,P=new k,b=new me,L=new me,D=new me;for(let C=0,R=0;C<s.length;C+=9,R+=6){S.set(s[C+0],s[C+1],s[C+2]),M.set(s[C+3],s[C+4],s[C+5]),T.set(s[C+6],s[C+7],s[C+8]),b.set(o[R+0],o[R+1]),L.set(o[R+2],o[R+3]),D.set(o[R+4],o[R+5]),P.copy(S).add(M).add(T).divideScalar(3);const z=x(P);w(b,R+0,S,z),w(L,R+2,M,z),w(D,R+4,T,z)}}function w(S,M,T,P){P<0&&S.x===1&&(o[M]=S.x-1),T.x===0&&T.z===0&&(o[M]=P/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function v(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ko(e.vertices,e.indices,e.radius,e.details)}}class Bg extends Ko{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bg(e.radius,e.detail)}}const wp=new k,Ep=new k,yy=new k,Tp=new Li;class v3 extends Mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Ha*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,f=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(f[0]=o.getX(y),f[1]=o.getX(y+1),f[2]=o.getX(y+2)):(f[0]=y,f[1]=y+1,f[2]=y+2);const{a:w,b:x,c:v}=Tp;if(w.fromBufferAttribute(a,f[0]),x.fromBufferAttribute(a,f[1]),v.fromBufferAttribute(a,f[2]),Tp.getNormal(yy),d[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,d[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const M=(S+1)%3,T=d[S],P=d[M],b=Tp[h[S]],L=Tp[h[M]],D=`${T}_${P}`,C=`${P}_${T}`;C in p&&p[C]?(yy.dot(p[C].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(L.x,L.y,L.z)),p[C]=null):D in p||(p[D]={index0:f[S],index1:f[M],normal:yy.clone()})}}for(const y in p)if(p[y]){const{index0:w,index1:x}=p[y];wp.fromBufferAttribute(a,w),Ep.fromBufferAttribute(a,x),m.push(wp.x,wp.y,wp.z),m.push(Ep.x,Ep.y,Ep.z)}this.setAttribute("position",new Ke(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ja extends Zf{constructor(e){super(e),this.uuid=Ki(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Zf().fromJSON(r))}return this}}const yV={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=y3(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,f,h,d,p,m;if(i&&(s=wV(n,e,s,t)),n.length>80*t){a=f=n[0],l=h=n[1];for(let y=t;y<r;y+=t)d=n[y],p=n[y+1],d<a&&(a=d),p<l&&(l=p),d>f&&(f=d),p>h&&(h=p);m=Math.max(f-a,h-l),m=m!==0?32767/m:0}return Kf(s,o,t,a,l,m,0),o}};function y3(n,e,t,i,r){let s,o;if(r===DV(n,e,t,i)>0)for(s=e;s<t;s+=i)o=l2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=l2(s,n[s],n[s+1],o);return o&&Vg(o,o.next)&&(Jf(o),o=o.next),o}function el(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Vg(t,t.next)||on(t.prev,t,t.next)===0)){if(Jf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Kf(n,e,t,i,r,s,o){if(!n)return;!o&&s&&CV(n,i,r,s);let a=n,l,f;for(;n.prev!==n.next;){if(l=n.prev,f=n.next,s?_V(n,i,r,s):xV(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),Jf(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=SV(el(n),e,t),Kf(n,e,t,i,r,s,2)):o===2&&MV(n,e,t,i,r,s):Kf(el(n),e,t,i,r,s,1);break}}}function xV(n){const e=n.prev,t=n,i=n.next;if(on(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,f=i.y,h=r<s?r<o?r:o:s<o?s:o,d=a<l?a<f?a:f:l<f?l:f,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>f?a:f:l>f?l:f;let y=i.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&pu(r,a,s,l,o,f,y.x,y.y)&&on(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function _V(n,e,t,i){const r=n.prev,s=n,o=n.next;if(on(r,s,o)>=0)return!1;const a=r.x,l=s.x,f=o.x,h=r.y,d=s.y,p=o.y,m=a<l?a<f?a:f:l<f?l:f,y=h<d?h<p?h:p:d<p?d:p,w=a>l?a>f?a:f:l>f?l:f,x=h>d?h>p?h:p:d>p?d:p,v=T_(m,y,e,t,i),S=T_(w,x,e,t,i);let M=n.prevZ,T=n.nextZ;for(;M&&M.z>=v&&T&&T.z<=S;){if(M.x>=m&&M.x<=w&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&pu(a,h,l,d,f,p,M.x,M.y)&&on(M.prev,M,M.next)>=0||(M=M.prevZ,T.x>=m&&T.x<=w&&T.y>=y&&T.y<=x&&T!==r&&T!==o&&pu(a,h,l,d,f,p,T.x,T.y)&&on(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;M&&M.z>=v;){if(M.x>=m&&M.x<=w&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&pu(a,h,l,d,f,p,M.x,M.y)&&on(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;T&&T.z<=S;){if(T.x>=m&&T.x<=w&&T.y>=y&&T.y<=x&&T!==r&&T!==o&&pu(a,h,l,d,f,p,T.x,T.y)&&on(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function SV(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Vg(r,s)&&x3(r,i,i.next,s)&&$f(r,s)&&$f(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Jf(i),Jf(i.next),i=n=s),i=i.next}while(i!==n);return el(i)}function MV(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&LV(o,a)){let l=_3(o,a);o=el(o,o.next),l=el(l,l.next),Kf(o,e,t,i,r,s,0),Kf(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function wV(n,e,t,i){const r=[];let s,o,a,l,f;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,f=y3(n,a,l,i,!1),f===f.next&&(f.steiner=!0),r.push(RV(f));for(r.sort(EV),s=0;s<r.length;s++)t=TV(r[s],t);return t}function EV(n,e){return n.x-e.x}function TV(n,e){const t=AV(n,e);if(!t)return e;const i=_3(t,n);return el(i,i.next),el(t,t.next)}function AV(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,f=r.y;let h=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&pu(o<f?s:i,o,l,f,o<f?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),$f(t,n)&&(d<h||d===h&&(t.x>r.x||t.x===r.x&&bV(r,t)))&&(r=t,h=d)),t=t.next;while(t!==a);return r}function bV(n,e){return on(n.prev,n,e.prev)<0&&on(e.next,n,n.next)<0}function CV(n,e,t,i){let r=n;do r.z===0&&(r.z=T_(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,PV(r)}function PV(n){let e,t,i,r,s,o,a,l,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<f&&(a++,i=i.nextZ,!!i);e++);for(l=f;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function T_(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function RV(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pu(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function LV(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!IV(n,e)&&($f(n,e)&&$f(e,n)&&NV(n,e)&&(on(n.prev,n,e.prev)||on(n,e.prev,e))||Vg(n,e)&&on(n.prev,n,n.next)>0&&on(e.prev,e,e.next)>0)}function on(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Vg(n,e){return n.x===e.x&&n.y===e.y}function x3(n,e,t,i){const r=bp(on(n,e,t)),s=bp(on(n,e,i)),o=bp(on(t,i,n)),a=bp(on(t,i,e));return!!(r!==s&&o!==a||r===0&&Ap(n,t,e)||s===0&&Ap(n,i,e)||o===0&&Ap(t,n,i)||a===0&&Ap(t,e,i))}function Ap(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function bp(n){return n>0?1:n<0?-1:0}function IV(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&x3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function $f(n,e){return on(n.prev,n,n.next)<0?on(n,e,n.next)>=0&&on(n,n.prev,e)>=0:on(n,e,n.prev)<0||on(n,n.next,e)<0}function NV(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function _3(n,e){const t=new A_(n.i,n.x,n.y),i=new A_(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function l2(n,e,t,i){const r=new A_(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Jf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function A_(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function DV(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class cs{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return cs.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];u2(e),c2(i,e);let o=e.length;t.forEach(u2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,c2(i,t[l]);const a=yV.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function u2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function c2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Hg extends Mt{constructor(e=new ja([new me(.5,.5),new me(-.5,.5),new me(-.5,-.5),new me(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];o(f)}this.setAttribute("position",new Ke(r,3)),this.setAttribute("uv",new Ke(s,2)),this.computeVertexNormals();function o(a){const l=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:OV;let M,T=!1,P,b,L,D;v&&(M=v.getSpacedPoints(h),T=!0,p=!1,P=v.computeFrenetFrames(h,!1),b=new k,L=new k,D=new k),p||(x=0,m=0,y=0,w=0);const C=a.extractPoints(f);let R=C.shape;const z=C.holes;if(!cs.isClockWise(R)){R=R.reverse();for(let G=0,xe=z.length;G<xe;G++){const de=z[G];cs.isClockWise(de)&&(z[G]=de.reverse())}}const oe=cs.triangulateShape(R,z),H=R;for(let G=0,xe=z.length;G<xe;G++){const de=z[G];R=R.concat(de)}function K(G,xe,de){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),G.clone().addScaledVector(xe,de)}const $=R.length,se=oe.length;function N(G,xe,de){let Te,pe,Ge;const De=G.x-xe.x,O=G.y-xe.y,I=de.x-G.x,ne=de.y-G.y,Se=De*De+O*O,_e=De*ne-O*I;if(Math.abs(_e)>Number.EPSILON){const ye=Math.sqrt(Se),qe=Math.sqrt(I*I+ne*ne),Ie=xe.x-O/ye,Oe=xe.y+De/ye,it=de.x-ne/qe,pt=de.y+I/qe,Me=((it-Ie)*ne-(pt-Oe)*I)/(De*ne-O*I);Te=Ie+De*Me-G.x,pe=Oe+O*Me-G.y;const Ct=Te*Te+pe*pe;if(Ct<=2)return new me(Te,pe);Ge=Math.sqrt(Ct/2)}else{let ye=!1;De>Number.EPSILON?I>Number.EPSILON&&(ye=!0):De<-Number.EPSILON?I<-Number.EPSILON&&(ye=!0):Math.sign(O)===Math.sign(ne)&&(ye=!0),ye?(Te=-O,pe=De,Ge=Math.sqrt(Se)):(Te=De,pe=O,Ge=Math.sqrt(Se/2))}return new me(Te/Ge,pe/Ge)}const B=[];for(let G=0,xe=H.length,de=xe-1,Te=G+1;G<xe;G++,de++,Te++)de===xe&&(de=0),Te===xe&&(Te=0),B[G]=N(H[G],H[de],H[Te]);const V=[];let Y,J=B.concat();for(let G=0,xe=z.length;G<xe;G++){const de=z[G];Y=[];for(let Te=0,pe=de.length,Ge=pe-1,De=Te+1;Te<pe;Te++,Ge++,De++)Ge===pe&&(Ge=0),De===pe&&(De=0),Y[Te]=N(de[Te],de[Ge],de[De]);V.push(Y),J=J.concat(Y)}for(let G=0;G<x;G++){const xe=G/x,de=m*Math.cos(xe*Math.PI/2),Te=y*Math.sin(xe*Math.PI/2)+w;for(let pe=0,Ge=H.length;pe<Ge;pe++){const De=K(H[pe],B[pe],Te);be(De.x,De.y,-de)}for(let pe=0,Ge=z.length;pe<Ge;pe++){const De=z[pe];Y=V[pe];for(let O=0,I=De.length;O<I;O++){const ne=K(De[O],Y[O],Te);be(ne.x,ne.y,-de)}}}const Q=y+w;for(let G=0;G<$;G++){const xe=p?K(R[G],J[G],Q):R[G];T?(L.copy(P.normals[0]).multiplyScalar(xe.x),b.copy(P.binormals[0]).multiplyScalar(xe.y),D.copy(M[0]).add(L).add(b),be(D.x,D.y,D.z)):be(xe.x,xe.y,0)}for(let G=1;G<=h;G++)for(let xe=0;xe<$;xe++){const de=p?K(R[xe],J[xe],Q):R[xe];T?(L.copy(P.normals[G]).multiplyScalar(de.x),b.copy(P.binormals[G]).multiplyScalar(de.y),D.copy(M[G]).add(L).add(b),be(D.x,D.y,D.z)):be(de.x,de.y,d/h*G)}for(let G=x-1;G>=0;G--){const xe=G/x,de=m*Math.cos(xe*Math.PI/2),Te=y*Math.sin(xe*Math.PI/2)+w;for(let pe=0,Ge=H.length;pe<Ge;pe++){const De=K(H[pe],B[pe],Te);be(De.x,De.y,d+de)}for(let pe=0,Ge=z.length;pe<Ge;pe++){const De=z[pe];Y=V[pe];for(let O=0,I=De.length;O<I;O++){const ne=K(De[O],Y[O],Te);T?be(ne.x,ne.y+M[h-1].y,M[h-1].x+de):be(ne.x,ne.y,d+de)}}}le(),ge();function le(){const G=r.length/3;if(p){let xe=0,de=$*xe;for(let Te=0;Te<se;Te++){const pe=oe[Te];$e(pe[2]+de,pe[1]+de,pe[0]+de)}xe=h+x*2,de=$*xe;for(let Te=0;Te<se;Te++){const pe=oe[Te];$e(pe[0]+de,pe[1]+de,pe[2]+de)}}else{for(let xe=0;xe<se;xe++){const de=oe[xe];$e(de[2],de[1],de[0])}for(let xe=0;xe<se;xe++){const de=oe[xe];$e(de[0]+$*h,de[1]+$*h,de[2]+$*h)}}i.addGroup(G,r.length/3-G,0)}function ge(){const G=r.length/3;let xe=0;Ee(H,xe),xe+=H.length;for(let de=0,Te=z.length;de<Te;de++){const pe=z[de];Ee(pe,xe),xe+=pe.length}i.addGroup(G,r.length/3-G,1)}function Ee(G,xe){let de=G.length;for(;--de>=0;){const Te=de;let pe=de-1;pe<0&&(pe=G.length-1);for(let Ge=0,De=h+x*2;Ge<De;Ge++){const O=$*Ge,I=$*(Ge+1),ne=xe+Te+O,Se=xe+pe+O,_e=xe+pe+I,ye=xe+Te+I;nt(ne,Se,_e,ye)}}}function be(G,xe,de){l.push(G),l.push(xe),l.push(de)}function $e(G,xe,de){Le(G),Le(xe),Le(de);const Te=r.length/3,pe=S.generateTopUV(i,r,Te-3,Te-2,Te-1);Ce(pe[0]),Ce(pe[1]),Ce(pe[2])}function nt(G,xe,de,Te){Le(G),Le(xe),Le(Te),Le(xe),Le(de),Le(Te);const pe=r.length/3,Ge=S.generateSideWallUV(i,r,pe-6,pe-3,pe-2,pe-1);Ce(Ge[0]),Ce(Ge[1]),Ce(Ge[3]),Ce(Ge[1]),Ce(Ge[2]),Ce(Ge[3])}function Le(G){r.push(l[G*3+0]),r.push(l[G*3+1]),r.push(l[G*3+2])}function Ce(G){s.push(G.x),s.push(G.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return UV(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new jm[r.type]().fromJSON(r)),new Hg(i,e.options)}}const OV={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],f=e[r*3],h=e[r*3+1];return[new me(s,o),new me(a,l),new me(f,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],f=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],y=e[r*3+2],w=e[s*3],x=e[s*3+1],v=e[s*3+2];return Math.abs(a-h)<Math.abs(o-f)?[new me(o,1-l),new me(f,1-d),new me(p,1-y),new me(w,1-v)]:[new me(a,1-l),new me(h,1-d),new me(m,1-y),new me(x,1-v)]}};function UV(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Gg extends Ko{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gg(e.radius,e.detail)}}class Sh extends Ko{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sh(e.radius,e.detail)}}class Wg extends Mt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],f=[],h=[];let d=e;const p=(t-e)/r,m=new k,y=new me;for(let w=0;w<=r;w++){for(let x=0;x<=i;x++){const v=s+x/i*o;m.x=d*Math.cos(v),m.y=d*Math.sin(v),l.push(m.x,m.y,m.z),f.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,h.push(y.x,y.y)}d+=p}for(let w=0;w<r;w++){const x=w*(i+1);for(let v=0;v<i;v++){const S=v+x,M=S,T=S+i+1,P=S+i+2,b=S+1;a.push(M,T,b),a.push(T,P,b)}}this.setIndex(a),this.setAttribute("position",new Ke(l,3)),this.setAttribute("normal",new Ke(f,3)),this.setAttribute("uv",new Ke(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wg(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class jg extends Mt{constructor(e=new ja([new me(0,.5),new me(-.5,-.5),new me(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ke(r,3)),this.setAttribute("normal",new Ke(s,3)),this.setAttribute("uv",new Ke(o,2));function f(h){const d=r.length/3,p=h.extractPoints(t);let m=p.shape;const y=p.holes;cs.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,v=y.length;x<v;x++){const S=y[x];cs.isClockWise(S)===!0&&(y[x]=S.reverse())}const w=cs.triangulateShape(m,y);for(let x=0,v=y.length;x<v;x++){const S=y[x];m=m.concat(S)}for(let x=0,v=m.length;x<v;x++){const S=m[x];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let x=0,v=w.length;x<v;x++){const S=w[x],M=S[0]+d,T=S[1]+d,P=S[2]+d;i.push(M,T,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kV(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new jg(i,e.curveSegments)}}function kV(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Mh extends Mt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let f=0;const h=[],d=new k,p=new k,m=[],y=[],w=[],x=[];for(let v=0;v<=i;v++){const S=[],M=v/i;let T=0;v===0&&o===0?T=.5/t:v===i&&l===Math.PI&&(T=-.5/t);for(let P=0;P<=t;P++){const b=P/t;d.x=-e*Math.cos(r+b*s)*Math.sin(o+M*a),d.y=e*Math.cos(o+M*a),d.z=e*Math.sin(r+b*s)*Math.sin(o+M*a),y.push(d.x,d.y,d.z),p.copy(d).normalize(),w.push(p.x,p.y,p.z),x.push(b+T,1-M),S.push(f++)}h.push(S)}for(let v=0;v<i;v++)for(let S=0;S<t;S++){const M=h[v][S+1],T=h[v][S],P=h[v+1][S],b=h[v+1][S+1];(v!==0||o>0)&&m.push(M,T,b),(v!==i-1||l<Math.PI)&&m.push(T,P,b)}this.setIndex(m),this.setAttribute("position",new Ke(y,3)),this.setAttribute("normal",new Ke(w,3)),this.setAttribute("uv",new Ke(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Xg extends Ko{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xg(e.radius,e.detail)}}class Yg extends Mt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],f=[],h=new k,d=new k,p=new k;for(let m=0;m<=i;m++)for(let y=0;y<=r;y++){const w=y/r*s,x=m/i*Math.PI*2;d.x=(e+t*Math.cos(x))*Math.cos(w),d.y=(e+t*Math.cos(x))*Math.sin(w),d.z=t*Math.sin(x),a.push(d.x,d.y,d.z),h.x=e*Math.cos(w),h.y=e*Math.sin(w),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),f.push(y/r),f.push(m/i)}for(let m=1;m<=i;m++)for(let y=1;y<=r;y++){const w=(r+1)*m+y-1,x=(r+1)*(m-1)+y-1,v=(r+1)*(m-1)+y,S=(r+1)*m+y;o.push(w,x,S),o.push(x,v,S)}this.setIndex(o),this.setAttribute("position",new Ke(a,3)),this.setAttribute("normal",new Ke(l,3)),this.setAttribute("uv",new Ke(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class qg extends Mt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],f=[],h=[],d=new k,p=new k,m=new k,y=new k,w=new k,x=new k,v=new k;for(let M=0;M<=i;++M){const T=M/i*s*Math.PI*2;S(T,s,o,e,m),S(T+.01,s,o,e,y),x.subVectors(y,m),v.addVectors(y,m),w.crossVectors(x,v),v.crossVectors(w,x),w.normalize(),v.normalize();for(let P=0;P<=r;++P){const b=P/r*Math.PI*2,L=-t*Math.cos(b),D=t*Math.sin(b);d.x=m.x+(L*v.x+D*w.x),d.y=m.y+(L*v.y+D*w.y),d.z=m.z+(L*v.z+D*w.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),f.push(p.x,p.y,p.z),h.push(M/i),h.push(P/r)}}for(let M=1;M<=i;M++)for(let T=1;T<=r;T++){const P=(r+1)*(M-1)+(T-1),b=(r+1)*M+(T-1),L=(r+1)*M+T,D=(r+1)*(M-1)+T;a.push(P,b,D),a.push(b,L,D)}this.setIndex(a),this.setAttribute("position",new Ke(l,3)),this.setAttribute("normal",new Ke(f,3)),this.setAttribute("uv",new Ke(h,2));function S(M,T,P,b,L){const D=Math.cos(M),C=Math.sin(M),R=P/T*M,z=Math.cos(R);L.x=b*(2+z)*.5*D,L.y=b*(2+z)*C*.5,L.z=b*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qg(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Zg extends Mt{constructor(e=new ES(new k(-1,-1,0),new k(-1,1,0),new k(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new k,l=new k,f=new me;let h=new k;const d=[],p=[],m=[],y=[];w(),this.setIndex(y),this.setAttribute("position",new Ke(d,3)),this.setAttribute("normal",new Ke(p,3)),this.setAttribute("uv",new Ke(m,2));function w(){for(let M=0;M<t;M++)x(M);x(s===!1?t:0),S(),v()}function x(M){h=e.getPointAt(M/t,h);const T=o.normals[M],P=o.binormals[M];for(let b=0;b<=r;b++){const L=b/r*Math.PI*2,D=Math.sin(L),C=-Math.cos(L);l.x=C*T.x+D*P.x,l.y=C*T.y+D*P.y,l.z=C*T.z+D*P.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let M=1;M<=t;M++)for(let T=1;T<=r;T++){const P=(r+1)*(M-1)+(T-1),b=(r+1)*M+(T-1),L=(r+1)*M+T,D=(r+1)*(M-1)+T;y.push(P,b,D),y.push(b,L,D)}}function S(){for(let M=0;M<=t;M++)for(let T=0;T<=r;T++)f.x=M/t,f.y=T/r,m.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Zg(new jm[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class S3 extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new k,s=new k;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,h=l.length;f<h;++f){const d=l[f],p=d.start,m=d.count;for(let y=p,w=p+m;y<w;y+=3)for(let x=0;x<3;x++){const v=a.getX(y+x),S=a.getX(y+(x+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,S),f2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let f=0;f<3;f++){const h=3*a+f,d=3*a+(f+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),f2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ke(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function f2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var h2=Object.freeze({__proto__:null,BoxGeometry:rl,CapsuleGeometry:kg,CircleGeometry:Fg,ConeGeometry:zg,CylinderGeometry:Ku,DodecahedronGeometry:Bg,EdgesGeometry:v3,ExtrudeGeometry:Hg,IcosahedronGeometry:Gg,LatheGeometry:_h,OctahedronGeometry:Sh,PlaneGeometry:xh,PolyhedronGeometry:Ko,RingGeometry:Wg,ShapeGeometry:jg,SphereGeometry:Mh,TetrahedronGeometry:Xg,TorusGeometry:Yg,TorusKnotGeometry:qg,TubeGeometry:Zg,WireframeGeometry:S3});class M3 extends $n{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new He(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class w3 extends ds{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class AS extends $n{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new He(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qo,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class E3 extends AS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new He(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new He(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new He(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class T3 extends $n{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qo,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class A3 extends $n{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new He(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qo,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class b3 extends $n{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qo,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class C3 extends $n{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qo,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class P3 extends $n{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new He(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qo,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class R3 extends Ti{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ua(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function L3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function I3(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function b_(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function bS(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function FV(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const f=s.tracks[l],h=f.getValueSize(),d=[],p=[];for(let m=0;m<f.times.length;++m){const y=f.times[m]*r;if(!(y<t||y>=i)){d.push(f.times[m]);for(let w=0;w<h;++w)p.push(f.values[m*h+w])}}d.length!==0&&(f.times=Ua(d,f.times.constructor),f.values=Ua(p,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function zV(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const f=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(f===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let w;if(s<=a.times[0]){const v=h,S=d-h;w=a.values.slice(v,S)}else if(s>=a.times[y]){const v=y*d+h,S=v+d-h;w=a.values.slice(v,S)}else{const v=a.createInterpolant(),S=h,M=d-h;v.evaluate(s),w=v.resultBuffer.slice(S,M)}l==="quaternion"&&new ci().fromArray(w).normalize().conjugate().toArray(w);const x=f.times.length;for(let v=0;v<x;++v){const S=v*m+p;if(l==="quaternion")ci.multiplyQuaternionsFlat(f.values,S,w,0,f.values,S);else{const M=m-p*2;for(let T=0;T<M;++T)f.values[S+T]-=w[T]}}}return n.blendMode=iS,n}const BV={convertArray:Ua,isTypedArray:L3,getKeyframeOrder:I3,sortedArray:b_,flattenJSON:bS,subclip:FV,makeClipAdditive:zV};class wh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class N3 extends wh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Na,endingEnd:Na}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Da:s=e,a=2*t-i;break;case Gf:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Da:o=e,l=2*i-t;break;case Gf:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const f=(i-t)*.5,h=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(i-t)/(r-t),w=y*y,x=w*y,v=-p*x+2*p*w-p*y,S=(1+p)*x+(-1.5-2*p)*w+(-.5+p)*y+1,M=(-1-m)*x+(1.5+m)*w+.5*y,T=m*x-m*w;for(let P=0;P!==a;++P)s[P]=v*o[h+P]+S*o[f+P]+M*o[l+P]+T*o[d+P];return s}}class CS extends wh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=(i-t)/(r-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[f+p]*d+o[l+p]*h;return s}}class D3 extends wh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Yr{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ua(t,this.TimeBufferType),this.values=Ua(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ua(e.times,Array),values:Ua(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new D3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new CS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new N3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Vf:t=this.InterpolantFactoryMethodDiscrete;break;case Hf:t=this.InterpolantFactoryMethodLinear;break;case lm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Vf;case this.InterpolantFactoryMethodLinear:return Hf;case this.InterpolantFactoryMethodSmooth:return lm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&L3(r))for(let a=0,l=r.length;a!==l;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===lm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const f=e[a],h=e[a+1];if(f!==h&&(a!==1||f!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let y=0;y!==i;++y){const w=t[d+y];if(w!==t[p+y]||w!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,f=0;f!==i;++f)t[l+f]=t[a+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Yr.prototype.TimeBufferType=Float32Array;Yr.prototype.ValueBufferType=Float32Array;Yr.prototype.DefaultInterpolation=Hf;class sl extends Yr{}sl.prototype.ValueTypeName="bool";sl.prototype.ValueBufferType=Array;sl.prototype.DefaultInterpolation=Vf;sl.prototype.InterpolantFactoryMethodLinear=void 0;sl.prototype.InterpolantFactoryMethodSmooth=void 0;class PS extends Yr{}PS.prototype.ValueTypeName="color";class Qf extends Yr{}Qf.prototype.ValueTypeName="number";class O3 extends wh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let f=e*a;for(let h=f+a;f!==h;f+=4)ci.slerpFlat(s,0,o,f-a,o,f,l);return s}}class $u extends Yr{InterpolantFactoryMethodLinear(e){return new O3(this.times,this.values,this.getValueSize(),e)}}$u.prototype.ValueTypeName="quaternion";$u.prototype.DefaultInterpolation=Hf;$u.prototype.InterpolantFactoryMethodSmooth=void 0;class ol extends Yr{}ol.prototype.ValueTypeName="string";ol.prototype.ValueBufferType=Array;ol.prototype.DefaultInterpolation=Vf;ol.prototype.InterpolantFactoryMethodLinear=void 0;ol.prototype.InterpolantFactoryMethodSmooth=void 0;class eh extends Yr{}eh.prototype.ValueTypeName="vector";class th{constructor(e,t=-1,i,r=Ag){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ki(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(HV(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Yr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],f=[];l.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const h=I3(l);l=b_(l,1,h),f=b_(f,1,h),!r&&l[0]===0&&(l.push(s),f.push(f[0])),o.push(new Qf(".morphTargetInfluences["+t[a].name+"]",l,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const f=e[a],h=f.name.match(s);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(f)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,y,w){if(m.length!==0){const x=[],v=[];bS(m,x,v,y),x.length!==0&&w.push(new d(p,x,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let d=0;d<f.length;d++){const p=f[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let w=0;w<p[y].morphTargets.length;w++)m[p[y].morphTargets[w]]=-1;for(const w in m){const x=[],v=[];for(let S=0;S!==p[y].morphTargets.length;++S){const M=p[y];x.push(M.time),v.push(M.morphTarget===w?1:0)}r.push(new Qf(".morphTargetInfluence["+w+"]",x,v))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(eh,m+".position",p,"pos",r),i($u,m+".quaternion",p,"rot",r),i(eh,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function VV(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qf;case"vector":case"vector2":case"vector3":case"vector4":return eh;case"color":return PS;case"quaternion":return $u;case"bool":case"boolean":return sl;case"string":return ol}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function HV(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=VV(n.type);if(n.times===void 0){const t=[],i=[];bS(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Os={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class RS{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return f.push(h,d),this},this.removeHandler=function(h){const d=f.indexOf(h);return d!==-1&&f.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=f.length;d<p;d+=2){const m=f[d],y=f[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null}}}const mu=new RS;class Fi{constructor(e){this.manager=e!==void 0?e:mu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Fi.DEFAULT_MATERIAL_NAME="__DEFAULT";const bs={};class GV extends Error{constructor(e,t){super(e),this.response=t}}class Ys extends Fi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Os.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(bs[e]!==void 0){bs[e].push({onLoad:t,onProgress:i,onError:r});return}bs[e]=[],bs[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const h=bs[e],d=f.body.getReader(),p=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),m=p?parseInt(p):0,y=m!==0;let w=0;const x=new ReadableStream({start(v){S();function S(){d.read().then(({done:M,value:T})=>{if(M)v.close();else{w+=T.byteLength;const P=new ProgressEvent("progress",{lengthComputable:y,loaded:w,total:m});for(let b=0,L=h.length;b<L;b++){const D=h[b];D.onProgress&&D.onProgress(P)}v.enqueue(T),S()}})}}});return new Response(x)}else throw new GV(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(l){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return f.json();default:if(a===void 0)return f.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return f.arrayBuffer().then(y=>m.decode(y))}}}).then(f=>{Os.add(e,f);const h=bs[e];delete bs[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(f)}}).catch(f=>{const h=bs[e];if(h===void 0)throw this.manager.itemError(e),f;delete bs[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WV extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=th.parse(e[i]);t.push(r)}return t}}class jV extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Og,l=new Ys(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let f=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},f+=1,f===6&&(m.mipmapCount===1&&(a.minFilter=Sn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let w=0;w<p.mipmapCount;w++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+w]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Sn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class nh extends Fi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Os.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=qf("img");function l(){h(),Os.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class XV extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=new vh;s.colorSpace=Rn;const o=new nh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(f){o.load(e[f],function(h){s.images[f]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)l(f);return s}}class YV extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Wa,a=new Ys(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let f;try{f=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:ui,o.wrapT=f.wrapT!==void 0?f.wrapT:ui,o.magFilter=f.magFilter!==void 0?f.magFilter:Sn,o.minFilter=f.minFilter!==void 0?f.minFilter:Sn,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0?o.colorSpace=f.colorSpace:f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Bo),f.mipmapCount===1&&(o.minFilter=Sn),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f)},i,r),o}}class qV extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=new mn,o=new nh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class $o extends kt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new He(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class U3 extends $o{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new He(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const xy=new ft,d2=new k,p2=new k;class LS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yh,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new zt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;d2.setFromMatrixPosition(e.matrixWorld),t.position.copy(d2),p2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(p2),t.updateMatrixWorld(),xy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(xy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ZV extends LS{constructor(){super(new tn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Fu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class k3 extends $o{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.target=new kt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new ZV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const m2=new ft,kc=new k,_y=new k;class KV extends LS{constructor(){super(new tn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new zt(2,1,1,1),new zt(0,1,1,1),new zt(3,1,1,1),new zt(1,1,1,1),new zt(3,0,1,1),new zt(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),kc.setFromMatrixPosition(e.matrixWorld),i.position.copy(kc),_y.copy(i.position),_y.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(_y),i.updateMatrixWorld(),r.makeTranslation(-kc.x,-kc.y,-kc.z),m2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(m2)}}class F3 extends $o{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new KV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class $V extends LS{constructor(){super(new zr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class z3 extends $o{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.target=new kt,this.shadow=new $V}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class B3 extends $o{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class V3 extends $o{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class H3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class G3 extends $o{constructor(e=new H3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Kg extends Fi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ys(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Kg.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new He().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new He().setHex(o.value);break;case"v2":r.uniforms[s].value=new me().fromArray(o.value);break;case"v3":r.uniforms[s].value=new k().fromArray(o.value);break;case"v4":r.uniforms[s].value=new zt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Et().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ft().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new me().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:M3,SpriteMaterial:yS,RawShaderMaterial:w3,ShaderMaterial:ds,PointsMaterial:Dg,MeshPhysicalMaterial:E3,MeshStandardMaterial:AS,MeshPhongMaterial:T3,MeshToonMaterial:A3,MeshNormalMaterial:b3,MeshLambertMaterial:C3,MeshDepthMaterial:mS,MeshDistanceMaterial:gS,MeshBasicMaterial:Zo,MeshMatcapMaterial:P3,LineDashedMaterial:R3,LineBasicMaterial:Ti,Material:$n};return new t[e]}}class C_{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class W3 extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class j3 extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,y){if(t[y]!==void 0)return t[y];const x=m.interleavedBuffers[y],v=s(m,x.buffer),S=cu(x.type,v),M=new Ig(S,x.stride);return M.uuid=x.uuid,t[y]=M,M}function s(m,y){if(i[y]!==void 0)return i[y];const x=m.arrayBuffers[y],v=new Uint32Array(x).buffer;return i[y]=v,v}const o=e.isInstancedBufferGeometry?new W3:new Mt,a=e.data.index;if(a!==void 0){const m=cu(a.type,a.array);o.setIndex(new Vt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let w;if(y.isInterleavedBufferAttribute){const x=r(e.data,y.data);w=new Qa(x,y.itemSize,y.offset,y.normalized)}else{const x=cu(y.type,y.array),v=y.isInstancedBufferAttribute?Bu:Vt;w=new v(x,y.itemSize,y.normalized)}y.name!==void 0&&(w.name=y.name),y.usage!==void 0&&w.setUsage(y.usage),o.setAttribute(m,w)}const f=e.data.morphAttributes;if(f)for(const m in f){const y=f[m],w=[];for(let x=0,v=y.length;x<v;x++){const S=y[x];let M;if(S.isInterleavedBufferAttribute){const T=r(e.data,S.data);M=new Qa(T,S.itemSize,S.offset,S.normalized)}else{const T=cu(S.type,S.array);M=new Vt(T,S.itemSize,S.normalized)}S.name!==void 0&&(M.name=S.name),w.push(M)}o.morphAttributes[m]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,y=d.length;m!==y;++m){const w=d[m];o.addGroup(w.start,w.count,w.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new k;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new fi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class JV extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?C_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ys(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?C_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ys(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new ja().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Ng().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new j3;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in h2?a=h2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Kg;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=th.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const f=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(h)}else return l.data?{data:cu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new RS(t);s=new nh(l),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const d=e[f],p=d.url;if(Array.isArray(p)){const m=[];for(let y=0,w=p.length;y<w;y++){const x=p[y],v=a(x);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new Wa(v.data,v.width,v.height)))}r[d.uuid]=new Oa(m)}else{const m=a(d.url);r[d.uuid]=new Oa(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:cu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new nh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],f=l.url;if(Array.isArray(f)){const h=[];for(let d=0,p=f.length;d<p;d++){const m=f[d],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new Wa(y.data,y.width,y.height)))}i[l.uuid]=new Oa(h)}else{const h=await s(l.url);i[l.uuid]=new Oa(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],f=l.data;let h;Array.isArray(f)?(h=new vh,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new Wa:h=new mn,f&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,QV)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],g2),h.wrapT=i(a.wrap[1],g2)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,v2)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,v2)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,w=p.length;y<w;y++){const x=p[y];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function f(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":o=new Wm,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new He(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Lg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Rg(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new tn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new zr(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new B3(e.color,e.intensity);break;case"DirectionalLight":o=new z3(e.color,e.intensity);break;case"PointLight":o=new F3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new V3(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new k3(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new U3(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new G3().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new a3(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new In(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new l3(h,d,p),o.instanceMatrix=new Bu(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new Bu(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":h=a(e.geometry),d=l(e.material),o=new u3(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const x=new Mi;x.min.fromArray(w.boxMin),x.max.fromArray(w.boxMax);const v=new fi;return v.radius=w.sphereRadius,v.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:x,sphereInitialized:w.sphereInitialized,sphere:v}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=f(e.matricesTexture.uuid);break;case"LOD":o=new o3;break;case"Line":o=new Vo(a(e.geometry),l(e.material));break;case"LineLoop":o=new c3(a(e.geometry),l(e.material));break;case"LineSegments":o=new ms(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new f3(a(e.geometry),l(e.material));break;case"Sprite":o=new s3(l(e.material));break;case"Group":o=new du;break;case"Bone":o=new xS;break;default:o=new kt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],w=o.getObjectByProperty("uuid",y.object);w!==void 0&&o.addLevel(w,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const QV={UVMapping:Eg,CubeReflectionMapping:Xs,CubeRefractionMapping:zo,EquirectangularReflectionMapping:kf,EquirectangularRefractionMapping:Ff,CubeUVReflectionMapping:qu},g2={RepeatWrapping:zf,ClampToEdgeWrapping:ui,MirroredRepeatWrapping:Bf},v2={NearestFilter:xn,NearestMipmapNearestFilter:Vm,NearestMipmapLinearFilter:uf,LinearFilter:Sn,LinearMipmapNearestFilter:Z1,LinearMipmapLinearFilter:Bo};class e6 extends Fi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Os.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(f=>{t&&t(f),s.manager.itemEnd(e)}).catch(f=>{r&&r(f)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return Os.add(e,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){r&&r(f),Os.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Os.add(e,l),s.manager.itemStart(e)}}let Cp;class IS{static getContext(){return Cp===void 0&&(Cp=new(window.AudioContext||window.webkitAudioContext)),Cp}static setContext(e){Cp=e}}class t6 extends Fi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const f=l.slice(0);IS.getContext().decodeAudioData(f,function(d){t(d)}).catch(a)}catch(f){a(f)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const y2=new ft,x2=new ft,da=new ft;class n6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new tn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new tn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,da.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Ha*t.fov*.5)/t.zoom;let a,l;x2.elements[12]=-r,y2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,da.elements[0]=2*t.near/(l-a),da.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(da),a=-o*t.aspect-s,l=o*t.aspect-s,da.elements[0]=2*t.near/(l-a),da.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(da)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(x2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(y2)}}class NS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _2(){return(typeof performance>"u"?Date:performance).now()}const pa=new k,S2=new ci,i6=new k,ma=new k;class r6 extends kt{constructor(){super(),this.type="AudioListener",this.context=IS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new NS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pa,S2,i6),ma.set(0,0,-1).applyQuaternion(S2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(pa.x,r),t.positionY.linearRampToValueAtTime(pa.y,r),t.positionZ.linearRampToValueAtTime(pa.z,r),t.forwardX.linearRampToValueAtTime(ma.x,r),t.forwardY.linearRampToValueAtTime(ma.y,r),t.forwardZ.linearRampToValueAtTime(ma.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(pa.x,pa.y,pa.z),t.setOrientation(ma.x,ma.y,ma.z,i.x,i.y,i.z)}}class X3 extends kt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ga=new k,M2=new ci,s6=new k,va=new k;class o6 extends X3{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ga,M2,s6),va.set(0,0,1).applyQuaternion(M2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ga.x,i),t.positionY.linearRampToValueAtTime(ga.y,i),t.positionZ.linearRampToValueAtTime(ga.z,i),t.orientationX.linearRampToValueAtTime(va.x,i),t.orientationY.linearRampToValueAtTime(va.y,i),t.orientationZ.linearRampToValueAtTime(va.z,i)}else t.setPosition(ga.x,ga.y,ga.z),t.setOrientation(va.x,va.y,va.z)}}class a6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class Y3{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,f=t+t;l!==f;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){ci.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;ci.multiplyQuaternionsFlat(e,o,e,t,e,i),ci.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const DS="\\[\\]\\.:\\/",l6=new RegExp("["+DS+"]","g"),OS="[^"+DS+"]",u6="[^"+DS.replace("\\.","")+"]",c6=/((?:WC+[\/:])*)/.source.replace("WC",OS),f6=/(WCOD+)?/.source.replace("WCOD",u6),h6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",OS),d6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",OS),p6=new RegExp("^"+c6+f6+h6+d6+"$"),m6=["material","materials","bones","map"];class g6{constructor(e,t,i){const r=i||It.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class It{constructor(e,t,i){this.path=t,this.parsedPath=i||It.parseTrackName(t),this.node=It.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new It.Composite(e,t,i):new It(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(l6,"")}static parseTrackName(e){const t=p6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);m6.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=It.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}It.Composite=g6;It.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};It.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};It.prototype.GetterByBindingType=[It.prototype._getValue_direct,It.prototype._getValue_array,It.prototype._getValue_arrayElement,It.prototype._getValue_toArray];It.prototype.SetterByBindingTypeAndVersioning=[[It.prototype._setValue_direct,It.prototype._setValue_direct_setNeedsUpdate,It.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[It.prototype._setValue_array,It.prototype._setValue_array_setNeedsUpdate,It.prototype._setValue_array_setMatrixWorldNeedsUpdate],[It.prototype._setValue_arrayElement,It.prototype._setValue_arrayElement_setNeedsUpdate,It.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[It.prototype._setValue_fromArray,It.prototype._setValue_fromArray_setNeedsUpdate,It.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class v6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ki(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,f=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let w=0,x=o;w!==x;++w)s[w].push(new It(p,i[w],r[w]))}else if(y<f){a=e[y];const w=--f,x=e[w];t[x.uuid]=y,e[y]=x,t[m]=w,e[w]=p;for(let v=0,S=o;v!==S;++v){const M=s[v],T=M[w];let P=M[y];M[y]=T,P===void 0&&(P=new It(p,i[v],r[v])),M[w]=P}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],f=l.uuid,h=t[f];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[f]=d,e[d]=l;for(let m=0,y=r;m!==y;++m){const w=i[m],x=w[d],v=w[h];w[h]=x,w[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const f=arguments[a],h=f.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],y=--o,w=e[y];t[m.uuid]=d,e[d]=m,t[w.uuid]=p,e[p]=w,e.pop();for(let x=0,v=r;x!==v;++x){const S=i[x],M=S[p],T=S[y];S[d]=M,S[p]=T,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let y=0,w=r;y!==w;++y){const x=i[y];x[d]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,f=l.length,h=this.nCachedObjects_,d=new Array(f);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const y=l[p];d[p]=new It(y,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],f=e[a];t[f]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class q3{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Na,endingEnd:Na};for(let f=0;f!==o;++f){const h=s[f].createInterpolant(null);a[f]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,f=a.sampleValues;return l[0]=s,l[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case iS:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),f[h].accumulateAdditive(a);break;case Ag:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),f[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===IR;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===RR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Da,r.endingEnd=Da):(e?r.endingStart=this.zeroSlopeAtStart?Da:Na:r.endingStart=Gf,t?r.endingEnd=this.zeroSlopeAtEnd?Da:Na:r.endingEnd=Gf)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const y6=new Float32Array(1);class x6 extends ps{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,f=this._bindingsByRootAndName;let h=f[l];h===void 0&&(h={},f[l]=h);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const w=t&&t._propertyBindings[d].binding.parsedPath;y=new Y3(It.create(i,m,w),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,f=l[l.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,l[h]=f,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],f=e._cacheIndex;l._cacheIndex=f,t[f]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new CS(new Float32Array(2),new Float32Array(2),1,y6),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?th.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Ag),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;f=l.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const h=new q3(this,o,t,i);return this._bindAction(h,f),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?th.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const f=o[a];this._deactivateAction(f);const h=f._cacheIndex,d=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class US{constructor(e){this.value=e}clone(){return new US(this.value.clone===void 0?this.value:this.value.clone())}}let _6=0;class S6 extends ps{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_6++}),this.name="",this.usage=Yf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class M6 extends Ig{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class w6{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Z3{constructor(e,t,i=0,r=1/0){this.ray=new il(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ga,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return P_(e,this,i,t),i.sort(w2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)P_(e[r],this,i,t);return i.sort(w2),i}}function w2(n,e){return n.distance-e.distance}function P_(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)P_(r[s],e,t,!0)}}class R_{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(pn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class E6{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const E2=new me;class T6{constructor(e=new me(1/0,1/0),t=new me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=E2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,E2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const T2=new k,Pp=new k;class A6{constructor(e=new k,t=new k){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){T2.subVectors(e,this.start),Pp.subVectors(this.end,this.start);const i=Pp.dot(Pp);let s=Pp.dot(T2)/i;return t&&(s=pn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const A2=new k;class b6 extends kt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Mt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const f=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Ke(r,3));const s=new Ti({fog:!1,toneMapped:!1});this.cone=new ms(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),A2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(A2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ho=new k,Rp=new ft,Sy=new ft;class C6 extends ms{constructor(e){const t=K3(e),i=new Mt,r=[],s=[],o=new He(0,0,1),a=new He(0,1,0);for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ke(r,3)),i.setAttribute("color",new Ke(s,3));const l=new Ti({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Sy.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Rp.multiplyMatrices(Sy,a.matrixWorld),ho.setFromMatrixPosition(Rp),r.setXYZ(o,ho.x,ho.y,ho.z),Rp.multiplyMatrices(Sy,a.parent.matrixWorld),ho.setFromMatrixPosition(Rp),r.setXYZ(o+1,ho.x,ho.y,ho.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function K3(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,K3(n.children[t]));return e}class P6 extends In{constructor(e,t,i){const r=new Mh(t,4,2),s=new Zo({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const R6=new k,b2=new He,C2=new He;class L6 extends kt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Sh(t);r.rotateY(Math.PI*.5),this.material=new Zo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Vt(o,3)),this.add(new In(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");b2.copy(this.light.color),C2.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?b2:C2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(R6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class I6 extends ms{constructor(e=10,t=10,i=4473924,r=8947848){i=new He(i),r=new He(r);const s=t/2,o=e/t,a=e/2,l=[],f=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const w=p===s?i:r;w.toArray(f,m),m+=3,w.toArray(f,m),m+=3,w.toArray(f,m),m+=3,w.toArray(f,m),m+=3}const h=new Mt;h.setAttribute("position",new Ke(l,3)),h.setAttribute("color",new Ke(f,3));const d=new Ti({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class N6 extends ms{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new He(s),o=new He(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const w=d&1?s:o;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let y=0;y<r;y++){let w=y/r*(Math.PI*2),x=Math.sin(w)*m,v=Math.cos(w)*m;a.push(x,0,v),l.push(p.r,p.g,p.b),w=(y+1)/r*(Math.PI*2),x=Math.sin(w)*m,v=Math.cos(w)*m,a.push(x,0,v),l.push(p.r,p.g,p.b)}}const f=new Mt;f.setAttribute("position",new Ke(a,3)),f.setAttribute("color",new Ke(l,3));const h=new Ti({vertexColors:!0,toneMapped:!1});super(f,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const P2=new k,Lp=new k,R2=new k;class D6 extends kt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Mt;r.setAttribute("position",new Ke([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ti({fog:!1,toneMapped:!1});this.lightPlane=new Vo(r,s),this.add(this.lightPlane),r=new Mt,r.setAttribute("position",new Ke([0,0,0,0,0,1],3)),this.targetLine=new Vo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),P2.setFromMatrixPosition(this.light.matrixWorld),Lp.setFromMatrixPosition(this.light.target.matrixWorld),R2.subVectors(Lp,P2),this.lightPlane.lookAt(Lp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Lp),this.targetLine.scale.z=R2.length()}}const Ip=new k,hn=new gh;class O6 extends ms{constructor(e){const t=new Mt,i=new Ti({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,w){l(y),l(w)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new Ke(r,3)),t.setAttribute("color",new Ke(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new He(16755200),h=new He(16711680),d=new He(43775),p=new He(16777215),m=new He(3355443);this.setColors(f,h,d,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;hn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),yn("c",t,e,hn,0,0,-1),yn("t",t,e,hn,0,0,1),yn("n1",t,e,hn,-i,-r,-1),yn("n2",t,e,hn,i,-r,-1),yn("n3",t,e,hn,-i,r,-1),yn("n4",t,e,hn,i,r,-1),yn("f1",t,e,hn,-i,-r,1),yn("f2",t,e,hn,i,-r,1),yn("f3",t,e,hn,-i,r,1),yn("f4",t,e,hn,i,r,1),yn("u1",t,e,hn,i*.7,r*1.1,-1),yn("u2",t,e,hn,-i*.7,r*1.1,-1),yn("u3",t,e,hn,0,r*2,-1),yn("cf1",t,e,hn,-i,0,1),yn("cf2",t,e,hn,i,0,1),yn("cf3",t,e,hn,0,-r,1),yn("cf4",t,e,hn,0,r,1),yn("cn1",t,e,hn,-i,0,-1),yn("cn2",t,e,hn,i,0,-1),yn("cn3",t,e,hn,0,-r,-1),yn("cn4",t,e,hn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function yn(n,e,t,i,r,s,o){Ip.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let f=0,h=a.length;f<h;f++)l.setXYZ(a[f],Ip.x,Ip.y,Ip.z)}}const Np=new Mi;class U6 extends ms{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Mt;s.setIndex(new Vt(i,1)),s.setAttribute("position",new Vt(r,3)),super(s,new Ti({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Np.setFromObject(this.object),Np.isEmpty())return;const t=Np.min,i=Np.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class k6 extends ms{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mt;s.setIndex(new Vt(i,1)),s.setAttribute("position",new Ke(r,3)),super(s,new Ti({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class F6 extends Vo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mt;o.setAttribute("position",new Ke(s,3)),o.computeBoundingSphere(),super(o,new Ti({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mt;l.setAttribute("position",new Ke(a,3)),l.computeBoundingSphere(),this.add(new In(l,new Zo({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const L2=new k;let Dp,My;class z6 extends kt{constructor(e=new k(0,0,1),t=new k(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Dp===void 0&&(Dp=new Mt,Dp.setAttribute("position",new Ke([0,0,0,0,1,0],3)),My=new Ku(0,.5,1,5,1),My.translate(0,-.5,0)),this.position.copy(t),this.line=new Vo(Dp,new Ti({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new In(My,new Zo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{L2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(L2,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class B6 extends ms{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mt;r.setAttribute("position",new Ke(t,3)),r.setAttribute("color",new Ke(i,3));const s=new Ti({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new He,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class V6{constructor(){this.type="ShapePath",this.color=new He,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Zf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const S=[];for(let M=0,T=v.length;M<T;M++){const P=v[M],b=new ja;b.curves=P.curves,S.push(b)}return S}function i(v,S){const M=S.length;let T=!1;for(let P=M-1,b=0;b<M;P=b++){let L=S[P],D=S[b],C=D.x-L.x,R=D.y-L.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(L=S[b],C=-C,D=S[P],R=-R),v.y<L.y||v.y>D.y)continue;if(v.y===L.y){if(v.x===L.x)return!0}else{const z=R*(v.x-L.x)-C*(v.y-L.y);if(z===0)return!0;if(z<0)continue;T=!T}}else{if(v.y!==L.y)continue;if(D.x<=v.x&&v.x<=L.x||L.x<=v.x&&v.x<=D.x)return!0}}return T}const r=cs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const f=[];if(s.length===1)return a=s[0],l=new ja,l.curves=a.curves,f.push(l),f;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],y=0,w;p[y]=void 0,m[y]=[];for(let v=0,S=s.length;v<S;v++)a=s[v],w=a.getPoints(),o=r(w),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new ja,p:w},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:w[0]});if(!p[0])return t(s);if(p.length>1){let v=!1,S=0;for(let M=0,T=p.length;M<T;M++)d[M]=[];for(let M=0,T=p.length;M<T;M++){const P=m[M];for(let b=0;b<P.length;b++){const L=P[b];let D=!0;for(let C=0;C<p.length;C++)i(L.p,p[C].p)&&(M!==C&&S++,D?(D=!1,d[C].push(L)):v=!0);D&&d[M].push(L)}}S>0&&v===!1&&(m=d)}let x;for(let v=0,S=p.length;v<S;v++){l=p[v].s,f.push(l),x=m[v];for(let M=0,T=x.length;M<T;M++)l.holes.push(x[M].h)}return f}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hh);const H6=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:q1,AddEquation:Mo,AddOperation:mR,AdditiveAnimationBlendMode:iS,AdditiveBlending:Hx,AgXToneMapping:_R,AlphaFormat:ER,AlwaysCompare:HR,AlwaysDepth:lR,AlwaysStencilFunc:x_,AmbientLight:B3,AnimationAction:q3,AnimationClip:th,AnimationLoader:WV,AnimationMixer:x6,AnimationObjectGroup:v6,AnimationUtils:BV,ArcCurve:h3,ArrayCamera:n3,ArrowHelper:z6,AttachedBindMode:Yx,Audio:X3,AudioAnalyser:a6,AudioContext:IS,AudioListener:r6,AudioLoader:t6,AxesHelper:B6,BackSide:Si,BasicDepthPacking:NR,BasicShadowMap:WP,BatchedMesh:u3,Bone:xS,BooleanKeyframeTrack:sl,Box2:T6,Box3:Mi,Box3Helper:k6,BoxGeometry:rl,BoxHelper:U6,BufferAttribute:Vt,BufferGeometry:Mt,BufferGeometryLoader:j3,ByteType:MR,Cache:Os,Camera:gh,CameraHelper:O6,CanvasTexture:cV,CapsuleGeometry:kg,CatmullRomCurve3:d3,CineonToneMapping:yR,CircleGeometry:Fg,ClampToEdgeWrapping:ui,Clock:NS,Color:He,ColorKeyframeTrack:PS,ColorManagement:Ft,CompressedArrayTexture:lV,CompressedCubeTexture:uV,CompressedTexture:Og,CompressedTextureLoader:jV,ConeGeometry:zg,ConstantAlphaFactor:sR,ConstantColorFactor:iR,CubeCamera:fS,CubeReflectionMapping:Xs,CubeRefractionMapping:zo,CubeTexture:vh,CubeTextureLoader:XV,CubeUVReflectionMapping:qu,CubicBezierCurve:SS,CubicBezierCurve3:p3,CubicInterpolant:N3,CullFaceBack:Vx,CullFaceFront:GP,CullFaceFrontBack:JU,CullFaceNone:HP,Curve:Xr,CurvePath:g3,CustomBlending:jP,CustomToneMapping:xR,CylinderGeometry:Ku,Cylindrical:E6,Data3DTexture:lS,DataArrayTexture:Cg,DataTexture:Wa,DataTextureLoader:YV,DataUtils:ak,DecrementStencilOp:c4,DecrementWrapStencilOp:h4,DefaultLoadingManager:mu,DepthFormat:Do,DepthStencilFormat:Ja,DepthTexture:pS,DetachedBindMode:SR,DirectionalLight:z3,DirectionalLightHelper:D6,DiscreteInterpolant:D3,DisplayP3ColorSpace:bg,DodecahedronGeometry:Bg,DoubleSide:Ur,DstAlphaFactor:JP,DstColorFactor:eR,DynamicCopyUsage:A4,DynamicDrawUsage:Va,DynamicReadUsage:w4,EdgesGeometry:v3,EllipseCurve:Ug,EqualCompare:FR,EqualDepth:cR,EqualStencilFunc:g4,EquirectangularReflectionMapping:kf,EquirectangularRefractionMapping:Ff,Euler:mh,EventDispatcher:ps,ExtrudeGeometry:Hg,FileLoader:Ys,Float16BufferAttribute:dk,Float32BufferAttribute:Ke,Float64BufferAttribute:pk,FloatType:kr,Fog:Lg,FogExp2:Rg,FramebufferTexture:aV,FrontSide:js,Frustum:yh,GLBufferAttribute:w6,GLSL1:C4,GLSL3:__,GreaterCompare:zR,GreaterDepth:hR,GreaterEqualCompare:VR,GreaterEqualDepth:fR,GreaterEqualStencilFunc:_4,GreaterStencilFunc:y4,GridHelper:I6,Group:du,HalfFloatType:Uu,HemisphereLight:U3,HemisphereLightHelper:L6,IcosahedronGeometry:Gg,ImageBitmapLoader:e6,ImageLoader:nh,ImageUtils:aS,IncrementStencilOp:u4,IncrementWrapStencilOp:f4,InstancedBufferAttribute:Bu,InstancedBufferGeometry:W3,InstancedInterleavedBuffer:M6,InstancedMesh:l3,Int16BufferAttribute:fk,Int32BufferAttribute:hk,Int8BufferAttribute:lk,IntType:K1,InterleavedBuffer:Ig,InterleavedBufferAttribute:Qa,Interpolant:wh,InterpolateDiscrete:Vf,InterpolateLinear:Hf,InterpolateSmooth:lm,InvertStencilOp:d4,KeepStencilOp:Ea,KeyframeTrack:Yr,LOD:o3,LatheGeometry:_h,Layers:Ga,LessCompare:kR,LessDepth:uR,LessEqualCompare:sS,LessEqualDepth:Uf,LessEqualStencilFunc:v4,LessStencilFunc:m4,Light:$o,LightProbe:G3,Line:Vo,Line3:A6,LineBasicMaterial:Ti,LineCurve:MS,LineCurve3:m3,LineDashedMaterial:R3,LineLoop:c3,LineSegments:ms,LinearDisplayP3ColorSpace:ph,LinearEncoding:rS,LinearFilter:Sn,LinearInterpolant:CS,LinearMipMapLinearFilter:i4,LinearMipMapNearestFilter:n4,LinearMipmapLinearFilter:Bo,LinearMipmapNearestFilter:Z1,LinearSRGBColorSpace:hs,LinearToneMapping:gR,LinearTransfer:Wf,Loader:Fi,LoaderUtils:C_,LoadingManager:RS,LoopOnce:RR,LoopPingPong:IR,LoopRepeat:LR,LuminanceAlphaFormat:AR,LuminanceFormat:TR,MOUSE:Ma,Material:$n,MaterialLoader:Kg,MathUtils:G4,Matrix3:Et,Matrix4:ft,MaxEquation:Xx,Mesh:In,MeshBasicMaterial:Zo,MeshDepthMaterial:mS,MeshDistanceMaterial:gS,MeshLambertMaterial:C3,MeshMatcapMaterial:P3,MeshNormalMaterial:b3,MeshPhongMaterial:T3,MeshPhysicalMaterial:E3,MeshStandardMaterial:AS,MeshToonMaterial:A3,MinEquation:jx,MirroredRepeatWrapping:Bf,MixOperation:pR,MultiplyBlending:Wx,MultiplyOperation:dh,NearestFilter:xn,NearestMipMapLinearFilter:t4,NearestMipMapNearestFilter:e4,NearestMipmapLinearFilter:uf,NearestMipmapNearestFilter:Vm,NeverCompare:UR,NeverDepth:aR,NeverStencilFunc:p4,NoBlending:Fs,NoColorSpace:Yi,NoToneMapping:ls,NormalAnimationBlendMode:Ag,NormalBlending:Ba,NotEqualCompare:BR,NotEqualDepth:dR,NotEqualStencilFunc:x4,NumberKeyframeTrack:Qf,Object3D:kt,ObjectLoader:JV,ObjectSpaceNormalMap:OR,OctahedronGeometry:Sh,OneFactor:ZP,OneMinusConstantAlphaFactor:oR,OneMinusConstantColorFactor:rR,OneMinusDstAlphaFactor:QP,OneMinusDstColorFactor:tR,OneMinusSrcAlphaFactor:Bm,OneMinusSrcColorFactor:$P,OrthographicCamera:zr,P3Primaries:Xf,PCFShadowMap:wg,PCFSoftShadowMap:lf,PMREMGenerator:M_,Path:Zf,PerspectiveCamera:tn,Plane:Rs,PlaneGeometry:xh,PlaneHelper:F6,PointLight:F3,PointLightHelper:P6,Points:f3,PointsMaterial:Dg,PolarGridHelper:N6,PolyhedronGeometry:Ko,PositionalAudio:o6,PropertyBinding:It,PropertyMixer:Y3,QuadraticBezierCurve:wS,QuadraticBezierCurve3:ES,Quaternion:ci,QuaternionKeyframeTrack:$u,QuaternionLinearInterpolant:O3,RED_GREEN_RGTC2_Format:v_,RED_RGTC1_Format:PR,REVISION:hh,RGBADepthPacking:DR,RGBAFormat:xi,RGBAIntegerFormat:tS,RGBA_ASTC_10x10_Format:f_,RGBA_ASTC_10x5_Format:l_,RGBA_ASTC_10x6_Format:u_,RGBA_ASTC_10x8_Format:c_,RGBA_ASTC_12x10_Format:h_,RGBA_ASTC_12x12_Format:d_,RGBA_ASTC_4x4_Format:e_,RGBA_ASTC_5x4_Format:t_,RGBA_ASTC_5x5_Format:n_,RGBA_ASTC_6x5_Format:i_,RGBA_ASTC_6x6_Format:r_,RGBA_ASTC_8x5_Format:s_,RGBA_ASTC_8x6_Format:o_,RGBA_ASTC_8x8_Format:a_,RGBA_BPTC_Format:am,RGBA_ETC2_EAC_Format:Qx,RGBA_PVRTC_2BPPV1_Format:$x,RGBA_PVRTC_4BPPV1_Format:Kx,RGBA_S3TC_DXT1_Format:rm,RGBA_S3TC_DXT3_Format:sm,RGBA_S3TC_DXT5_Format:om,RGB_BPTC_SIGNED_Format:p_,RGB_BPTC_UNSIGNED_Format:m_,RGB_ETC1_Format:nS,RGB_ETC2_Format:Jx,RGB_PVRTC_2BPPV1_Format:Zx,RGB_PVRTC_4BPPV1_Format:qx,RGB_S3TC_DXT1_Format:im,RGFormat:CR,RGIntegerFormat:eS,RawShaderMaterial:w3,Ray:il,Raycaster:Z3,Rec709Primaries:jf,RectAreaLight:V3,RedFormat:bR,RedIntegerFormat:Q1,ReinhardToneMapping:vR,RenderTarget:jR,RepeatWrapping:zf,ReplaceStencilOp:l4,ReverseSubtractEquation:YP,RingGeometry:Wg,SIGNED_RED_GREEN_RGTC2_Format:y_,SIGNED_RED_RGTC1_Format:g_,SRGBColorSpace:Rn,SRGBTransfer:Wt,Scene:Wm,ShaderChunk:_t,ShaderLib:Or,ShaderMaterial:ds,ShadowMaterial:M3,Shape:ja,ShapeGeometry:jg,ShapePath:V6,ShapeUtils:cs,ShortType:wR,Skeleton:Ng,SkeletonHelper:C6,SkinnedMesh:a3,Source:Oa,Sphere:fi,SphereGeometry:Mh,Spherical:R_,SphericalHarmonics3:H3,SplineCurve:TS,SpotLight:k3,SpotLightHelper:b6,Sprite:s3,SpriteMaterial:yS,SrcAlphaFactor:zm,SrcAlphaSaturateFactor:nR,SrcColorFactor:KP,StaticCopyUsage:T4,StaticDrawUsage:Yf,StaticReadUsage:M4,StereoCamera:n6,StreamCopyUsage:b4,StreamDrawUsage:S4,StreamReadUsage:E4,StringKeyframeTrack:ol,SubtractEquation:XP,SubtractiveBlending:Gx,TOUCH:wa,TangentSpaceNormalMap:qo,TetrahedronGeometry:Xg,Texture:mn,TextureLoader:qV,TorusGeometry:Yg,TorusKnotGeometry:qg,Triangle:Li,TriangleFanDrawMode:o4,TriangleStripDrawMode:s4,TrianglesDrawMode:r4,TubeGeometry:Zg,TwoPassDoubleSide:QU,UVMapping:Eg,Uint16BufferAttribute:uS,Uint32BufferAttribute:cS,Uint8BufferAttribute:uk,Uint8ClampedBufferAttribute:ck,Uniform:US,UniformsGroup:S6,UniformsLib:Ne,UniformsUtils:qR,UnsignedByteType:us,UnsignedInt248Type:No,UnsignedIntType:Ds,UnsignedShort4444Type:$1,UnsignedShort5551Type:J1,UnsignedShortType:Tg,VSMShadowMap:Ir,Vector2:me,Vector3:k,Vector4:zt,VectorKeyframeTrack:eh,VideoTexture:oV,WebGL1Renderer:i3,WebGL3DRenderTarget:Z4,WebGLArrayRenderTarget:q4,WebGLCoordinateSystem:Fr,WebGLCubeRenderTarget:hS,WebGLMultipleRenderTargets:K4,WebGLRenderTarget:Wr,WebGLRenderer:vS,WebGLUtils:t3,WebGPUCoordinateSystem:ku,WireframeGeometry:S3,WrapAroundEnding:Gf,ZeroCurvatureEnding:Na,ZeroFactor:qP,ZeroSlopeEnding:Da,ZeroStencilOp:a4,_SRGBAFormat:Hm,createCanvasElement:WR,sRGBEncoding:Oo},Symbol.toStringTag,{value:"Module"}));var $3={exports:{}},al={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */al.ConcurrentRoot=1;al.ContinuousEventPriority=4;al.DefaultEventPriority=16;al.DiscreteEventPriority=1;al.IdleEventPriority=536870912;al.LegacyRoot=0;$3.exports=al;var gu=$3.exports;function G6(n){let e;const t=new Set,i=(f,h)=>{const d=typeof f=="function"?f(e):f;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(f,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!d(p,y)){const w=p;f(p=y,w)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(f,h,d)=>h||d?s(f,h,d):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,l),l}const W6=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),I2=W6?W.useEffect:W.useLayoutEffect;function J3(n){const e=typeof n=="function"?G6(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=W.useReducer(x=>x+1,0),o=e.getState(),a=W.useRef(o),l=W.useRef(i),f=W.useRef(r),h=W.useRef(!1),d=W.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||f.current!==r||h.current)&&(p=i(o),m=!r(d.current,p)),I2(()=>{m&&(d.current=p),a.current=o,l.current=i,f.current=r,h.current=!1});const y=W.useRef(o);I2(()=>{const x=()=>{try{const S=e.getState(),M=l.current(S);f.current(d.current,M)||(a.current=S,d.current=M,s())}catch{h.current=!0,s()}},v=e.subscribe(x);return e.getState()!==y.current&&x(),v},[]);const w=m?p:d.current;return W.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var Q3={exports:{}},wy={exports:{}},Ey={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function j6(){return N2||(N2=1,function(n){function e(N,B){var V=N.length;N.push(B);e:for(;0<V;){var Y=V-1>>>1,J=N[Y];if(0<r(J,B))N[Y]=B,N[V]=J,V=Y;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],V=N.pop();if(V!==B){N[0]=V;e:for(var Y=0,J=N.length,Q=J>>>1;Y<Q;){var le=2*(Y+1)-1,ge=N[le],Ee=le+1,be=N[Ee];if(0>r(ge,V))Ee<J&&0>r(be,ge)?(N[Y]=be,N[Ee]=V,Y=Ee):(N[Y]=ge,N[le]=V,Y=le);else if(Ee<J&&0>r(be,V))N[Y]=be,N[Ee]=V,Y=Ee;else break e}}return B}function r(N,B){var V=N.sortIndex-B.sortIndex;return V!==0?V:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,d=null,p=3,m=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(N){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=N)i(f),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(f)}}function T(N){if(w=!1,M(N),!y)if(t(l)!==null)y=!0,$(P);else{var B=t(f);B!==null&&se(T,B.startTime-N)}}function P(N,B){y=!1,w&&(w=!1,v(D),D=-1),m=!0;var V=p;try{for(M(B),d=t(l);d!==null&&(!(d.expirationTime>B)||N&&!z());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,p=d.priorityLevel;var J=Y(d.expirationTime<=B);B=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&i(l),M(B)}else i(l);d=t(l)}if(d!==null)var Q=!0;else{var le=t(f);le!==null&&se(T,le.startTime-B),Q=!1}return Q}finally{d=null,p=V,m=!1}}var b=!1,L=null,D=-1,C=5,R=-1;function z(){return!(n.unstable_now()-R<C)}function Z(){if(L!==null){var N=n.unstable_now();R=N;var B=!0;try{B=L(!0,N)}finally{B?oe():(b=!1,L=null)}}else b=!1}var oe;if(typeof S=="function")oe=function(){S(Z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,K=H.port2;H.port1.onmessage=Z,oe=function(){K.postMessage(null)}}else oe=function(){x(Z,0)};function $(N){L=N,b||(b=!0,oe())}function se(N,B){D=x(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,$(P))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var V=p;p=B;try{return N()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=p;p=N;try{return B()}finally{p=V}},n.unstable_scheduleCallback=function(N,B,V){var Y=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,N){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,N={id:h++,callback:B,priorityLevel:N,startTime:V,expirationTime:J,sortIndex:-1},V>Y?(N.sortIndex=V,e(f,N),t(l)===null&&N===t(f)&&(w?(v(D),D=-1):w=!0,se(T,V-Y))):(N.sortIndex=J,e(l,N),y||m||(y=!0,$(P))),N},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(N){var B=p;return function(){var V=p;p=B;try{return N.apply(this,arguments)}finally{p=V}}}}(Ey)),Ey}var D2;function X6(){return D2||(D2=1,wy.exports=j6()),wy.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y6=function(e){var t={},i=W,r=X6(),s=Object.assign;function o(u){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),P=Symbol.iterator;function b(u){return u===null||typeof u!="object"?null:(u=P&&u[P]||u["@@iterator"],typeof u=="function"?u:null)}function L(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case f:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case v:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case y:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case w:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case S:return c=u.displayName||null,c!==null?c:L(u.type)||"Memo";case M:c=u._payload,u=u._init;try{return L(u(c))}catch{}}return null}function D(u){var c=u.type;switch(u.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=c.render,u=u.displayName||u.name||"",c.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(c);case 8:return c===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function C(u){var c=u,g=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,c.flags&4098&&(g=c.return),u=c.return;while(u)}return c.tag===3?g:null}function R(u){if(C(u)!==u)throw Error(o(188))}function z(u){var c=u.alternate;if(!c){if(c=C(u),c===null)throw Error(o(188));return c!==u?null:u}for(var g=u,_=c;;){var E=g.return;if(E===null)break;var A=E.alternate;if(A===null){if(_=E.return,_!==null){g=_;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===g)return R(E),u;if(A===_)return R(E),c;A=A.sibling}throw Error(o(188))}if(g.return!==_.return)g=E,_=A;else{for(var F=!1,q=E.child;q;){if(q===g){F=!0,g=E,_=A;break}if(q===_){F=!0,_=E,g=A;break}q=q.sibling}if(!F){for(q=A.child;q;){if(q===g){F=!0,g=A,_=E;break}if(q===_){F=!0,_=A,g=E;break}q=q.sibling}if(!F)throw Error(o(189))}}if(g.alternate!==_)throw Error(o(190))}if(g.tag!==3)throw Error(o(188));return g.stateNode.current===g?u:c}function Z(u){return u=z(u),u!==null?oe(u):null}function oe(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var c=oe(u);if(c!==null)return c;u=u.sibling}return null}function H(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var c=H(u);if(c!==null)return c}u=u.sibling}return null}var K=Array.isArray,$=e.getPublicInstance,se=e.getRootHostContext,N=e.getChildHostContext,B=e.prepareForCommit,V=e.resetAfterCommit,Y=e.createInstance,J=e.appendInitialChild,Q=e.finalizeInitialChildren,le=e.prepareUpdate,ge=e.shouldSetTextContent,Ee=e.createTextInstance,be=e.scheduleTimeout,$e=e.cancelTimeout,nt=e.noTimeout,Le=e.isPrimaryRenderer,Ce=e.supportsMutation,G=e.supportsPersistence,xe=e.supportsHydration,de=e.getInstanceFromNode,Te=e.preparePortalMount,pe=e.getCurrentEventPriority,Ge=e.detachDeletedInstance,De=e.supportsMicrotasks,O=e.scheduleMicrotask,I=e.supportsTestSelectors,ne=e.findFiberRoot,Se=e.getBoundingRect,_e=e.getTextContent,ye=e.isHiddenSubtree,qe=e.matchAccessibilityRole,Ie=e.setFocusIfFocusable,Oe=e.setupIntersectionObserver,it=e.appendChild,pt=e.appendChildToContainer,Me=e.commitTextUpdate,Ct=e.commitMount,xt=e.commitUpdate,ct=e.insertBefore,tt=e.insertInContainerBefore,We=e.removeChild,X=e.removeChildFromContainer,ve=e.resetTextContent,Be=e.hideInstance,Fe=e.hideTextInstance,we=e.unhideInstance,j=e.unhideTextInstance,Re=e.clearContainer,Ue=e.cloneInstance,rt=e.createContainerChildSet,Ze=e.appendChildToContainerChildSet,bt=e.finalizeContainerChildren,Rt=e.replaceContainerChildren,Ht=e.cloneHiddenInstance,Kt=e.cloneHiddenTextInstance,Lt=e.canHydrateInstance,Gn=e.canHydrateTextInstance,tr=e.canHydrateSuspenseInstance,Ju=e.isSuspenseInstancePending,Qu=e.isSuspenseInstanceFallback,cl=e.registerSuspenseInstanceRetry,Ks=e.getNextHydratableSibling,fl=e.getFirstHydratableChild,Lh=e.getFirstHydratableChildWithinContainer,Ih=e.getFirstHydratableChildWithinSuspenseInstance,o0=e.hydrateInstance,a0=e.hydrateTextInstance,l0=e.hydrateSuspenseInstance,U=e.getNextHydratableInstanceAfterSuspenseInstance,ie=e.commitHydratedContainer,ue=e.commitHydratedSuspenseInstance,ce=e.clearSuspenseBoundary,ae=e.clearSuspenseBoundaryFromContainer,Ve=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,ot=e.didNotMatchHydratedTextInstance,at;function mt(u){if(at===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);at=c&&c[1]||""}return`
`+at+u}var dt=!1;function gt(u,c){if(!u||dt)return"";dt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Pe){var _=Pe}Reflect.construct(u,[],c)}else{try{c.call()}catch(Pe){_=Pe}u.call(c.prototype)}else{try{throw Error()}catch(Pe){_=Pe}u()}}catch(Pe){if(Pe&&_&&typeof Pe.stack=="string"){for(var E=Pe.stack.split(`
`),A=_.stack.split(`
`),F=E.length-1,q=A.length-1;1<=F&&0<=q&&E[F]!==A[q];)q--;for(;1<=F&&0<=q;F--,q--)if(E[F]!==A[q]){if(F!==1||q!==1)do if(F--,q--,0>q||E[F]!==A[q]){var he=`
`+E[F].replace(" at new "," at ");return u.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",u.displayName)),he}while(1<=F&&0<=q);break}}}finally{dt=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?mt(u):""}var nn=Object.prototype.hasOwnProperty,Wn=[],Xt=-1;function On(u){return{current:u}}function lt(u){0>Xt||(u.current=Wn[Xt],Wn[Xt]=null,Xt--)}function Xe(u,c){Xt++,Wn[Xt]=u.current,u.current=c}var nr={},Tt=On(nr),cn=On(!1),qr=nr;function ir(u,c){var g=u.type.contextTypes;if(!g)return nr;var _=u.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var E={},A;for(A in g)E[A]=c[A];return _&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=c,u.__reactInternalMemoizedMaskedChildContext=E),E}function Un(u){return u=u.childContextTypes,u!=null}function gn(){lt(cn),lt(Tt)}function Zr(u,c,g){if(Tt.current!==nr)throw Error(o(168));Xe(Tt,c),Xe(cn,g)}function hl(u,c,g){var _=u.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return g;_=_.getChildContext();for(var E in _)if(!(E in c))throw Error(o(108,D(u)||"Unknown",E));return s({},g,_)}function jn(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||nr,qr=Tt.current,Xe(Tt,u),Xe(cn,cn.current),!0}function dl(u,c,g){var _=u.stateNode;if(!_)throw Error(o(169));g?(u=hl(u,c,qr),_.__reactInternalMemoizedMergedChildContext=u,lt(cn),lt(Tt),Xe(Tt,u)):lt(cn),Xe(cn,g)}var zi=Math.clz32?Math.clz32:lN,Nh=Math.log,aN=Math.LN2;function lN(u){return u>>>=0,u===0?32:31-(Nh(u)/aN|0)|0}var Dh=64,Oh=4194304;function ec(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Uh(u,c){var g=u.pendingLanes;if(g===0)return 0;var _=0,E=u.suspendedLanes,A=u.pingedLanes,F=g&268435455;if(F!==0){var q=F&~E;q!==0?_=ec(q):(A&=F,A!==0&&(_=ec(A)))}else F=g&~E,F!==0?_=ec(F):A!==0&&(_=ec(A));if(_===0)return 0;if(c!==0&&c!==_&&!(c&E)&&(E=_&-_,A=c&-c,E>=A||E===16&&(A&4194240)!==0))return c;if(_&4&&(_|=g&16),c=u.entangledLanes,c!==0)for(u=u.entanglements,c&=_;0<c;)g=31-zi(c),E=1<<g,_|=u[g],c&=~E;return _}function uN(u,c){switch(u){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cN(u,c){for(var g=u.suspendedLanes,_=u.pingedLanes,E=u.expirationTimes,A=u.pendingLanes;0<A;){var F=31-zi(A),q=1<<F,he=E[F];he===-1?(!(q&g)||q&_)&&(E[F]=uN(q,c)):he<=c&&(u.expiredLanes|=q),A&=~q}}function u0(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function c0(u){for(var c=[],g=0;31>g;g++)c.push(u);return c}function tc(u,c,g){u.pendingLanes|=c,c!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,c=31-zi(c),u[c]=g}function fN(u,c){var g=u.pendingLanes&~c;u.pendingLanes=c,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=c,u.mutableReadLanes&=c,u.entangledLanes&=c,c=u.entanglements;var _=u.eventTimes;for(u=u.expirationTimes;0<g;){var E=31-zi(g),A=1<<E;c[E]=0,_[E]=-1,u[E]=-1,g&=~A}}function f0(u,c){var g=u.entangledLanes|=c;for(u=u.entanglements;g;){var _=31-zi(g),E=1<<_;E&c|u[_]&c&&(u[_]|=c),g&=~E}}var Dt=0;function fM(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var h0=r.unstable_scheduleCallback,hM=r.unstable_cancelCallback,hN=r.unstable_shouldYield,dN=r.unstable_requestPaint,kn=r.unstable_now,d0=r.unstable_ImmediatePriority,pN=r.unstable_UserBlockingPriority,p0=r.unstable_NormalPriority,mN=r.unstable_IdlePriority,kh=null,Kr=null;function gN(u){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(kh,u,void 0,(u.current.flags&128)===128)}catch{}}function vN(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var $r=typeof Object.is=="function"?Object.is:vN,gs=null,Fh=!1,m0=!1;function dM(u){gs===null?gs=[u]:gs.push(u)}function yN(u){Fh=!0,dM(u)}function Jr(){if(!m0&&gs!==null){m0=!0;var u=0,c=Dt;try{var g=gs;for(Dt=1;u<g.length;u++){var _=g[u];do _=_(!0);while(_!==null)}gs=null,Fh=!1}catch(E){throw gs!==null&&(gs=gs.slice(u+1)),h0(d0,Jr),E}finally{Dt=c,m0=!1}}return null}var xN=a.ReactCurrentBatchConfig;function zh(u,c){if($r(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var g=Object.keys(u),_=Object.keys(c);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var E=g[_];if(!nn.call(c,E)||!$r(u[E],c[E]))return!1}return!0}function _N(u){switch(u.tag){case 5:return mt(u.type);case 16:return mt("Lazy");case 13:return mt("Suspense");case 19:return mt("SuspenseList");case 0:case 2:case 15:return u=gt(u.type,!1),u;case 11:return u=gt(u.type.render,!1),u;case 1:return u=gt(u.type,!0),u;default:return""}}function Tr(u,c){if(u&&u.defaultProps){c=s({},c),u=u.defaultProps;for(var g in u)c[g]===void 0&&(c[g]=u[g]);return c}return c}var Bh=On(null),Vh=null,pl=null,g0=null;function v0(){g0=pl=Vh=null}function pM(u,c,g){Le?(Xe(Bh,c._currentValue),c._currentValue=g):(Xe(Bh,c._currentValue2),c._currentValue2=g)}function y0(u){var c=Bh.current;lt(Bh),Le?u._currentValue=c:u._currentValue2=c}function x0(u,c,g){for(;u!==null;){var _=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),u===g)break;u=u.return}}function ml(u,c){Vh=u,g0=pl=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&c&&(Hi=!0),u.firstContext=null)}function rr(u){var c=Le?u._currentValue:u._currentValue2;if(g0!==u)if(u={context:u,memoizedValue:c,next:null},pl===null){if(Vh===null)throw Error(o(308));pl=u,Vh.dependencies={lanes:0,firstContext:u}}else pl=pl.next=u;return c}var Qr=null,$s=!1;function _0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mM(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function vs(u,c){return{eventTime:u,lane:c,tag:0,payload:null,callback:null,next:null}}function Js(u,c){var g=u.updateQueue;g!==null&&(g=g.shared,wn!==null&&u.mode&1&&!(At&2)?(u=g.interleaved,u===null?(c.next=c,Qr===null?Qr=[g]:Qr.push(g)):(c.next=u.next,u.next=c),g.interleaved=c):(u=g.pending,u===null?c.next=c:(c.next=u.next,u.next=c),g.pending=c))}function Hh(u,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var _=c.lanes;_&=u.pendingLanes,g|=_,c.lanes=g,f0(u,g)}}function gM(u,c){var g=u.updateQueue,_=u.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var E=null,A=null;if(g=g.firstBaseUpdate,g!==null){do{var F={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};A===null?E=A=F:A=A.next=F,g=g.next}while(g!==null);A===null?E=A=c:A=A.next=c}else E=A=c;g={baseState:_.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:_.shared,effects:_.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=c:u.next=c,g.lastBaseUpdate=c}function Gh(u,c,g,_){var E=u.updateQueue;$s=!1;var A=E.firstBaseUpdate,F=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var he=q,Pe=he.next;he.next=null,F===null?A=Pe:F.next=Pe,F=he;var Ye=u.alternate;Ye!==null&&(Ye=Ye.updateQueue,q=Ye.lastBaseUpdate,q!==F&&(q===null?Ye.firstBaseUpdate=Pe:q.next=Pe,Ye.lastBaseUpdate=he))}if(A!==null){var vt=E.baseState;F=0,Ye=Pe=he=null,q=A;do{var st=q.lane,Gt=q.eventTime;if((_&st)===st){Ye!==null&&(Ye=Ye.next={eventTime:Gt,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var et=u,ti=q;switch(st=c,Gt=g,ti.tag){case 1:if(et=ti.payload,typeof et=="function"){vt=et.call(Gt,vt,st);break e}vt=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=ti.payload,st=typeof et=="function"?et.call(Gt,vt,st):et,st==null)break e;vt=s({},vt,st);break e;case 2:$s=!0}}q.callback!==null&&q.lane!==0&&(u.flags|=64,st=E.effects,st===null?E.effects=[q]:st.push(q))}else Gt={eventTime:Gt,lane:st,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ye===null?(Pe=Ye=Gt,he=vt):Ye=Ye.next=Gt,F|=st;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;st=q,q=st.next,st.next=null,E.lastBaseUpdate=st,E.shared.pending=null}}while(!0);if(Ye===null&&(he=vt),E.baseState=he,E.firstBaseUpdate=Pe,E.lastBaseUpdate=Ye,c=E.shared.interleaved,c!==null){E=c;do F|=E.lane,E=E.next;while(E!==c)}else A===null&&(E.shared.lanes=0);El|=F,u.lanes=F,u.memoizedState=vt}}function vM(u,c,g){if(u=c.effects,c.effects=null,u!==null)for(c=0;c<u.length;c++){var _=u[c],E=_.callback;if(E!==null){if(_.callback=null,_=g,typeof E!="function")throw Error(o(191,E));E.call(_)}}}var yM=new i.Component().refs;function S0(u,c,g,_){c=u.memoizedState,g=g(_,c),g=g==null?c:s({},c,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var Wh={isMounted:function(u){return(u=u._reactInternals)?C(u)===u:!1},enqueueSetState:function(u,c,g){u=u._reactInternals;var _=pi(),E=to(u),A=vs(_,E);A.payload=c,g!=null&&(A.callback=g),Js(u,A),c=ur(u,E,_),c!==null&&Hh(c,u,E)},enqueueReplaceState:function(u,c,g){u=u._reactInternals;var _=pi(),E=to(u),A=vs(_,E);A.tag=1,A.payload=c,g!=null&&(A.callback=g),Js(u,A),c=ur(u,E,_),c!==null&&Hh(c,u,E)},enqueueForceUpdate:function(u,c){u=u._reactInternals;var g=pi(),_=to(u),E=vs(g,_);E.tag=2,c!=null&&(E.callback=c),Js(u,E),c=ur(u,_,g),c!==null&&Hh(c,u,_)}};function xM(u,c,g,_,E,A,F){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(_,A,F):c.prototype&&c.prototype.isPureReactComponent?!zh(g,_)||!zh(E,A):!0}function _M(u,c,g){var _=!1,E=nr,A=c.contextType;return typeof A=="object"&&A!==null?A=rr(A):(E=Un(c)?qr:Tt.current,_=c.contextTypes,A=(_=_!=null)?ir(u,E):nr),c=new c(g,A),u.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Wh,u.stateNode=c,c._reactInternals=u,_&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=A),c}function SM(u,c,g,_){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,_),c.state!==u&&Wh.enqueueReplaceState(c,c.state,null)}function M0(u,c,g,_){var E=u.stateNode;E.props=g,E.state=u.memoizedState,E.refs=yM,_0(u);var A=c.contextType;typeof A=="object"&&A!==null?E.context=rr(A):(A=Un(c)?qr:Tt.current,E.context=ir(u,A)),E.state=u.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(S0(u,c,A,g),E.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&Wh.enqueueReplaceState(E,E.state,null),Gh(u,g,E,_),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var gl=[],vl=0,jh=null,Xh=0,sr=[],or=0,Qo=null,ys=1,xs="";function ea(u,c){gl[vl++]=Xh,gl[vl++]=jh,jh=u,Xh=c}function MM(u,c,g){sr[or++]=ys,sr[or++]=xs,sr[or++]=Qo,Qo=u;var _=ys;u=xs;var E=32-zi(_)-1;_&=~(1<<E),g+=1;var A=32-zi(c)+E;if(30<A){var F=E-E%5;A=(_&(1<<F)-1).toString(32),_>>=F,E-=F,ys=1<<32-zi(c)+E|g<<E|_,xs=A+u}else ys=1<<A|g<<E|_,xs=u}function w0(u){u.return!==null&&(ea(u,1),MM(u,1,0))}function E0(u){for(;u===jh;)jh=gl[--vl],gl[vl]=null,Xh=gl[--vl],gl[vl]=null;for(;u===Qo;)Qo=sr[--or],sr[or]=null,xs=sr[--or],sr[or]=null,ys=sr[--or],sr[or]=null}var Bi=null,Vi=null,$t=!1,nc=!1,Ar=null;function wM(u,c){var g=cr(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=u,c=u.deletions,c===null?(u.deletions=[g],u.flags|=16):c.push(g)}function EM(u,c){switch(u.tag){case 5:return c=Lt(c,u.type,u.pendingProps),c!==null?(u.stateNode=c,Bi=u,Vi=fl(c),!0):!1;case 6:return c=Gn(c,u.pendingProps),c!==null?(u.stateNode=c,Bi=u,Vi=null,!0):!1;case 13:if(c=tr(c),c!==null){var g=Qo!==null?{id:ys,overflow:xs}:null;return u.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=cr(18,null,null,0),g.stateNode=c,g.return=u,u.child=g,Bi=u,Vi=null,!0}return!1;default:return!1}}function T0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function A0(u){if($t){var c=Vi;if(c){var g=c;if(!EM(u,c)){if(T0(u))throw Error(o(418));c=Ks(g);var _=Bi;c&&EM(u,c)?wM(_,g):(u.flags=u.flags&-4097|2,$t=!1,Bi=u)}}else{if(T0(u))throw Error(o(418));u.flags=u.flags&-4097|2,$t=!1,Bi=u}}}function TM(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Bi=u}function ic(u){if(!xe||u!==Bi)return!1;if(!$t)return TM(u),$t=!0,!1;if(u.tag!==3&&(u.tag!==5||Ve(u.type)&&!ge(u.type,u.memoizedProps))){var c=Vi;if(c){if(T0(u)){for(u=Vi;u;)u=Ks(u);throw Error(o(418))}for(;c;)wM(u,c),c=Ks(c)}}if(TM(u),u.tag===13){if(!xe)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Vi=U(u)}else Vi=Bi?Ks(u.stateNode):null;return!0}function yl(){xe&&(Vi=Bi=null,nc=$t=!1)}function b0(u){Ar===null?Ar=[u]:Ar.push(u)}function rc(u,c,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(o(309));var _=g.stateNode}if(!_)throw Error(o(147,u));var E=_,A=""+u;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===A?c.ref:(c=function(F){var q=E.refs;q===yM&&(q=E.refs={}),F===null?delete q[A]:q[A]=F},c._stringRef=A,c)}if(typeof u!="string")throw Error(o(284));if(!g._owner)throw Error(o(290,u))}return u}function Yh(u,c){throw u=Object.prototype.toString.call(c),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u))}function AM(u){var c=u._init;return c(u._payload)}function bM(u){function c(re,ee){if(u){var fe=re.deletions;fe===null?(re.deletions=[ee],re.flags|=16):fe.push(ee)}}function g(re,ee){if(!u)return null;for(;ee!==null;)c(re,ee),ee=ee.sibling;return null}function _(re,ee){for(re=new Map;ee!==null;)ee.key!==null?re.set(ee.key,ee):re.set(ee.index,ee),ee=ee.sibling;return re}function E(re,ee){return re=io(re,ee),re.index=0,re.sibling=null,re}function A(re,ee,fe){return re.index=fe,u?(fe=re.alternate,fe!==null?(fe=fe.index,fe<ee?(re.flags|=2,ee):fe):(re.flags|=2,ee)):(re.flags|=1048576,ee)}function F(re){return u&&re.alternate===null&&(re.flags|=2),re}function q(re,ee,fe,ze){return ee===null||ee.tag!==6?(ee=cv(fe,re.mode,ze),ee.return=re,ee):(ee=E(ee,fe),ee.return=re,ee)}function he(re,ee,fe,ze){var Je=fe.type;return Je===h?Ye(re,ee,fe.props.children,ze,fe.key):ee!==null&&(ee.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===M&&AM(Je)===ee.type)?(ze=E(ee,fe.props),ze.ref=rc(re,ee,fe),ze.return=re,ze):(ze=Ed(fe.type,fe.key,fe.props,null,re.mode,ze),ze.ref=rc(re,ee,fe),ze.return=re,ze)}function Pe(re,ee,fe,ze){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==fe.containerInfo||ee.stateNode.implementation!==fe.implementation?(ee=fv(fe,re.mode,ze),ee.return=re,ee):(ee=E(ee,fe.children||[]),ee.return=re,ee)}function Ye(re,ee,fe,ze,Je){return ee===null||ee.tag!==7?(ee=aa(fe,re.mode,ze,Je),ee.return=re,ee):(ee=E(ee,fe),ee.return=re,ee)}function vt(re,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=cv(""+ee,re.mode,fe),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return fe=Ed(ee.type,ee.key,ee.props,null,re.mode,fe),fe.ref=rc(re,null,ee),fe.return=re,fe;case f:return ee=fv(ee,re.mode,fe),ee.return=re,ee;case M:var ze=ee._init;return vt(re,ze(ee._payload),fe)}if(K(ee)||b(ee))return ee=aa(ee,re.mode,fe,null),ee.return=re,ee;Yh(re,ee)}return null}function st(re,ee,fe,ze){var Je=ee!==null?ee.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return Je!==null?null:q(re,ee,""+fe,ze);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return fe.key===Je?he(re,ee,fe,ze):null;case f:return fe.key===Je?Pe(re,ee,fe,ze):null;case M:return Je=fe._init,st(re,ee,Je(fe._payload),ze)}if(K(fe)||b(fe))return Je!==null?null:Ye(re,ee,fe,ze,null);Yh(re,fe)}return null}function Gt(re,ee,fe,ze,Je){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return re=re.get(fe)||null,q(ee,re,""+ze,Je);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return re=re.get(ze.key===null?fe:ze.key)||null,he(ee,re,ze,Je);case f:return re=re.get(ze.key===null?fe:ze.key)||null,Pe(ee,re,ze,Je);case M:var wt=ze._init;return Gt(re,ee,fe,wt(ze._payload),Je)}if(K(ze)||b(ze))return re=re.get(fe)||null,Ye(ee,re,ze,Je,null);Yh(ee,ze)}return null}function et(re,ee,fe,ze){for(var Je=null,wt=null,yt=ee,Ot=ee=0,zn=null;yt!==null&&Ot<fe.length;Ot++){yt.index>Ot?(zn=yt,yt=null):zn=yt.sibling;var Ut=st(re,yt,fe[Ot],ze);if(Ut===null){yt===null&&(yt=zn);break}u&&yt&&Ut.alternate===null&&c(re,yt),ee=A(Ut,ee,Ot),wt===null?Je=Ut:wt.sibling=Ut,wt=Ut,yt=zn}if(Ot===fe.length)return g(re,yt),$t&&ea(re,Ot),Je;if(yt===null){for(;Ot<fe.length;Ot++)yt=vt(re,fe[Ot],ze),yt!==null&&(ee=A(yt,ee,Ot),wt===null?Je=yt:wt.sibling=yt,wt=yt);return $t&&ea(re,Ot),Je}for(yt=_(re,yt);Ot<fe.length;Ot++)zn=Gt(yt,re,Ot,fe[Ot],ze),zn!==null&&(u&&zn.alternate!==null&&yt.delete(zn.key===null?Ot:zn.key),ee=A(zn,ee,Ot),wt===null?Je=zn:wt.sibling=zn,wt=zn);return u&&yt.forEach(function(ro){return c(re,ro)}),$t&&ea(re,Ot),Je}function ti(re,ee,fe,ze){var Je=b(fe);if(typeof Je!="function")throw Error(o(150));if(fe=Je.call(fe),fe==null)throw Error(o(151));for(var wt=Je=null,yt=ee,Ot=ee=0,zn=null,Ut=fe.next();yt!==null&&!Ut.done;Ot++,Ut=fe.next()){yt.index>Ot?(zn=yt,yt=null):zn=yt.sibling;var ro=st(re,yt,Ut.value,ze);if(ro===null){yt===null&&(yt=zn);break}u&&yt&&ro.alternate===null&&c(re,yt),ee=A(ro,ee,Ot),wt===null?Je=ro:wt.sibling=ro,wt=ro,yt=zn}if(Ut.done)return g(re,yt),$t&&ea(re,Ot),Je;if(yt===null){for(;!Ut.done;Ot++,Ut=fe.next())Ut=vt(re,Ut.value,ze),Ut!==null&&(ee=A(Ut,ee,Ot),wt===null?Je=Ut:wt.sibling=Ut,wt=Ut);return $t&&ea(re,Ot),Je}for(yt=_(re,yt);!Ut.done;Ot++,Ut=fe.next())Ut=Gt(yt,re,Ot,Ut.value,ze),Ut!==null&&(u&&Ut.alternate!==null&&yt.delete(Ut.key===null?Ot:Ut.key),ee=A(Ut,ee,Ot),wt===null?Je=Ut:wt.sibling=Ut,wt=Ut);return u&&yt.forEach(function(KN){return c(re,KN)}),$t&&ea(re,Ot),Je}function fr(re,ee,fe,ze){if(typeof fe=="object"&&fe!==null&&fe.type===h&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:e:{for(var Je=fe.key,wt=ee;wt!==null;){if(wt.key===Je){if(Je=fe.type,Je===h){if(wt.tag===7){g(re,wt.sibling),ee=E(wt,fe.props.children),ee.return=re,re=ee;break e}}else if(wt.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===M&&AM(Je)===wt.type){g(re,wt.sibling),ee=E(wt,fe.props),ee.ref=rc(re,wt,fe),ee.return=re,re=ee;break e}g(re,wt);break}else c(re,wt);wt=wt.sibling}fe.type===h?(ee=aa(fe.props.children,re.mode,ze,fe.key),ee.return=re,re=ee):(ze=Ed(fe.type,fe.key,fe.props,null,re.mode,ze),ze.ref=rc(re,ee,fe),ze.return=re,re=ze)}return F(re);case f:e:{for(wt=fe.key;ee!==null;){if(ee.key===wt)if(ee.tag===4&&ee.stateNode.containerInfo===fe.containerInfo&&ee.stateNode.implementation===fe.implementation){g(re,ee.sibling),ee=E(ee,fe.children||[]),ee.return=re,re=ee;break e}else{g(re,ee);break}else c(re,ee);ee=ee.sibling}ee=fv(fe,re.mode,ze),ee.return=re,re=ee}return F(re);case M:return wt=fe._init,fr(re,ee,wt(fe._payload),ze)}if(K(fe))return et(re,ee,fe,ze);if(b(fe))return ti(re,ee,fe,ze);Yh(re,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ee!==null&&ee.tag===6?(g(re,ee.sibling),ee=E(ee,fe),ee.return=re,re=ee):(g(re,ee),ee=cv(fe,re.mode,ze),ee.return=re,re=ee),F(re)):g(re,ee)}return fr}var xl=bM(!0),CM=bM(!1),sc={},ar=On(sc),oc=On(sc),_l=On(sc);function es(u){if(u===sc)throw Error(o(174));return u}function C0(u,c){Xe(_l,c),Xe(oc,u),Xe(ar,sc),u=se(c),lt(ar),Xe(ar,u)}function Sl(){lt(ar),lt(oc),lt(_l)}function PM(u){var c=es(_l.current),g=es(ar.current);c=N(g,u.type,c),g!==c&&(Xe(oc,u),Xe(ar,c))}function P0(u){oc.current===u&&(lt(ar),lt(oc))}var rn=On(0);function qh(u){for(var c=u;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Ju(g)||Qu(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var R0=[];function L0(){for(var u=0;u<R0.length;u++){var c=R0[u];Le?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}R0.length=0}var Zh=a.ReactCurrentDispatcher,lr=a.ReactCurrentBatchConfig,Ml=0,fn=null,Jn=null,Fn=null,Kh=!1,ac=!1,lc=0,SN=0;function Qn(){throw Error(o(321))}function I0(u,c){if(c===null)return!1;for(var g=0;g<c.length&&g<u.length;g++)if(!$r(u[g],c[g]))return!1;return!0}function N0(u,c,g,_,E,A){if(Ml=A,fn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Zh.current=u===null||u.memoizedState===null?TN:AN,u=g(_,E),ac){A=0;do{if(ac=!1,lc=0,25<=A)throw Error(o(301));A+=1,Fn=Jn=null,c.updateQueue=null,Zh.current=bN,u=g(_,E)}while(ac)}if(Zh.current=td,c=Jn!==null&&Jn.next!==null,Ml=0,Fn=Jn=fn=null,Kh=!1,c)throw Error(o(300));return u}function D0(){var u=lc!==0;return lc=0,u}function _s(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?fn.memoizedState=Fn=u:Fn=Fn.next=u,Fn}function ts(){if(Jn===null){var u=fn.alternate;u=u!==null?u.memoizedState:null}else u=Jn.next;var c=Fn===null?fn.memoizedState:Fn.next;if(c!==null)Fn=c,Jn=u;else{if(u===null)throw Error(o(310));Jn=u,u={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},Fn===null?fn.memoizedState=Fn=u:Fn=Fn.next=u}return Fn}function ta(u,c){return typeof c=="function"?c(u):c}function $h(u){var c=ts(),g=c.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=u;var _=Jn,E=_.baseQueue,A=g.pending;if(A!==null){if(E!==null){var F=E.next;E.next=A.next,A.next=F}_.baseQueue=E=A,g.pending=null}if(E!==null){A=E.next,_=_.baseState;var q=F=null,he=null,Pe=A;do{var Ye=Pe.lane;if((Ml&Ye)===Ye)he!==null&&(he=he.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),_=Pe.hasEagerState?Pe.eagerState:u(_,Pe.action);else{var vt={lane:Ye,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};he===null?(q=he=vt,F=_):he=he.next=vt,fn.lanes|=Ye,El|=Ye}Pe=Pe.next}while(Pe!==null&&Pe!==A);he===null?F=_:he.next=q,$r(_,c.memoizedState)||(Hi=!0),c.memoizedState=_,c.baseState=F,c.baseQueue=he,g.lastRenderedState=_}if(u=g.interleaved,u!==null){E=u;do A=E.lane,fn.lanes|=A,El|=A,E=E.next;while(E!==u)}else E===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function Jh(u){var c=ts(),g=c.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=u;var _=g.dispatch,E=g.pending,A=c.memoizedState;if(E!==null){g.pending=null;var F=E=E.next;do A=u(A,F.action),F=F.next;while(F!==E);$r(A,c.memoizedState)||(Hi=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),g.lastRenderedState=A}return[A,_]}function RM(){}function LM(u,c){var g=fn,_=ts(),E=c(),A=!$r(_.memoizedState,E);if(A&&(_.memoizedState=E,Hi=!0),_=_.queue,cc(DM.bind(null,g,_,u),[u]),_.getSnapshot!==c||A||Fn!==null&&Fn.memoizedState.tag&1){if(g.flags|=2048,uc(9,NM.bind(null,g,_,E,c),void 0,null),wn===null)throw Error(o(349));Ml&30||IM(g,c,E)}return E}function IM(u,c,g){u.flags|=16384,u={getSnapshot:c,value:g},c=fn.updateQueue,c===null?(c={lastEffect:null,stores:null},fn.updateQueue=c,c.stores=[u]):(g=c.stores,g===null?c.stores=[u]:g.push(u))}function NM(u,c,g,_){c.value=g,c.getSnapshot=_,OM(c)&&ur(u,1,-1)}function DM(u,c,g){return g(function(){OM(c)&&ur(u,1,-1)})}function OM(u){var c=u.getSnapshot;u=u.value;try{var g=c();return!$r(u,g)}catch{return!0}}function O0(u){var c=_s();return typeof u=="function"&&(u=u()),c.memoizedState=c.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:u},c.queue=u,u=u.dispatch=EN.bind(null,fn,u),[c.memoizedState,u]}function uc(u,c,g,_){return u={tag:u,create:c,destroy:g,deps:_,next:null},c=fn.updateQueue,c===null?(c={lastEffect:null,stores:null},fn.updateQueue=c,c.lastEffect=u.next=u):(g=c.lastEffect,g===null?c.lastEffect=u.next=u:(_=g.next,g.next=u,u.next=_,c.lastEffect=u)),u}function UM(){return ts().memoizedState}function Qh(u,c,g,_){var E=_s();fn.flags|=u,E.memoizedState=uc(1|c,g,void 0,_===void 0?null:_)}function ed(u,c,g,_){var E=ts();_=_===void 0?null:_;var A=void 0;if(Jn!==null){var F=Jn.memoizedState;if(A=F.destroy,_!==null&&I0(_,F.deps)){E.memoizedState=uc(c,g,A,_);return}}fn.flags|=u,E.memoizedState=uc(1|c,g,A,_)}function U0(u,c){return Qh(8390656,8,u,c)}function cc(u,c){return ed(2048,8,u,c)}function kM(u,c){return ed(4,2,u,c)}function FM(u,c){return ed(4,4,u,c)}function zM(u,c){if(typeof c=="function")return u=u(),c(u),function(){c(null)};if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function BM(u,c,g){return g=g!=null?g.concat([u]):null,ed(4,4,zM.bind(null,c,u),g)}function k0(){}function VM(u,c){var g=ts();c=c===void 0?null:c;var _=g.memoizedState;return _!==null&&c!==null&&I0(c,_[1])?_[0]:(g.memoizedState=[u,c],u)}function HM(u,c){var g=ts();c=c===void 0?null:c;var _=g.memoizedState;return _!==null&&c!==null&&I0(c,_[1])?_[0]:(u=u(),g.memoizedState=[u,c],u)}function MN(u,c){var g=Dt;Dt=g!==0&&4>g?g:4,u(!0);var _=lr.transition;lr.transition={};try{u(!1),c()}finally{Dt=g,lr.transition=_}}function GM(){return ts().memoizedState}function wN(u,c,g){var _=to(u);g={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null},WM(u)?jM(c,g):(XM(u,c,g),g=pi(),u=ur(u,_,g),u!==null&&YM(u,c,_))}function EN(u,c,g){var _=to(u),E={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null};if(WM(u))jM(c,E);else{XM(u,c,E);var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var F=c.lastRenderedState,q=A(F,g);if(E.hasEagerState=!0,E.eagerState=q,$r(q,F))return}catch{}finally{}g=pi(),u=ur(u,_,g),u!==null&&YM(u,c,_)}}function WM(u){var c=u.alternate;return u===fn||c!==null&&c===fn}function jM(u,c){ac=Kh=!0;var g=u.pending;g===null?c.next=c:(c.next=g.next,g.next=c),u.pending=c}function XM(u,c,g){wn!==null&&u.mode&1&&!(At&2)?(u=c.interleaved,u===null?(g.next=g,Qr===null?Qr=[c]:Qr.push(c)):(g.next=u.next,u.next=g),c.interleaved=g):(u=c.pending,u===null?g.next=g:(g.next=u.next,u.next=g),c.pending=g)}function YM(u,c,g){if(g&4194240){var _=c.lanes;_&=u.pendingLanes,g|=_,c.lanes=g,f0(u,g)}}var td={readContext:rr,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},TN={readContext:rr,useCallback:function(u,c){return _s().memoizedState=[u,c===void 0?null:c],u},useContext:rr,useEffect:U0,useImperativeHandle:function(u,c,g){return g=g!=null?g.concat([u]):null,Qh(4194308,4,zM.bind(null,c,u),g)},useLayoutEffect:function(u,c){return Qh(4194308,4,u,c)},useInsertionEffect:function(u,c){return Qh(4,2,u,c)},useMemo:function(u,c){var g=_s();return c=c===void 0?null:c,u=u(),g.memoizedState=[u,c],u},useReducer:function(u,c,g){var _=_s();return c=g!==void 0?g(c):c,_.memoizedState=_.baseState=c,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:c},_.queue=u,u=u.dispatch=wN.bind(null,fn,u),[_.memoizedState,u]},useRef:function(u){var c=_s();return u={current:u},c.memoizedState=u},useState:O0,useDebugValue:k0,useDeferredValue:function(u){var c=O0(u),g=c[0],_=c[1];return U0(function(){var E=lr.transition;lr.transition={};try{_(u)}finally{lr.transition=E}},[u]),g},useTransition:function(){var u=O0(!1),c=u[0];return u=MN.bind(null,u[1]),_s().memoizedState=u,[c,u]},useMutableSource:function(){},useSyncExternalStore:function(u,c,g){var _=fn,E=_s();if($t){if(g===void 0)throw Error(o(407));g=g()}else{if(g=c(),wn===null)throw Error(o(349));Ml&30||IM(_,c,g)}E.memoizedState=g;var A={value:g,getSnapshot:c};return E.queue=A,U0(DM.bind(null,_,A,u),[u]),_.flags|=2048,uc(9,NM.bind(null,_,A,g,c),void 0,null),g},useId:function(){var u=_s(),c=wn.identifierPrefix;if($t){var g=xs,_=ys;g=(_&~(1<<32-zi(_)-1)).toString(32)+g,c=":"+c+"R"+g,g=lc++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=SN++,c=":"+c+"r"+g.toString(32)+":";return u.memoizedState=c},unstable_isNewReconciler:!1},AN={readContext:rr,useCallback:VM,useContext:rr,useEffect:cc,useImperativeHandle:BM,useInsertionEffect:kM,useLayoutEffect:FM,useMemo:HM,useReducer:$h,useRef:UM,useState:function(){return $h(ta)},useDebugValue:k0,useDeferredValue:function(u){var c=$h(ta),g=c[0],_=c[1];return cc(function(){var E=lr.transition;lr.transition={};try{_(u)}finally{lr.transition=E}},[u]),g},useTransition:function(){var u=$h(ta)[0],c=ts().memoizedState;return[u,c]},useMutableSource:RM,useSyncExternalStore:LM,useId:GM,unstable_isNewReconciler:!1},bN={readContext:rr,useCallback:VM,useContext:rr,useEffect:cc,useImperativeHandle:BM,useInsertionEffect:kM,useLayoutEffect:FM,useMemo:HM,useReducer:Jh,useRef:UM,useState:function(){return Jh(ta)},useDebugValue:k0,useDeferredValue:function(u){var c=Jh(ta),g=c[0],_=c[1];return cc(function(){var E=lr.transition;lr.transition={};try{_(u)}finally{lr.transition=E}},[u]),g},useTransition:function(){var u=Jh(ta)[0],c=ts().memoizedState;return[u,c]},useMutableSource:RM,useSyncExternalStore:LM,useId:GM,unstable_isNewReconciler:!1};function F0(u,c){try{var g="",_=c;do g+=_N(_),_=_.return;while(_);var E=g}catch(A){E=`
Error generating stack: `+A.message+`
`+A.stack}return{value:u,source:c,stack:E}}function z0(u,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var CN=typeof WeakMap=="function"?WeakMap:Map;function qM(u,c,g){g=vs(-1,g),g.tag=3,g.payload={element:null};var _=c.value;return g.callback=function(){vd||(vd=!0,iv=_),z0(u,c)},g}function ZM(u,c,g){g=vs(-1,g),g.tag=3;var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=c.value;g.payload=function(){return _(E)},g.callback=function(){z0(u,c)}}var A=u.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(g.callback=function(){z0(u,c),typeof _!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var F=c.stack;this.componentDidCatch(c.value,{componentStack:F!==null?F:""})}),g}function KM(u,c,g){var _=u.pingCache;if(_===null){_=u.pingCache=new CN;var E=new Set;_.set(c,E)}else E=_.get(c),E===void 0&&(E=new Set,_.set(c,E));E.has(g)||(E.add(g),u=HN.bind(null,u,c,g),c.then(u,u))}function $M(u){do{var c;if((c=u.tag===13)&&(c=u.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return u;u=u.return}while(u!==null);return null}function JM(u,c,g,_,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===c?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=vs(-1,1),c.tag=2,Js(g,c))),g.lanes|=1),u)}function ns(u){u.flags|=4}function QM(u,c){if(u!==null&&u.child===c.child)return!0;if(c.flags&16)return!1;for(u=c.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var fc,hc,nd,id;if(Ce)fc=function(u,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)J(u,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},hc=function(){},nd=function(u,c,g,_,E){if(u=u.memoizedProps,u!==_){var A=c.stateNode,F=es(ar.current);g=le(A,g,u,_,E,F),(c.updateQueue=g)&&ns(c)}},id=function(u,c,g,_){g!==_&&ns(c)};else if(G){fc=function(u,c,g,_){for(var E=c.child;E!==null;){if(E.tag===5){var A=E.stateNode;g&&_&&(A=Ht(A,E.type,E.memoizedProps,E)),J(u,A)}else if(E.tag===6)A=E.stateNode,g&&_&&(A=Kt(A,E.memoizedProps,E)),J(u,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),fc(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var ew=function(u,c,g,_){for(var E=c.child;E!==null;){if(E.tag===5){var A=E.stateNode;g&&_&&(A=Ht(A,E.type,E.memoizedProps,E)),Ze(u,A)}else if(E.tag===6)A=E.stateNode,g&&_&&(A=Kt(A,E.memoizedProps,E)),Ze(u,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),ew(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};hc=function(u,c){var g=c.stateNode;if(!QM(u,c)){u=g.containerInfo;var _=rt(u);ew(_,c,!1,!1),g.pendingChildren=_,ns(c),bt(u,_)}},nd=function(u,c,g,_,E){var A=u.stateNode,F=u.memoizedProps;if((u=QM(u,c))&&F===_)c.stateNode=A;else{var q=c.stateNode,he=es(ar.current),Pe=null;F!==_&&(Pe=le(q,g,F,_,E,he)),u&&Pe===null?c.stateNode=A:(A=Ue(A,Pe,g,F,_,c,u,q),Q(A,g,_,E,he)&&ns(c),c.stateNode=A,u?ns(c):fc(A,c,!1,!1))}},id=function(u,c,g,_){g!==_?(u=es(_l.current),g=es(ar.current),c.stateNode=Ee(_,u,g,c),ns(c)):c.stateNode=u.stateNode}}else hc=function(){},nd=function(){},id=function(){};function dc(u,c){if(!$t)switch(u.tailMode){case"hidden":c=u.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:_.sibling=null}}function ei(u){var c=u.alternate!==null&&u.alternate.child===u.child,g=0,_=0;if(c)for(var E=u.child;E!==null;)g|=E.lanes|E.childLanes,_|=E.subtreeFlags&14680064,_|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)g|=E.lanes|E.childLanes,_|=E.subtreeFlags,_|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=_,u.childLanes=g,c}function PN(u,c,g){var _=c.pendingProps;switch(E0(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(c),null;case 1:return Un(c.type)&&gn(),ei(c),null;case 3:return _=c.stateNode,Sl(),lt(cn),lt(Tt),L0(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(u===null||u.child===null)&&(ic(c)?ns(c):u===null||u.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Ar!==null&&(ov(Ar),Ar=null))),hc(u,c),ei(c),null;case 5:P0(c),g=es(_l.current);var E=c.type;if(u!==null&&c.stateNode!=null)nd(u,c,E,_,g),u.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(o(166));return ei(c),null}if(u=es(ar.current),ic(c)){if(!xe)throw Error(o(175));u=o0(c.stateNode,c.type,c.memoizedProps,g,u,c,!nc),c.updateQueue=u,u!==null&&ns(c)}else{var A=Y(E,_,g,u,c);fc(A,c,!1,!1),c.stateNode=A,Q(A,E,_,g,u)&&ns(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ei(c),null;case 6:if(u&&c.stateNode!=null)id(u,c,u.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(o(166));if(u=es(_l.current),g=es(ar.current),ic(c)){if(!xe)throw Error(o(176));if(u=c.stateNode,_=c.memoizedProps,(g=a0(u,_,c,!nc))&&(E=Bi,E!==null))switch(A=(E.mode&1)!==0,E.tag){case 3:Qe(E.stateNode.containerInfo,u,_,A);break;case 5:ot(E.type,E.memoizedProps,E.stateNode,u,_,A)}g&&ns(c)}else c.stateNode=Ee(_,u,g,c)}return ei(c),null;case 13:if(lt(rn),_=c.memoizedState,$t&&Vi!==null&&c.mode&1&&!(c.flags&128)){for(u=Vi;u;)u=Ks(u);return yl(),c.flags|=98560,c}if(_!==null&&_.dehydrated!==null){if(_=ic(c),u===null){if(!_)throw Error(o(318));if(!xe)throw Error(o(344));if(u=c.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));l0(u,c)}else yl(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return ei(c),null}return Ar!==null&&(ov(Ar),Ar=null),c.flags&128?(c.lanes=g,c):(_=_!==null,g=!1,u===null?ic(c):g=u.memoizedState!==null,_&&!g&&(c.child.flags|=8192,c.mode&1&&(u===null||rn.current&1?Cn===0&&(Cn=3):lv())),c.updateQueue!==null&&(c.flags|=4),ei(c),null);case 4:return Sl(),hc(u,c),u===null&&Te(c.stateNode.containerInfo),ei(c),null;case 10:return y0(c.type._context),ei(c),null;case 17:return Un(c.type)&&gn(),ei(c),null;case 19:if(lt(rn),E=c.memoizedState,E===null)return ei(c),null;if(_=(c.flags&128)!==0,A=E.rendering,A===null)if(_)dc(E,!1);else{if(Cn!==0||u!==null&&u.flags&128)for(u=c.child;u!==null;){if(A=qh(u),A!==null){for(c.flags|=128,dc(E,!1),u=A.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),c.subtreeFlags=0,u=g,_=c.child;_!==null;)g=_,E=u,g.flags&=14680066,A=g.alternate,A===null?(g.childLanes=0,g.lanes=E,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=A.childLanes,g.lanes=A.lanes,g.child=A.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=A.memoizedProps,g.memoizedState=A.memoizedState,g.updateQueue=A.updateQueue,g.type=A.type,E=A.dependencies,g.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),_=_.sibling;return Xe(rn,rn.current&1|2),c.child}u=u.sibling}E.tail!==null&&kn()>nv&&(c.flags|=128,_=!0,dc(E,!1),c.lanes=4194304)}else{if(!_)if(u=qh(A),u!==null){if(c.flags|=128,_=!0,u=u.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),dc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!$t)return ei(c),null}else 2*kn()-E.renderingStartTime>nv&&g!==1073741824&&(c.flags|=128,_=!0,dc(E,!1),c.lanes=4194304);E.isBackwards?(A.sibling=c.child,c.child=A):(u=E.last,u!==null?u.sibling=A:c.child=A,E.last=A)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=kn(),c.sibling=null,u=rn.current,Xe(rn,_?u&1|2:u&1),c):(ei(c),null);case 22:case 23:return av(),_=c.memoizedState!==null,u!==null&&u.memoizedState!==null!==_&&(c.flags|=8192),_&&c.mode&1?Gi&1073741824&&(ei(c),Ce&&c.subtreeFlags&6&&(c.flags|=8192)):ei(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var RN=a.ReactCurrentOwner,Hi=!1;function di(u,c,g,_){c.child=u===null?CM(c,null,g,_):xl(c,u.child,g,_)}function tw(u,c,g,_,E){g=g.render;var A=c.ref;return ml(c,E),_=N0(u,c,g,_,A,E),g=D0(),u!==null&&!Hi?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~E,Ss(u,c,E)):($t&&g&&w0(c),c.flags|=1,di(u,c,_,E),c.child)}function nw(u,c,g,_,E){if(u===null){var A=g.type;return typeof A=="function"&&!uv(A)&&A.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=A,iw(u,c,A,_,E)):(u=Ed(g.type,null,_,c,c.mode,E),u.ref=c.ref,u.return=c,c.child=u)}if(A=u.child,!(u.lanes&E)){var F=A.memoizedProps;if(g=g.compare,g=g!==null?g:zh,g(F,_)&&u.ref===c.ref)return Ss(u,c,E)}return c.flags|=1,u=io(A,_),u.ref=c.ref,u.return=c,c.child=u}function iw(u,c,g,_,E){if(u!==null&&zh(u.memoizedProps,_)&&u.ref===c.ref)if(Hi=!1,(u.lanes&E)!==0)u.flags&131072&&(Hi=!0);else return c.lanes=u.lanes,Ss(u,c,E);return B0(u,c,g,_,E)}function rw(u,c,g){var _=c.pendingProps,E=_.children,A=u!==null?u.memoizedState:null;if(_.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},Xe(wl,Gi),Gi|=g;else if(g&1073741824)c.memoizedState={baseLanes:0,cachePool:null},_=A!==null?A.baseLanes:g,Xe(wl,Gi),Gi|=_;else return u=A!==null?A.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:u,cachePool:null},c.updateQueue=null,Xe(wl,Gi),Gi|=u,null;else A!==null?(_=A.baseLanes|g,c.memoizedState=null):_=g,Xe(wl,Gi),Gi|=_;return di(u,c,E,g),c.child}function sw(u,c){var g=c.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function B0(u,c,g,_,E){var A=Un(g)?qr:Tt.current;return A=ir(c,A),ml(c,E),g=N0(u,c,g,_,A,E),_=D0(),u!==null&&!Hi?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~E,Ss(u,c,E)):($t&&_&&w0(c),c.flags|=1,di(u,c,g,E),c.child)}function ow(u,c,g,_,E){if(Un(g)){var A=!0;jn(c)}else A=!1;if(ml(c,E),c.stateNode===null)u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),_M(c,g,_),M0(c,g,_,E),_=!0;else if(u===null){var F=c.stateNode,q=c.memoizedProps;F.props=q;var he=F.context,Pe=g.contextType;typeof Pe=="object"&&Pe!==null?Pe=rr(Pe):(Pe=Un(g)?qr:Tt.current,Pe=ir(c,Pe));var Ye=g.getDerivedStateFromProps,vt=typeof Ye=="function"||typeof F.getSnapshotBeforeUpdate=="function";vt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(q!==_||he!==Pe)&&SM(c,F,_,Pe),$s=!1;var st=c.memoizedState;F.state=st,Gh(c,_,F,E),he=c.memoizedState,q!==_||st!==he||cn.current||$s?(typeof Ye=="function"&&(S0(c,g,Ye,_),he=c.memoizedState),(q=$s||xM(c,g,q,_,st,he,Pe))?(vt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(c.flags|=4194308)):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=he),F.props=_,F.state=he,F.context=Pe,_=q):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{F=c.stateNode,mM(u,c),q=c.memoizedProps,Pe=c.type===c.elementType?q:Tr(c.type,q),F.props=Pe,vt=c.pendingProps,st=F.context,he=g.contextType,typeof he=="object"&&he!==null?he=rr(he):(he=Un(g)?qr:Tt.current,he=ir(c,he));var Gt=g.getDerivedStateFromProps;(Ye=typeof Gt=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(q!==vt||st!==he)&&SM(c,F,_,he),$s=!1,st=c.memoizedState,F.state=st,Gh(c,_,F,E);var et=c.memoizedState;q!==vt||st!==et||cn.current||$s?(typeof Gt=="function"&&(S0(c,g,Gt,_),et=c.memoizedState),(Pe=$s||xM(c,g,Pe,_,st,et,he)||!1)?(Ye||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(_,et,he),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(_,et,he)),typeof F.componentDidUpdate=="function"&&(c.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof F.componentDidUpdate!="function"||q===u.memoizedProps&&st===u.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&st===u.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=et),F.props=_,F.state=et,F.context=he,_=Pe):(typeof F.componentDidUpdate!="function"||q===u.memoizedProps&&st===u.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&st===u.memoizedState||(c.flags|=1024),_=!1)}return V0(u,c,g,_,A,E)}function V0(u,c,g,_,E,A){sw(u,c);var F=(c.flags&128)!==0;if(!_&&!F)return E&&dl(c,g,!1),Ss(u,c,A);_=c.stateNode,RN.current=c;var q=F&&typeof g.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,u!==null&&F?(c.child=xl(c,u.child,null,A),c.child=xl(c,null,q,A)):di(u,c,q,A),c.memoizedState=_.state,E&&dl(c,g,!0),c.child}function aw(u){var c=u.stateNode;c.pendingContext?Zr(u,c.pendingContext,c.pendingContext!==c.context):c.context&&Zr(u,c.context,!1),C0(u,c.containerInfo)}function lw(u,c,g,_,E){return yl(),b0(E),c.flags|=256,di(u,c,g,_),c.child}var rd={dehydrated:null,treeContext:null,retryLane:0};function sd(u){return{baseLanes:u,cachePool:null}}function uw(u,c,g){var _=c.pendingProps,E=rn.current,A=!1,F=(c.flags&128)!==0,q;if((q=F)||(q=u!==null&&u.memoizedState===null?!1:(E&2)!==0),q?(A=!0,c.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),Xe(rn,E&1),u===null)return A0(c),u=c.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(c.mode&1?Qu(u)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(E=_.children,u=_.fallback,A?(_=c.mode,A=c.child,E={mode:"hidden",children:E},!(_&1)&&A!==null?(A.childLanes=0,A.pendingProps=E):A=Td(E,_,0,null),u=aa(u,_,g,null),A.return=c,u.return=c,A.sibling=u,c.child=A,c.child.memoizedState=sd(g),c.memoizedState=rd,u):H0(c,E));if(E=u.memoizedState,E!==null){if(q=E.dehydrated,q!==null){if(F)return c.flags&256?(c.flags&=-257,od(u,c,g,Error(o(422)))):c.memoizedState!==null?(c.child=u.child,c.flags|=128,null):(A=_.fallback,E=c.mode,_=Td({mode:"visible",children:_.children},E,0,null),A=aa(A,E,g,null),A.flags|=2,_.return=c,A.return=c,_.sibling=A,c.child=_,c.mode&1&&xl(c,u.child,null,g),c.child.memoizedState=sd(g),c.memoizedState=rd,A);if(!(c.mode&1))c=od(u,c,g,null);else if(Qu(q))c=od(u,c,g,Error(o(419)));else if(_=(g&u.childLanes)!==0,Hi||_){if(_=wn,_!==null){switch(g&-g){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}_=A&(_.suspendedLanes|g)?0:A,_!==0&&_!==E.retryLane&&(E.retryLane=_,ur(u,_,-1))}lv(),c=od(u,c,g,Error(o(421)))}else Ju(q)?(c.flags|=128,c.child=u.child,c=GN.bind(null,u),cl(q,c),c=null):(g=E.treeContext,xe&&(Vi=Ih(q),Bi=c,$t=!0,Ar=null,nc=!1,g!==null&&(sr[or++]=ys,sr[or++]=xs,sr[or++]=Qo,ys=g.id,xs=g.overflow,Qo=c)),c=H0(c,c.pendingProps.children),c.flags|=4096);return c}return A?(_=fw(u,c,_.children,_.fallback,g),A=c.child,E=u.child.memoizedState,A.memoizedState=E===null?sd(g):{baseLanes:E.baseLanes|g,cachePool:null},A.childLanes=u.childLanes&~g,c.memoizedState=rd,_):(g=cw(u,c,_.children,g),c.memoizedState=null,g)}return A?(_=fw(u,c,_.children,_.fallback,g),A=c.child,E=u.child.memoizedState,A.memoizedState=E===null?sd(g):{baseLanes:E.baseLanes|g,cachePool:null},A.childLanes=u.childLanes&~g,c.memoizedState=rd,_):(g=cw(u,c,_.children,g),c.memoizedState=null,g)}function H0(u,c){return c=Td({mode:"visible",children:c},u.mode,0,null),c.return=u,u.child=c}function cw(u,c,g,_){var E=u.child;return u=E.sibling,g=io(E,{mode:"visible",children:g}),!(c.mode&1)&&(g.lanes=_),g.return=c,g.sibling=null,u!==null&&(_=c.deletions,_===null?(c.deletions=[u],c.flags|=16):_.push(u)),c.child=g}function fw(u,c,g,_,E){var A=c.mode;u=u.child;var F=u.sibling,q={mode:"hidden",children:g};return!(A&1)&&c.child!==u?(g=c.child,g.childLanes=0,g.pendingProps=q,c.deletions=null):(g=io(u,q),g.subtreeFlags=u.subtreeFlags&14680064),F!==null?_=io(F,_):(_=aa(_,A,E,null),_.flags|=2),_.return=c,g.return=c,g.sibling=_,c.child=g,_}function od(u,c,g,_){return _!==null&&b0(_),xl(c,u.child,null,g),u=H0(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function hw(u,c,g){u.lanes|=c;var _=u.alternate;_!==null&&(_.lanes|=c),x0(u.return,c,g)}function G0(u,c,g,_,E){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:E}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=_,A.tail=g,A.tailMode=E)}function dw(u,c,g){var _=c.pendingProps,E=_.revealOrder,A=_.tail;if(di(u,c,_.children,g),_=rn.current,_&2)_=_&1|2,c.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&hw(u,g,c);else if(u.tag===19)hw(u,g,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}_&=1}if(Xe(rn,_),!(c.mode&1))c.memoizedState=null;else switch(E){case"forwards":for(g=c.child,E=null;g!==null;)u=g.alternate,u!==null&&qh(u)===null&&(E=g),g=g.sibling;g=E,g===null?(E=c.child,c.child=null):(E=g.sibling,g.sibling=null),G0(c,!1,E,g,A);break;case"backwards":for(g=null,E=c.child,c.child=null;E!==null;){if(u=E.alternate,u!==null&&qh(u)===null){c.child=E;break}u=E.sibling,E.sibling=g,g=E,E=u}G0(c,!0,g,null,A);break;case"together":G0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ss(u,c,g){if(u!==null&&(c.dependencies=u.dependencies),El|=c.lanes,!(g&c.childLanes))return null;if(u!==null&&c.child!==u.child)throw Error(o(153));if(c.child!==null){for(u=c.child,g=io(u,u.pendingProps),c.child=g,g.return=c;u.sibling!==null;)u=u.sibling,g=g.sibling=io(u,u.pendingProps),g.return=c;g.sibling=null}return c.child}function LN(u,c,g){switch(c.tag){case 3:aw(c),yl();break;case 5:PM(c);break;case 1:Un(c.type)&&jn(c);break;case 4:C0(c,c.stateNode.containerInfo);break;case 10:pM(c,c.type._context,c.memoizedProps.value);break;case 13:var _=c.memoizedState;if(_!==null)return _.dehydrated!==null?(Xe(rn,rn.current&1),c.flags|=128,null):g&c.child.childLanes?uw(u,c,g):(Xe(rn,rn.current&1),u=Ss(u,c,g),u!==null?u.sibling:null);Xe(rn,rn.current&1);break;case 19:if(_=(g&c.childLanes)!==0,u.flags&128){if(_)return dw(u,c,g);c.flags|=128}var E=c.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Xe(rn,rn.current),_)break;return null;case 22:case 23:return c.lanes=0,rw(u,c,g)}return Ss(u,c,g)}function IN(u,c){switch(E0(c),c.tag){case 1:return Un(c.type)&&gn(),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return Sl(),lt(cn),lt(Tt),L0(),u=c.flags,u&65536&&!(u&128)?(c.flags=u&-65537|128,c):null;case 5:return P0(c),null;case 13:if(lt(rn),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(o(340));yl()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return lt(rn),null;case 4:return Sl(),null;case 10:return y0(c.type._context),null;case 22:case 23:return av(),null;case 24:return null;default:return null}}var ad=!1,na=!1,NN=typeof WeakSet=="function"?WeakSet:Set,ke=null;function ld(u,c){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(_){Ci(u,c,_)}else g.current=null}function W0(u,c,g){try{g()}catch(_){Ci(u,c,_)}}var pw=!1;function DN(u,c){for(B(u.containerInfo),ke=c;ke!==null;)if(u=ke,c=u.child,(u.subtreeFlags&1028)!==0&&c!==null)c.return=u,ke=c;else for(;ke!==null;){u=ke;try{var g=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,E=g.memoizedState,A=u.stateNode,F=A.getSnapshotBeforeUpdate(u.elementType===u.type?_:Tr(u.type,_),E);A.__reactInternalSnapshotBeforeUpdate=F}break;case 3:Ce&&Re(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(q){Ci(u,u.return,q)}if(c=u.sibling,c!==null){c.return=u.return,ke=c;break}ke=u.return}return g=pw,pw=!1,g}function ia(u,c,g){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var E=_=_.next;do{if((E.tag&u)===u){var A=E.destroy;E.destroy=void 0,A!==void 0&&W0(c,g,A)}E=E.next}while(E!==_)}}function pc(u,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&u)===u){var _=g.create;g.destroy=_()}g=g.next}while(g!==c)}}function j0(u){var c=u.ref;if(c!==null){var g=u.stateNode;switch(u.tag){case 5:u=$(g);break;default:u=g}typeof c=="function"?c(u):c.current=u}}function mw(u,c,g){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(kh,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(u=c.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var _=u=u.next;do{var E=_,A=E.destroy;E=E.tag,A!==void 0&&(E&2||E&4)&&W0(c,g,A),_=_.next}while(_!==u)}break;case 1:if(ld(c,g),u=c.stateNode,typeof u.componentWillUnmount=="function")try{u.props=c.memoizedProps,u.state=c.memoizedState,u.componentWillUnmount()}catch(F){Ci(c,g,F)}break;case 5:ld(c,g);break;case 4:Ce?Sw(u,c,g):G&&G&&(c=c.stateNode.containerInfo,g=rt(c),Rt(c,g))}}function gw(u,c,g){for(var _=c;;)if(mw(u,_,g),_.child===null||Ce&&_.tag===4){if(_===c)break;for(;_.sibling===null;){if(_.return===null||_.return===c)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else _.child.return=_,_=_.child}function vw(u){var c=u.alternate;c!==null&&(u.alternate=null,vw(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&Ge(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function yw(u){return u.tag===5||u.tag===3||u.tag===4}function xw(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||yw(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function _w(u){if(Ce){e:{for(var c=u.return;c!==null;){if(yw(c))break e;c=c.return}throw Error(o(160))}var g=c;switch(g.tag){case 5:c=g.stateNode,g.flags&32&&(ve(c),g.flags&=-33),g=xw(u),Y0(u,g,c);break;case 3:case 4:c=g.stateNode.containerInfo,g=xw(u),X0(u,g,c);break;default:throw Error(o(161))}}}function X0(u,c,g){var _=u.tag;if(_===5||_===6)u=u.stateNode,c?tt(g,u,c):pt(g,u);else if(_!==4&&(u=u.child,u!==null))for(X0(u,c,g),u=u.sibling;u!==null;)X0(u,c,g),u=u.sibling}function Y0(u,c,g){var _=u.tag;if(_===5||_===6)u=u.stateNode,c?ct(g,u,c):it(g,u);else if(_!==4&&(u=u.child,u!==null))for(Y0(u,c,g),u=u.sibling;u!==null;)Y0(u,c,g),u=u.sibling}function Sw(u,c,g){for(var _=c,E=!1,A,F;;){if(!E){E=_.return;e:for(;;){if(E===null)throw Error(o(160));switch(A=E.stateNode,E.tag){case 5:F=!1;break e;case 3:A=A.containerInfo,F=!0;break e;case 4:A=A.containerInfo,F=!0;break e}E=E.return}E=!0}if(_.tag===5||_.tag===6)gw(u,_,g),F?X(A,_.stateNode):We(A,_.stateNode);else if(_.tag===18)F?ae(A,_.stateNode):ce(A,_.stateNode);else if(_.tag===4){if(_.child!==null){A=_.stateNode.containerInfo,F=!0,_.child.return=_,_=_.child;continue}}else if(mw(u,_,g),_.child!==null){_.child.return=_,_=_.child;continue}if(_===c)break;for(;_.sibling===null;){if(_.return===null||_.return===c)return;_=_.return,_.tag===4&&(E=!1)}_.sibling.return=_.return,_=_.sibling}}function q0(u,c){if(Ce){switch(c.tag){case 0:case 11:case 14:case 15:ia(3,c,c.return),pc(3,c),ia(5,c,c.return);return;case 1:return;case 5:var g=c.stateNode;if(g!=null){var _=c.memoizedProps;u=u!==null?u.memoizedProps:_;var E=c.type,A=c.updateQueue;c.updateQueue=null,A!==null&&xt(g,A,E,u,_,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));g=c.memoizedProps,Me(c.stateNode,u!==null?u.memoizedProps:g,g);return;case 3:xe&&u!==null&&u.memoizedState.isDehydrated&&ie(c.stateNode.containerInfo);return;case 12:return;case 13:ud(c);return;case 19:ud(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:ia(3,c,c.return),pc(3,c),ia(5,c,c.return);return;case 12:return;case 13:ud(c);return;case 19:ud(c);return;case 3:xe&&u!==null&&u.memoizedState.isDehydrated&&ie(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(G){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,Rt(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function ud(u){var c=u.updateQueue;if(c!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new NN),c.forEach(function(_){var E=WN.bind(null,u,_);g.has(_)||(g.add(_),_.then(E,E))})}}function ON(u,c){for(ke=c;ke!==null;){c=ke;var g=c.deletions;if(g!==null)for(var _=0;_<g.length;_++){var E=g[_];try{var A=u;Ce?Sw(A,E,c):gw(A,E,c);var F=E.alternate;F!==null&&(F.return=null),E.return=null}catch(Je){Ci(E,c,Je)}}if(g=c.child,c.subtreeFlags&12854&&g!==null)g.return=c,ke=g;else for(;ke!==null;){c=ke;try{var q=c.flags;if(q&32&&Ce&&ve(c.stateNode),q&512){var he=c.alternate;if(he!==null){var Pe=he.ref;Pe!==null&&(typeof Pe=="function"?Pe(null):Pe.current=null)}}if(q&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var Ye=c.alternate;(Ye===null||Ye.memoizedState===null)&&(tv=kn())}break;case 22:var vt=c.memoizedState!==null,st=c.alternate,Gt=st!==null&&st.memoizedState!==null;if(g=c,Ce){e:if(_=g,E=vt,A=null,Ce)for(var et=_;;){if(et.tag===5){if(A===null){A=et;var ti=et.stateNode;E?Be(ti):we(et.stateNode,et.memoizedProps)}}else if(et.tag===6){if(A===null){var fr=et.stateNode;E?Fe(fr):j(fr,et.memoizedProps)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===_)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break;for(;et.sibling===null;){if(et.return===null||et.return===_)break e;A===et&&(A=null),et=et.return}A===et&&(A=null),et.sibling.return=et.return,et=et.sibling}}if(vt&&!Gt&&g.mode&1){ke=g;for(var re=g.child;re!==null;){for(g=ke=re;ke!==null;){_=ke;var ee=_.child;switch(_.tag){case 0:case 11:case 14:case 15:ia(4,_,_.return);break;case 1:ld(_,_.return);var fe=_.stateNode;if(typeof fe.componentWillUnmount=="function"){var ze=_.return;try{fe.props=_.memoizedProps,fe.state=_.memoizedState,fe.componentWillUnmount()}catch(Je){Ci(_,ze,Je)}}break;case 5:ld(_,_.return);break;case 22:if(_.memoizedState!==null){Ew(g);continue}}ee!==null?(ee.return=_,ke=ee):Ew(g)}re=re.sibling}}}switch(q&4102){case 2:_w(c),c.flags&=-3;break;case 6:_w(c),c.flags&=-3,q0(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,q0(c.alternate,c);break;case 4:q0(c.alternate,c)}}catch(Je){Ci(c,c.return,Je)}if(g=c.sibling,g!==null){g.return=c.return,ke=g;break}ke=c.return}}}function UN(u,c,g){ke=u,Mw(u)}function Mw(u,c,g){for(var _=(u.mode&1)!==0;ke!==null;){var E=ke,A=E.child;if(E.tag===22&&_){var F=E.memoizedState!==null||ad;if(!F){var q=E.alternate,he=q!==null&&q.memoizedState!==null||na;q=ad;var Pe=na;if(ad=F,(na=he)&&!Pe)for(ke=E;ke!==null;)F=ke,he=F.child,F.tag===22&&F.memoizedState!==null?Tw(E):he!==null?(he.return=F,ke=he):Tw(E);for(;A!==null;)ke=A,Mw(A),A=A.sibling;ke=E,ad=q,na=Pe}ww(u)}else E.subtreeFlags&8772&&A!==null?(A.return=E,ke=A):ww(u)}}function ww(u){for(;ke!==null;){var c=ke;if(c.flags&8772){var g=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:na||pc(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!na)if(g===null)_.componentDidMount();else{var E=c.elementType===c.type?g.memoizedProps:Tr(c.type,g.memoizedProps);_.componentDidUpdate(E,g.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var A=c.updateQueue;A!==null&&vM(c,A,_);break;case 3:var F=c.updateQueue;if(F!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=$(c.child.stateNode);break;case 1:g=c.child.stateNode}vM(c,F,g)}break;case 5:var q=c.stateNode;g===null&&c.flags&4&&Ct(q,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&c.memoizedState===null){var he=c.alternate;if(he!==null){var Pe=he.memoizedState;if(Pe!==null){var Ye=Pe.dehydrated;Ye!==null&&ue(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}na||c.flags&512&&j0(c)}catch(vt){Ci(c,c.return,vt)}}if(c===u){ke=null;break}if(g=c.sibling,g!==null){g.return=c.return,ke=g;break}ke=c.return}}function Ew(u){for(;ke!==null;){var c=ke;if(c===u){ke=null;break}var g=c.sibling;if(g!==null){g.return=c.return,ke=g;break}ke=c.return}}function Tw(u){for(;ke!==null;){var c=ke;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{pc(4,c)}catch(he){Ci(c,g,he)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var E=c.return;try{_.componentDidMount()}catch(he){Ci(c,E,he)}}var A=c.return;try{j0(c)}catch(he){Ci(c,A,he)}break;case 5:var F=c.return;try{j0(c)}catch(he){Ci(c,F,he)}}}catch(he){Ci(c,c.return,he)}if(c===u){ke=null;break}var q=c.sibling;if(q!==null){q.return=c.return,ke=q;break}ke=c.return}}var cd=0,fd=1,hd=2,dd=3,pd=4;if(typeof Symbol=="function"&&Symbol.for){var mc=Symbol.for;cd=mc("selector.component"),fd=mc("selector.has_pseudo_class"),hd=mc("selector.role"),dd=mc("selector.test_id"),pd=mc("selector.text")}function Z0(u){var c=de(u);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(u=ne(u),u===null)throw Error(o(362));return u.stateNode.current}function K0(u,c){switch(c.$$typeof){case cd:if(u.type===c.value)return!0;break;case fd:e:{c=c.value,u=[u,0];for(var g=0;g<u.length;){var _=u[g++],E=u[g++],A=c[E];if(_.tag!==5||!ye(_)){for(;A!=null&&K0(_,A);)E++,A=c[E];if(E===c.length){c=!0;break e}else for(_=_.child;_!==null;)u.push(_,E),_=_.sibling}}c=!1}return c;case hd:if(u.tag===5&&qe(u.stateNode,c.value))return!0;break;case pd:if((u.tag===5||u.tag===6)&&(u=_e(u),u!==null&&0<=u.indexOf(c.value)))return!0;break;case dd:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function $0(u){switch(u.$$typeof){case cd:return"<"+(L(u.value)||"Unknown")+">";case fd:return":has("+($0(u)||"")+")";case hd:return'[role="'+u.value+'"]';case pd:return'"'+u.value+'"';case dd:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function Aw(u,c){var g=[];u=[u,0];for(var _=0;_<u.length;){var E=u[_++],A=u[_++],F=c[A];if(E.tag!==5||!ye(E)){for(;F!=null&&K0(E,F);)A++,F=c[A];if(A===c.length)g.push(E);else for(E=E.child;E!==null;)u.push(E,A),E=E.sibling}}return g}function J0(u,c){if(!I)throw Error(o(363));u=Z0(u),u=Aw(u,c),c=[],u=Array.from(u);for(var g=0;g<u.length;){var _=u[g++];if(_.tag===5)ye(_)||c.push(_.stateNode);else for(_=_.child;_!==null;)u.push(_),_=_.sibling}return c}var kN=Math.ceil,md=a.ReactCurrentDispatcher,Q0=a.ReactCurrentOwner,vn=a.ReactCurrentBatchConfig,At=0,wn=null,En=null,Xn=0,Gi=0,wl=On(0),Cn=0,gc=null,El=0,gd=0,ev=0,vc=null,Ai=null,tv=0,nv=1/0;function Tl(){nv=kn()+500}var vd=!1,iv=null,Qs=null,yd=!1,eo=null,xd=0,yc=0,rv=null,_d=-1,Sd=0;function pi(){return At&6?kn():_d!==-1?_d:_d=kn()}function to(u){return u.mode&1?At&2&&Xn!==0?Xn&-Xn:xN.transition!==null?(Sd===0&&(u=Dh,Dh<<=1,!(Dh&4194240)&&(Dh=64),Sd=u),Sd):(u=Dt,u!==0?u:pe()):1}function ur(u,c,g){if(50<yc)throw yc=0,rv=null,Error(o(185));var _=Md(u,c);return _===null?null:(tc(_,c,g),(!(At&2)||_!==wn)&&(_===wn&&(!(At&2)&&(gd|=c),Cn===4&&no(_,Xn)),bi(_,g),c===1&&At===0&&!(u.mode&1)&&(Tl(),Fh&&Jr())),_)}function Md(u,c){u.lanes|=c;var g=u.alternate;for(g!==null&&(g.lanes|=c),g=u,u=u.return;u!==null;)u.childLanes|=c,g=u.alternate,g!==null&&(g.childLanes|=c),g=u,u=u.return;return g.tag===3?g.stateNode:null}function bi(u,c){var g=u.callbackNode;cN(u,c);var _=Uh(u,u===wn?Xn:0);if(_===0)g!==null&&hM(g),u.callbackNode=null,u.callbackPriority=0;else if(c=_&-_,u.callbackPriority!==c){if(g!=null&&hM(g),c===1)u.tag===0?yN(Cw.bind(null,u)):dM(Cw.bind(null,u)),De?O(function(){At===0&&Jr()}):h0(d0,Jr),g=null;else{switch(fM(_)){case 1:g=d0;break;case 4:g=pN;break;case 16:g=p0;break;case 536870912:g=mN;break;default:g=p0}g=kw(g,bw.bind(null,u))}u.callbackPriority=c,u.callbackNode=g}}function bw(u,c){if(_d=-1,Sd=0,At&6)throw Error(o(327));var g=u.callbackNode;if(oa()&&u.callbackNode!==g)return null;var _=Uh(u,u===wn?Xn:0);if(_===0)return null;if(_&30||_&u.expiredLanes||c)c=wd(u,_);else{c=_;var E=At;At|=2;var A=Lw();(wn!==u||Xn!==c)&&(Tl(),ra(u,c));do try{BN();break}catch(q){Rw(u,q)}while(!0);v0(),md.current=A,At=E,En!==null?c=0:(wn=null,Xn=0,c=Cn)}if(c!==0){if(c===2&&(E=u0(u),E!==0&&(_=E,c=sv(u,E))),c===1)throw g=gc,ra(u,0),no(u,_),bi(u,kn()),g;if(c===6)no(u,_);else{if(E=u.current.alternate,!(_&30)&&!FN(E)&&(c=wd(u,_),c===2&&(A=u0(u),A!==0&&(_=A,c=sv(u,A))),c===1))throw g=gc,ra(u,0),no(u,_),bi(u,kn()),g;switch(u.finishedWork=E,u.finishedLanes=_,c){case 0:case 1:throw Error(o(345));case 2:sa(u,Ai);break;case 3:if(no(u,_),(_&130023424)===_&&(c=tv+500-kn(),10<c)){if(Uh(u,0)!==0)break;if(E=u.suspendedLanes,(E&_)!==_){pi(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=be(sa.bind(null,u,Ai),c);break}sa(u,Ai);break;case 4:if(no(u,_),(_&4194240)===_)break;for(c=u.eventTimes,E=-1;0<_;){var F=31-zi(_);A=1<<F,F=c[F],F>E&&(E=F),_&=~A}if(_=E,_=kn()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*kN(_/1960))-_,10<_){u.timeoutHandle=be(sa.bind(null,u,Ai),_);break}sa(u,Ai);break;case 5:sa(u,Ai);break;default:throw Error(o(329))}}}return bi(u,kn()),u.callbackNode===g?bw.bind(null,u):null}function sv(u,c){var g=vc;return u.current.memoizedState.isDehydrated&&(ra(u,c).flags|=256),u=wd(u,c),u!==2&&(c=Ai,Ai=g,c!==null&&ov(c)),u}function ov(u){Ai===null?Ai=u:Ai.push.apply(Ai,u)}function FN(u){for(var c=u;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var _=0;_<g.length;_++){var E=g[_],A=E.getSnapshot;E=E.value;try{if(!$r(A(),E))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function no(u,c){for(c&=~ev,c&=~gd,u.suspendedLanes|=c,u.pingedLanes&=~c,u=u.expirationTimes;0<c;){var g=31-zi(c),_=1<<g;u[g]=-1,c&=~_}}function Cw(u){if(At&6)throw Error(o(327));oa();var c=Uh(u,0);if(!(c&1))return bi(u,kn()),null;var g=wd(u,c);if(u.tag!==0&&g===2){var _=u0(u);_!==0&&(c=_,g=sv(u,_))}if(g===1)throw g=gc,ra(u,0),no(u,c),bi(u,kn()),g;if(g===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=c,sa(u,Ai),bi(u,kn()),null}function Pw(u){eo!==null&&eo.tag===0&&!(At&6)&&oa();var c=At;At|=1;var g=vn.transition,_=Dt;try{if(vn.transition=null,Dt=1,u)return u()}finally{Dt=_,vn.transition=g,At=c,!(At&6)&&Jr()}}function av(){Gi=wl.current,lt(wl)}function ra(u,c){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==nt&&(u.timeoutHandle=nt,$e(g)),En!==null)for(g=En.return;g!==null;){var _=g;switch(E0(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&gn();break;case 3:Sl(),lt(cn),lt(Tt),L0();break;case 5:P0(_);break;case 4:Sl();break;case 13:lt(rn);break;case 19:lt(rn);break;case 10:y0(_.type._context);break;case 22:case 23:av()}g=g.return}if(wn=u,En=u=io(u.current,null),Xn=Gi=c,Cn=0,gc=null,ev=gd=El=0,Ai=vc=null,Qr!==null){for(c=0;c<Qr.length;c++)if(g=Qr[c],_=g.interleaved,_!==null){g.interleaved=null;var E=_.next,A=g.pending;if(A!==null){var F=A.next;A.next=E,_.next=F}g.pending=_}Qr=null}return u}function Rw(u,c){do{var g=En;try{if(v0(),Zh.current=td,Kh){for(var _=fn.memoizedState;_!==null;){var E=_.queue;E!==null&&(E.pending=null),_=_.next}Kh=!1}if(Ml=0,Fn=Jn=fn=null,ac=!1,lc=0,Q0.current=null,g===null||g.return===null){Cn=1,gc=c,En=null;break}e:{var A=u,F=g.return,q=g,he=c;if(c=Xn,q.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Pe=he,Ye=q,vt=Ye.tag;if(!(Ye.mode&1)&&(vt===0||vt===11||vt===15)){var st=Ye.alternate;st?(Ye.updateQueue=st.updateQueue,Ye.memoizedState=st.memoizedState,Ye.lanes=st.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var Gt=$M(F);if(Gt!==null){Gt.flags&=-257,JM(Gt,F,q,A,c),Gt.mode&1&&KM(A,Pe,c),c=Gt,he=Pe;var et=c.updateQueue;if(et===null){var ti=new Set;ti.add(he),c.updateQueue=ti}else et.add(he);break e}else{if(!(c&1)){KM(A,Pe,c),lv();break e}he=Error(o(426))}}else if($t&&q.mode&1){var fr=$M(F);if(fr!==null){!(fr.flags&65536)&&(fr.flags|=256),JM(fr,F,q,A,c),b0(he);break e}}A=he,Cn!==4&&(Cn=2),vc===null?vc=[A]:vc.push(A),he=F0(he,q),q=F;do{switch(q.tag){case 3:q.flags|=65536,c&=-c,q.lanes|=c;var re=qM(q,he,c);gM(q,re);break e;case 1:A=he;var ee=q.type,fe=q.stateNode;if(!(q.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Qs===null||!Qs.has(fe)))){q.flags|=65536,c&=-c,q.lanes|=c;var ze=ZM(q,A,c);gM(q,ze);break e}}q=q.return}while(q!==null)}Nw(g)}catch(Je){c=Je,En===g&&g!==null&&(En=g=g.return);continue}break}while(!0)}function Lw(){var u=md.current;return md.current=td,u===null?td:u}function lv(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),wn===null||!(El&268435455)&&!(gd&268435455)||no(wn,Xn)}function wd(u,c){var g=At;At|=2;var _=Lw();wn===u&&Xn===c||ra(u,c);do try{zN();break}catch(E){Rw(u,E)}while(!0);if(v0(),At=g,md.current=_,En!==null)throw Error(o(261));return wn=null,Xn=0,Cn}function zN(){for(;En!==null;)Iw(En)}function BN(){for(;En!==null&&!hN();)Iw(En)}function Iw(u){var c=Uw(u.alternate,u,Gi);u.memoizedProps=u.pendingProps,c===null?Nw(u):En=c,Q0.current=null}function Nw(u){var c=u;do{var g=c.alternate;if(u=c.return,c.flags&32768){if(g=IN(g,c),g!==null){g.flags&=32767,En=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Cn=6,En=null;return}}else if(g=PN(g,c,Gi),g!==null){En=g;return}if(c=c.sibling,c!==null){En=c;return}En=c=u}while(c!==null);Cn===0&&(Cn=5)}function sa(u,c){var g=Dt,_=vn.transition;try{vn.transition=null,Dt=1,VN(u,c,g)}finally{vn.transition=_,Dt=g}return null}function VN(u,c,g){do oa();while(eo!==null);if(At&6)throw Error(o(327));var _=u.finishedWork,E=u.finishedLanes;if(_===null)return null;if(u.finishedWork=null,u.finishedLanes=0,_===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var A=_.lanes|_.childLanes;if(fN(u,A),u===wn&&(En=wn=null,Xn=0),!(_.subtreeFlags&2064)&&!(_.flags&2064)||yd||(yd=!0,kw(p0,function(){return oa(),null})),A=(_.flags&15990)!==0,_.subtreeFlags&15990||A){A=vn.transition,vn.transition=null;var F=Dt;Dt=1;var q=At;At|=4,Q0.current=null,DN(u,_),ON(u,_),V(u.containerInfo),u.current=_,UN(_),dN(),At=q,Dt=F,vn.transition=A}else u.current=_;if(yd&&(yd=!1,eo=u,xd=E),A=u.pendingLanes,A===0&&(Qs=null),gN(_.stateNode),bi(u,kn()),c!==null)for(g=u.onRecoverableError,_=0;_<c.length;_++)g(c[_]);if(vd)throw vd=!1,u=iv,iv=null,u;return xd&1&&u.tag!==0&&oa(),A=u.pendingLanes,A&1?u===rv?yc++:(yc=0,rv=u):yc=0,Jr(),null}function oa(){if(eo!==null){var u=fM(xd),c=vn.transition,g=Dt;try{if(vn.transition=null,Dt=16>u?16:u,eo===null)var _=!1;else{if(u=eo,eo=null,xd=0,At&6)throw Error(o(331));var E=At;for(At|=4,ke=u.current;ke!==null;){var A=ke,F=A.child;if(ke.flags&16){var q=A.deletions;if(q!==null){for(var he=0;he<q.length;he++){var Pe=q[he];for(ke=Pe;ke!==null;){var Ye=ke;switch(Ye.tag){case 0:case 11:case 15:ia(8,Ye,A)}var vt=Ye.child;if(vt!==null)vt.return=Ye,ke=vt;else for(;ke!==null;){Ye=ke;var st=Ye.sibling,Gt=Ye.return;if(vw(Ye),Ye===Pe){ke=null;break}if(st!==null){st.return=Gt,ke=st;break}ke=Gt}}}var et=A.alternate;if(et!==null){var ti=et.child;if(ti!==null){et.child=null;do{var fr=ti.sibling;ti.sibling=null,ti=fr}while(ti!==null)}}ke=A}}if(A.subtreeFlags&2064&&F!==null)F.return=A,ke=F;else e:for(;ke!==null;){if(A=ke,A.flags&2048)switch(A.tag){case 0:case 11:case 15:ia(9,A,A.return)}var re=A.sibling;if(re!==null){re.return=A.return,ke=re;break e}ke=A.return}}var ee=u.current;for(ke=ee;ke!==null;){F=ke;var fe=F.child;if(F.subtreeFlags&2064&&fe!==null)fe.return=F,ke=fe;else e:for(F=ee;ke!==null;){if(q=ke,q.flags&2048)try{switch(q.tag){case 0:case 11:case 15:pc(9,q)}}catch(Je){Ci(q,q.return,Je)}if(q===F){ke=null;break e}var ze=q.sibling;if(ze!==null){ze.return=q.return,ke=ze;break e}ke=q.return}}if(At=E,Jr(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(kh,u)}catch{}_=!0}return _}finally{Dt=g,vn.transition=c}}return!1}function Dw(u,c,g){c=F0(g,c),c=qM(u,c,1),Js(u,c),c=pi(),u=Md(u,1),u!==null&&(tc(u,1,c),bi(u,c))}function Ci(u,c,g){if(u.tag===3)Dw(u,u,g);else for(;c!==null;){if(c.tag===3){Dw(c,u,g);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_))){u=F0(g,u),u=ZM(c,u,1),Js(c,u),u=pi(),c=Md(c,1),c!==null&&(tc(c,1,u),bi(c,u));break}}c=c.return}}function HN(u,c,g){var _=u.pingCache;_!==null&&_.delete(c),c=pi(),u.pingedLanes|=u.suspendedLanes&g,wn===u&&(Xn&g)===g&&(Cn===4||Cn===3&&(Xn&130023424)===Xn&&500>kn()-tv?ra(u,0):ev|=g),bi(u,c)}function Ow(u,c){c===0&&(u.mode&1?(c=Oh,Oh<<=1,!(Oh&130023424)&&(Oh=4194304)):c=1);var g=pi();u=Md(u,c),u!==null&&(tc(u,c,g),bi(u,g))}function GN(u){var c=u.memoizedState,g=0;c!==null&&(g=c.retryLane),Ow(u,g)}function WN(u,c){var g=0;switch(u.tag){case 13:var _=u.stateNode,E=u.memoizedState;E!==null&&(g=E.retryLane);break;case 19:_=u.stateNode;break;default:throw Error(o(314))}_!==null&&_.delete(c),Ow(u,g)}var Uw;Uw=function(u,c,g){if(u!==null)if(u.memoizedProps!==c.pendingProps||cn.current)Hi=!0;else{if(!(u.lanes&g)&&!(c.flags&128))return Hi=!1,LN(u,c,g);Hi=!!(u.flags&131072)}else Hi=!1,$t&&c.flags&1048576&&MM(c,Xh,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps;var E=ir(c,Tt.current);ml(c,g),E=N0(null,c,_,u,E,g);var A=D0();return c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Un(_)?(A=!0,jn(c)):A=!1,c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,_0(c),E.updater=Wh,c.stateNode=E,E._reactInternals=c,M0(c,_,u,g),c=V0(null,c,_,!0,A,g)):(c.tag=0,$t&&A&&w0(c),di(null,c,E,g),c=c.child),c;case 16:_=c.elementType;e:{switch(u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps,E=_._init,_=E(_._payload),c.type=_,E=c.tag=XN(_),u=Tr(_,u),E){case 0:c=B0(null,c,_,u,g);break e;case 1:c=ow(null,c,_,u,g);break e;case 11:c=tw(null,c,_,u,g);break e;case 14:c=nw(null,c,_,Tr(_.type,u),g);break e}throw Error(o(306,_,""))}return c;case 0:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:Tr(_,E),B0(u,c,_,E,g);case 1:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:Tr(_,E),ow(u,c,_,E,g);case 3:e:{if(aw(c),u===null)throw Error(o(387));_=c.pendingProps,A=c.memoizedState,E=A.element,mM(u,c),Gh(c,_,null,g);var F=c.memoizedState;if(_=F.element,xe&&A.isDehydrated)if(A={element:_,isDehydrated:!1,cache:F.cache,transitions:F.transitions},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){E=Error(o(423)),c=lw(u,c,_,g,E);break e}else if(_!==E){E=Error(o(424)),c=lw(u,c,_,g,E);break e}else for(xe&&(Vi=Lh(c.stateNode.containerInfo),Bi=c,$t=!0,Ar=null,nc=!1),g=CM(c,null,_,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(yl(),_===E){c=Ss(u,c,g);break e}di(u,c,_,g)}c=c.child}return c;case 5:return PM(c),u===null&&A0(c),_=c.type,E=c.pendingProps,A=u!==null?u.memoizedProps:null,F=E.children,ge(_,E)?F=null:A!==null&&ge(_,A)&&(c.flags|=32),sw(u,c),di(u,c,F,g),c.child;case 6:return u===null&&A0(c),null;case 13:return uw(u,c,g);case 4:return C0(c,c.stateNode.containerInfo),_=c.pendingProps,u===null?c.child=xl(c,null,_,g):di(u,c,_,g),c.child;case 11:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:Tr(_,E),tw(u,c,_,E,g);case 7:return di(u,c,c.pendingProps,g),c.child;case 8:return di(u,c,c.pendingProps.children,g),c.child;case 12:return di(u,c,c.pendingProps.children,g),c.child;case 10:e:{if(_=c.type._context,E=c.pendingProps,A=c.memoizedProps,F=E.value,pM(c,_,F),A!==null)if($r(A.value,F)){if(A.children===E.children&&!cn.current){c=Ss(u,c,g);break e}}else for(A=c.child,A!==null&&(A.return=c);A!==null;){var q=A.dependencies;if(q!==null){F=A.child;for(var he=q.firstContext;he!==null;){if(he.context===_){if(A.tag===1){he=vs(-1,g&-g),he.tag=2;var Pe=A.updateQueue;if(Pe!==null){Pe=Pe.shared;var Ye=Pe.pending;Ye===null?he.next=he:(he.next=Ye.next,Ye.next=he),Pe.pending=he}}A.lanes|=g,he=A.alternate,he!==null&&(he.lanes|=g),x0(A.return,g,c),q.lanes|=g;break}he=he.next}}else if(A.tag===10)F=A.type===c.type?null:A.child;else if(A.tag===18){if(F=A.return,F===null)throw Error(o(341));F.lanes|=g,q=F.alternate,q!==null&&(q.lanes|=g),x0(F,g,c),F=A.sibling}else F=A.child;if(F!==null)F.return=A;else for(F=A;F!==null;){if(F===c){F=null;break}if(A=F.sibling,A!==null){A.return=F.return,F=A;break}F=F.return}A=F}di(u,c,E.children,g),c=c.child}return c;case 9:return E=c.type,_=c.pendingProps.children,ml(c,g),E=rr(E),_=_(E),c.flags|=1,di(u,c,_,g),c.child;case 14:return _=c.type,E=Tr(_,c.pendingProps),E=Tr(_.type,E),nw(u,c,_,E,g);case 15:return iw(u,c,c.type,c.pendingProps,g);case 17:return _=c.type,E=c.pendingProps,E=c.elementType===_?E:Tr(_,E),u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,Un(_)?(u=!0,jn(c)):u=!1,ml(c,g),_M(c,_,E),M0(c,_,E,g),V0(null,c,_,!0,u,g);case 19:return dw(u,c,g);case 22:return rw(u,c,g)}throw Error(o(156,c.tag))};function kw(u,c){return h0(u,c)}function jN(u,c,g,_){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(u,c,g,_){return new jN(u,c,g,_)}function uv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function XN(u){if(typeof u=="function")return uv(u)?1:0;if(u!=null){if(u=u.$$typeof,u===w)return 11;if(u===S)return 14}return 2}function io(u,c){var g=u.alternate;return g===null?(g=cr(u.tag,c,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=c,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,c=u.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function Ed(u,c,g,_,E,A){var F=2;if(_=u,typeof u=="function")uv(u)&&(F=1);else if(typeof u=="string")F=5;else e:switch(u){case h:return aa(g.children,E,A,c);case d:F=8,E|=8;break;case p:return u=cr(12,g,c,E|2),u.elementType=p,u.lanes=A,u;case x:return u=cr(13,g,c,E),u.elementType=x,u.lanes=A,u;case v:return u=cr(19,g,c,E),u.elementType=v,u.lanes=A,u;case T:return Td(g,E,A,c);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:F=10;break e;case y:F=9;break e;case w:F=11;break e;case S:F=14;break e;case M:F=16,_=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return c=cr(F,g,c,E),c.elementType=u,c.type=_,c.lanes=A,c}function aa(u,c,g,_){return u=cr(7,u,_,c),u.lanes=g,u}function Td(u,c,g,_){return u=cr(22,u,_,c),u.elementType=T,u.lanes=g,u.stateNode={},u}function cv(u,c,g){return u=cr(6,u,null,c),u.lanes=g,u}function fv(u,c,g){return c=cr(4,u.children!==null?u.children:[],u.key,c),c.lanes=g,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}function YN(u,c,g,_,E){this.tag=c,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=nt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c0(0),this.expirationTimes=c0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c0(0),this.identifierPrefix=_,this.onRecoverableError=E,xe&&(this.mutableSourceEagerHydrationData=null)}function Fw(u,c,g,_,E,A,F,q,he){return u=new YN(u,c,g,q,he),c===1?(c=1,A===!0&&(c|=8)):c=0,A=cr(3,null,null,c),u.current=A,A.stateNode=u,A.memoizedState={element:_,isDehydrated:g,cache:null,transitions:null},_0(A),u}function zw(u){if(!u)return nr;u=u._reactInternals;e:{if(C(u)!==u||u.tag!==1)throw Error(o(170));var c=u;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Un(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(u.tag===1){var g=u.type;if(Un(g))return hl(u,g,c)}return c}function Bw(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=Z(c),u===null?null:u.stateNode}function Vw(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<c?g:c}}function hv(u,c){Vw(u,c),(u=u.alternate)&&Vw(u,c)}function qN(u){return u=Z(u),u===null?null:u.stateNode}function ZN(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var c=pi();ur(u,134217728,c),hv(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var c=pi(),g=to(u);ur(u,g,c),hv(u,g)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var c=u.stateNode;if(c.current.memoizedState.isDehydrated){var g=ec(c.pendingLanes);g!==0&&(f0(c,g|1),bi(c,kn()),!(At&6)&&(Tl(),Jr()))}break;case 13:var _=pi();Pw(function(){return ur(u,1,_)}),hv(u,1)}},t.batchedUpdates=function(u,c){var g=At;At|=1;try{return u(c)}finally{At=g,At===0&&(Tl(),Fh&&Jr())}},t.createComponentSelector=function(u){return{$$typeof:cd,value:u}},t.createContainer=function(u,c,g,_,E,A,F){return Fw(u,c,!1,null,g,_,E,A,F)},t.createHasPseudoClassSelector=function(u){return{$$typeof:fd,value:u}},t.createHydrationContainer=function(u,c,g,_,E,A,F,q,he){return u=Fw(g,_,!0,u,E,A,F,q,he),u.context=zw(null),g=u.current,_=pi(),E=to(g),A=vs(_,E),A.callback=c??null,Js(g,A),u.current.lanes=E,tc(u,E,_),bi(u,_),u},t.createPortal=function(u,c,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:_==null?null:""+_,children:u,containerInfo:c,implementation:g}},t.createRoleSelector=function(u){return{$$typeof:hd,value:u}},t.createTestNameSelector=function(u){return{$$typeof:dd,value:u}},t.createTextSelector=function(u){return{$$typeof:pd,value:u}},t.deferredUpdates=function(u){var c=Dt,g=vn.transition;try{return vn.transition=null,Dt=16,u()}finally{Dt=c,vn.transition=g}},t.discreteUpdates=function(u,c,g,_,E){var A=Dt,F=vn.transition;try{return vn.transition=null,Dt=1,u(c,g,_,E)}finally{Dt=A,vn.transition=F,At===0&&Tl()}},t.findAllNodes=J0,t.findBoundingRects=function(u,c){if(!I)throw Error(o(363));c=J0(u,c),u=[];for(var g=0;g<c.length;g++)u.push(Se(c[g]));for(c=u.length-1;0<c;c--){g=u[c];for(var _=g.x,E=_+g.width,A=g.y,F=A+g.height,q=c-1;0<=q;q--)if(c!==q){var he=u[q],Pe=he.x,Ye=Pe+he.width,vt=he.y,st=vt+he.height;if(_>=Pe&&A>=vt&&E<=Ye&&F<=st){u.splice(c,1);break}else if(_!==Pe||g.width!==he.width||st<A||vt>F){if(!(A!==vt||g.height!==he.height||Ye<_||Pe>E)){Pe>_&&(he.width+=Pe-_,he.x=_),Ye<E&&(he.width=E-Pe),u.splice(c,1);break}}else{vt>A&&(he.height+=vt-A,he.y=A),st<F&&(he.height=F-vt),u.splice(c,1);break}}}return u},t.findHostInstance=Bw,t.findHostInstanceWithNoPortals=function(u){return u=z(u),u=u!==null?H(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return Bw(u)},t.flushControlled=function(u){var c=At;At|=1;var g=vn.transition,_=Dt;try{vn.transition=null,Dt=1,u()}finally{Dt=_,vn.transition=g,At=c,At===0&&(Tl(),Jr())}},t.flushPassiveEffects=oa,t.flushSync=Pw,t.focusWithin=function(u,c){if(!I)throw Error(o(363));for(u=Z0(u),c=Aw(u,c),c=Array.from(c),u=0;u<c.length;){var g=c[u++];if(!ye(g)){if(g.tag===5&&Ie(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dt},t.getFindAllNodesFailureDescription=function(u,c){if(!I)throw Error(o(363));var g=0,_=[];u=[Z0(u),0];for(var E=0;E<u.length;){var A=u[E++],F=u[E++],q=c[F];if((A.tag!==5||!ye(A))&&(K0(A,q)&&(_.push($0(q)),F++,F>g&&(g=F)),F<c.length))for(A=A.child;A!==null;)u.push(A,F),A=A.sibling}if(g<c.length){for(u=[];g<c.length;g++)u.push($0(c[g]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return $(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:qN,findFiberByHostInstance:u.findFiberByHostInstance||ZN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)u=!0;else{try{kh=c.inject(u),Kr=c}catch{}u=!!c.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,c,g,_){if(!I)throw Error(o(363));u=J0(u,c);var E=Oe(u,g,_).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,c){var g=c._getVersion;g=g(c._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[c,g]:u.mutableSourceEagerHydrationData.push(c,g)},t.runWithPriority=function(u,c){var g=Dt;try{return Dt=u,c()}finally{Dt=g}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,c,g,_){var E=c.current,A=pi(),F=to(E);return g=zw(g),c.context===null?c.context=g:c.pendingContext=g,c=vs(A,F),c.payload={element:u},_=_===void 0?null:_,_!==null&&(c.callback=_),Js(E,c),u=ur(E,F,A),u!==null&&Hh(u,E,F),F},t};Q3.exports=Y6;var q6=Q3.exports;const Z6=$_(q6);var eL={exports:{}},tL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,B){var V=N.length;N.push(B);e:for(;0<V;){var Y=V-1>>>1,J=N[Y];if(0<r(J,B))N[Y]=B,N[V]=J,V=Y;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],V=N.pop();if(V!==B){N[0]=V;e:for(var Y=0,J=N.length,Q=J>>>1;Y<Q;){var le=2*(Y+1)-1,ge=N[le],Ee=le+1,be=N[Ee];if(0>r(ge,V))Ee<J&&0>r(be,ge)?(N[Y]=be,N[Ee]=V,Y=Ee):(N[Y]=ge,N[le]=V,Y=le);else if(Ee<J&&0>r(be,V))N[Y]=be,N[Ee]=V,Y=Ee;else break e}}return B}function r(N,B){var V=N.sortIndex-B.sortIndex;return V!==0?V:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,d=null,p=3,m=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(N){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=N)i(f),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(f)}}function T(N){if(w=!1,M(N),!y)if(t(l)!==null)y=!0,$(P);else{var B=t(f);B!==null&&se(T,B.startTime-N)}}function P(N,B){y=!1,w&&(w=!1,v(D),D=-1),m=!0;var V=p;try{for(M(B),d=t(l);d!==null&&(!(d.expirationTime>B)||N&&!z());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,p=d.priorityLevel;var J=Y(d.expirationTime<=B);B=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&i(l),M(B)}else i(l);d=t(l)}if(d!==null)var Q=!0;else{var le=t(f);le!==null&&se(T,le.startTime-B),Q=!1}return Q}finally{d=null,p=V,m=!1}}var b=!1,L=null,D=-1,C=5,R=-1;function z(){return!(n.unstable_now()-R<C)}function Z(){if(L!==null){var N=n.unstable_now();R=N;var B=!0;try{B=L(!0,N)}finally{B?oe():(b=!1,L=null)}}else b=!1}var oe;if(typeof S=="function")oe=function(){S(Z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,K=H.port2;H.port1.onmessage=Z,oe=function(){K.postMessage(null)}}else oe=function(){x(Z,0)};function $(N){L=N,b||(b=!0,oe())}function se(N,B){D=x(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,$(P))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var V=p;p=B;try{return N()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=p;p=N;try{return B()}finally{p=V}},n.unstable_scheduleCallback=function(N,B,V){var Y=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,N){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,N={id:h++,callback:B,priorityLevel:N,startTime:V,expirationTime:J,sortIndex:-1},V>Y?(N.sortIndex=V,e(f,N),t(l)===null&&N===t(f)&&(w?(v(D),D=-1):w=!0,se(T,V-Y))):(N.sortIndex=J,e(l,N),y||m||(y=!0,$(P))),N},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(N){var B=p;return function(){var V=p;p=B;try{return N.apply(this,arguments)}finally{p=V}}}})(tL);eL.exports=tL;var O2=eL.exports;const kS={},K6=n=>void Object.assign(kS,n);function $6(n,e){function t(h,{args:d=[],attach:p,...m},y){let w=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;x=Kl(v,{type:h,root:y,attach:p,primitive:!0})}else{const v=kS[w];if(!v)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=Kl(new v(...d),{type:h,root:y,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof Mt?x.__r3f.attach="geometry":x instanceof $n&&(x.__r3f.attach="material")),w!=="inject"&&by(x,m),x}function i(h,d){let p=!1;if(d){var m,y;(m=d.__r3f)!=null&&m.attach?Ay(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(y=h.__r3f)==null||y.objects.push(d),d.__r3f||Kl(d,{}),d.__r3f.parent=h,I_(d),$l(d)}}function r(h,d,p){let m=!1;if(d){var y,w;if((y=d.__r3f)!=null&&y.attach)Ay(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"});const x=h.children.filter(S=>S!==d),v=x.indexOf(p);h.children=[...x.slice(0,v),d,...x.slice(v)],m=!0}m||(w=h.__r3f)==null||w.objects.push(d),d.__r3f||Kl(d,{}),d.__r3f.parent=h,I_(d),$l(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,y,w;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(T=>T!==d)),(y=d.__r3f)!=null&&y.attach)B2(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var x;h.remove(d),(x=d.__r3f)!=null&&x.root&&s8(cm(d),d)}const S=(w=d.__r3f)==null?void 0:w.primitive,M=!S&&(p===void 0?d.dispose!==null:p);if(!S){var v;s((v=d.__r3f)==null?void 0:v.objects,d,M),s(d.children,d,M)}if(delete d.__r3f,M&&d.dispose&&d.type!=="Scene"){const T=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?O2.unstable_scheduleCallback(O2.unstable_IdlePriority,T):T()}$l(h)}}function a(h,d,p,m){var y;const w=(y=h.__r3f)==null?void 0:y.parent;if(!w)return;const x=t(d,p,h.__r3f.root);if(h.children){for(const v of h.children)v.__r3f&&i(x,v);h.children=h.children.filter(v=>!v.__r3f)}h.__r3f.objects.forEach(v=>i(x,v)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(w,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(w,x),x.raycast&&x.__r3f.eventCount&&cm(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=x,v.ref&&(typeof v.ref=="function"?v.ref(x):v.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Z6({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){var y;if(((y=h==null?void 0:h.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:x=[],children:v,...S}=m,{args:M=[],children:T,...P}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((L,D)=>L!==M[D]))return[!0];const b=lL(h,S,P,!0);return b.changes.length?[!1,b]:null}},commitUpdate(h,[d,p],m,y,w,x){d?a(h,m,w,x):by(h,p)},commitMount(h,d,p,m){var y;const w=(y=h.__r3f)!=null?y:{};h.raycast&&w.handlers&&w.eventCount&&cm(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Kl(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&B2(m,h,p),h.isObject3D&&(h.visible=!1),$l(h)},unhideInstance(h,d){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&Ay(y,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),$l(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():gu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Qt.fun(performance.now)?performance.now:Qt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Qt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Qt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:by}}var U2,k2;const Ty=n=>"colorSpace"in n||"outputColorSpace"in n,nL=()=>{var n;return(n=kS.ColorManagement)!=null?n:null},iL=n=>n&&n.isOrthographicCamera,J6=n=>n&&n.hasOwnProperty("current"),Eh=typeof window<"u"&&((U2=window.document)!=null&&U2.createElement||((k2=window.navigator)==null?void 0:k2.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function rL(n){const e=W.useRef(n);return Eh(()=>void(e.current=n),[n]),e}function Q6({set:n}){return Eh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class sL extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}sL.getDerivedStateFromError=()=>({error:!0});const oL="__default",F2=new Map,e8=n=>n&&!!n.memoized&&!!n.changes;function aL(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Fc=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function cm(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Qt={obj:n=>n===Object(n)&&!Qt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Qt.str(n)||Qt.num(n))return n===e;const s=Qt.obj(n);if(s&&i==="reference")return n===e;const o=Qt.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Qt.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Qt.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function t8(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Kl(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function L_(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const z2=/-\d+$/;function Ay(n,e,t){if(Qt.str(t)){if(z2.test(t)){const s=t.replace(z2,""),{target:o,key:a}=L_(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=L_(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function B2(n,e,t){var i,r;if(Qt.str(t)){const{target:s,key:o}=L_(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function lL(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},f=!1){var h;const d=(h=n==null?void 0:n.__r3f)!=null?h:{},p=Object.entries(r),m=[];if(f){const w=Object.keys(l);for(let x=0;x<w.length;x++)r.hasOwnProperty(w[x])||p.unshift([w[x],oL+"remove"])}p.forEach(([w,x])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&w==="object"||Qt.equ(x,l[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return m.push([w,x,!0,[]]);let S=[];w.includes("-")&&(S=w.split("-")),m.push([w,x,!1,S]);for(const M in r){const T=r[M];M.startsWith(`${w}-`)&&m.push([M,T,!1,M.split("-")])}});const y={...r};return d.memoizedProps&&d.memoizedProps.args&&(y.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(y.attach=d.memoizedProps.attach),{memoized:y,changes:m}}const n8=typeof process<"u"&&!1;function by(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:f}=e8(e)?e:lL(n,e),h=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<f.length;p++){let[m,y,w,x]=f[p];if(Ty(n)){const T="srgb",P="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?T:P):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?T:P)}let v=n,S=v[m];if(x.length&&(S=x.reduce((M,T)=>M[T],n),!(S&&S.set))){const[M,...T]=x.reverse();v=T.reverse().reduce((P,b)=>P[b],n),m=M}if(y===oL+"remove")if(v.constructor){let M=F2.get(v.constructor);M||(M=new v.constructor,F2.set(v.constructor,M)),y=M[m]}else y=0;if(w)y?s.handlers[m]=y:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Ga)){if(Array.isArray(y))S.fromArray?S.fromArray(y):S.set(...y);else if(S.copy&&y&&y.constructor&&(n8?S.constructor.name===y.constructor.name:S.constructor===y.constructor))S.copy(y);else if(y!==void 0){const M=S instanceof He;!M&&S.setScalar?S.setScalar(y):S instanceof Ga&&y instanceof Ga?S.mask=y.mask:S.set(y),!nL()&&!a.linear&&M&&S.convertSRGBToLinear()}}else if(v[m]=y,v[m]instanceof mn&&v[m].format===xi&&v[m].type===us){const M=v[m];Ty(M)&&Ty(a.gl)?M.colorSpace=a.gl.outputColorSpace:M.encoding=a.gl.outputEncoding}$l(n)}if(s.parent&&n.raycast&&h!==s.eventCount){const p=cm(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),s.eventCount&&p.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(r=n.__r3f)!=null&&r.parent&&I_(n),n}function $l(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function I_(n){n.onUpdate==null||n.onUpdate(n)}function i8(n,e){n.manual||(iL(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Op(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function r8(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return gu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return gu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return gu.ContinuousEventPriority;default:return gu.DefaultEventPriority}}function uL(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function s8(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{uL(t.capturedMap,e,i,r)})}function o8(n){function e(l){const{internal:f}=n.getState(),h=l.offsetX-f.initialClick[0],d=l.offsetY-f.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(f=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=f.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,f){const h=n.getState(),d=new Set,p=[],m=f?f(h.internal.interaction):h.internal.interaction;for(let v=0;v<m.length;v++){const S=Fc(m[v]);S&&(S.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(v){const S=Fc(v);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var M;S.events.compute==null||S.events.compute(l,S,(M=S.previousRoot)==null?void 0:M.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(v,!0):[]}let w=m.flatMap(y).sort((v,S)=>{const M=Fc(v.object),T=Fc(S.object);return!M||!T?v.distance-S.distance:T.events.priority-M.events.priority||v.distance-S.distance}).filter(v=>{const S=Op(v);return d.has(S)?!1:(d.add(S),!0)});h.events.filter&&(w=h.events.filter(w,h));for(const v of w){let S=v.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&p.push({...v,eventObject:S}),S=S.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let v of h.internal.capturedMap.get(l.pointerId).values())d.has(Op(v.intersection))||p.push(v.intersection);return p}function r(l,f,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const w=Fc(y.object)||p,{raycaster:x,pointer:v,camera:S,internal:M}=w,T=new k(v.x,v.y,0).unproject(S),P=R=>{var z,Z;return(z=(Z=M.capturedMap.get(R))==null?void 0:Z.has(y.eventObject))!=null?z:!1},b=R=>{const z={intersection:y,target:f.target};M.capturedMap.has(R)?M.capturedMap.get(R).set(y.eventObject,z):M.capturedMap.set(R,new Map([[y.eventObject,z]])),f.target.setPointerCapture(R)},L=R=>{const z=M.capturedMap.get(R);z&&uL(M.capturedMap,y.eventObject,z,R)};let D={};for(let R in f){let z=f[R];typeof z!="function"&&(D[R]=z)}let C={...y,...D,pointer:v,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:T,ray:x.ray,camera:S,stopPropagation(){const R="pointerId"in f&&M.capturedMap.get(f.pointerId);if((!R||R.has(y.eventObject))&&(C.stopped=m.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(z=>z.eventObject===y.eventObject))){const z=l.slice(0,l.indexOf(y));s([...z,y])}},target:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:L},currentTarget:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:L},nativeEvent:f};if(d(C),m.stopped===!0)break}}return l}function s(l){const{internal:f}=n.getState();for(const h of f.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(f.hovered.delete(Op(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,f){for(let h=0;h<f.length;h++){const d=f[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:h}=n.getState();"pointerId"in f&&h.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(f.pointerId)&&(h.capturedMap.delete(f.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(h,m?t:void 0),v=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(M=>M.eventObject)),y&&!x.length&&v<=2&&(o(h,p.interaction),d&&d(h)),m&&s(x);function S(M){const T=M.eventObject,P=T.__r3f,b=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const L=Op(M),D=p.hovered.get(L);D?D.stopped&&M.stopPropagation():(p.hovered.set(L,M),b.onPointerOver==null||b.onPointerOver(M),b.onPointerEnter==null||b.onPointerEnter(M))}b.onPointerMove==null||b.onPointerMove(M)}else{const L=b[l];L?(!y||p.initialHits.includes(T))&&(o(h,p.interaction.filter(D=>!p.initialHits.includes(D))),L(M)):y&&p.initialHits.includes(T)&&o(h,p.interaction.filter(D=>!p.initialHits.includes(D)))}}r(x,h,v,S)}}return{handlePointer:a}}const cL=n=>!!(n!=null&&n.render),fL=W.createContext(null),a8=(n,e)=>{const t=J3((a,l)=>{const f=new k,h=new k,d=new k;function p(v=l().camera,S=h,M=l().size){const{width:T,height:P,top:b,left:L}=M,D=T/P;S instanceof k?d.copy(S):d.set(...S);const C=v.getWorldPosition(f).distanceTo(d);if(iL(v))return{width:T/v.zoom,height:P/v.zoom,top:b,left:L,factor:1,distance:C,aspect:D};{const R=v.fov*Math.PI/180,z=2*Math.tan(R/2)*C,Z=z*(T/P);return{width:Z,height:z,top:b,left:L,factor:T/Z,distance:C,aspect:D}}}let m;const y=v=>a(S=>({performance:{...S.performance,current:v}})),w=new me;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,S)=>e(v,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new NS,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&y(v.performance.min),m=setTimeout(()=>y(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:v=>a(S=>({...S,events:{...S.events,...v}})),setSize:(v,S,M,T,P)=>{const b=l().camera,L={width:v,height:S,top:T||0,left:P||0,updateStyle:M};a(D=>({size:L,viewport:{...D.viewport,...p(b,h,L)}}))},setDpr:v=>a(S=>{const M=aL(v);return{viewport:{...S.viewport,dpr:M,initialDpr:S.viewport.initialDpr||M}}}),setFrameloop:(v="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,v!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,S,M)=>{const T=l().internal;return T.priority=T.priority+(S>0?1:0),T.subscribers.push({ref:v,priority:S,store:M}),T.subscribers=T.subscribers.sort((P,b)=>P.priority-b.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(S>0?1:0),P.subscribers=P.subscribers.filter(b=>b.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:f,gl:h,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||f.dpr!==s){var p;r=l,s=f.dpr,i8(a,l),h.setPixelRatio(f.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Up,l8=new Set,u8=new Set,c8=new Set;function Cy(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function zc(n,e){switch(n){case"before":return Cy(l8,e);case"after":return Cy(u8,e);case"tail":return Cy(c8,e)}}let Py,Ry;function Ly(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Py=e.internal.subscribers,Up=0;Up<Py.length;Up++)Ry=Py[Up],Ry.ref.current(Ry.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function f8(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,zc("before",l);for(const h of n.values()){var f;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((f=r.gl.xr)!=null&&f.isPresenting)&&(t+=Ly(l,r))}if(zc("after",l),t===0)return zc("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,f=1){var h;if(!l)return n.forEach(d=>o(d.store.getState()),f);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function a(l,f=!0,h,d){if(f&&zc("before",l),h)Ly(l,h,d);else for(const p of n.values())Ly(l,p.store.getState());f&&zc("after",l)}return{loop:s,invalidate:o,advance:a}}function hL(){const n=W.useContext(fL);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function gr(n=t=>t,e){return hL()(n,e)}function Th(n,e=0){const t=hL(),i=t.getState().internal.subscribe,r=rL(n);return Eh(()=>i(r,e,t),[e,i,t]),null}const Vu=new Map,{invalidate:V2,advance:H2}=f8(Vu),{reconciler:Xm,applyProps:ql}=$6(Vu,r8),Zl={objects:"shallow",strict:!1},h8=(n,e)=>{const t=typeof n=="function"?n(e):n;return cL(t)?t:new vS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function d8(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function p8(n){const e=Vu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||a8(V2,H2),o=t||Xm.createContainer(s,gu.ConcurrentRoot,null,!1,null,"",r,null);e||Vu.set(n,{fiber:o,store:s});let a,l=!1,f;return{configure(h={}){let{gl:d,size:p,scene:m,events:y,onCreated:w,shadows:x=!1,linear:v=!1,flat:S=!1,legacy:M=!1,orthographic:T=!1,frameloop:P="always",dpr:b=[1,2],performance:L,raycaster:D,camera:C,onPointerMissed:R}=h,z=s.getState(),Z=z.gl;z.gl||z.set({gl:Z=h8(d,n)});let oe=z.raycaster;oe||z.set({raycaster:oe=new Z3});const{params:H,...K}=D||{};if(Qt.equ(K,oe,Zl)||ql(oe,{...K}),Qt.equ(H,oe.params,Zl)||ql(oe,{params:{...oe.params,...H}}),!z.camera||z.camera===f&&!Qt.equ(f,C,Zl)){f=C;const J=C instanceof gh,Q=J?C:T?new zr(0,0,0,0,.1,1e3):new tn(75,0,.1,1e3);J||(Q.position.z=5,C&&ql(Q,C),!z.camera&&!(C!=null&&C.rotation)&&Q.lookAt(0,0,0)),z.set({camera:Q}),oe.camera=Q}if(!z.scene){let J;m instanceof Wm?J=m:(J=new Wm,m&&ql(J,m)),z.set({scene:Kl(J)})}if(!z.xr){var $;const J=(ge,Ee)=>{const be=s.getState();be.frameloop!=="never"&&H2(ge,!0,be,Ee)},Q=()=>{const ge=s.getState();ge.gl.xr.enabled=ge.gl.xr.isPresenting,ge.gl.xr.setAnimationLoop(ge.gl.xr.isPresenting?J:null),ge.gl.xr.isPresenting||V2(ge)},le={connect(){const ge=s.getState().gl;ge.xr.addEventListener("sessionstart",Q),ge.xr.addEventListener("sessionend",Q)},disconnect(){const ge=s.getState().gl;ge.xr.removeEventListener("sessionstart",Q),ge.xr.removeEventListener("sessionend",Q)}};typeof(($=Z.xr)==null?void 0:$.addEventListener)=="function"&&le.connect(),z.set({xr:le})}if(Z.shadowMap){const J=Z.shadowMap.enabled,Q=Z.shadowMap.type;if(Z.shadowMap.enabled=!!x,Qt.boo(x))Z.shadowMap.type=lf;else if(Qt.str(x)){var se;const le={basic:WP,percentage:wg,soft:lf,variance:Ir};Z.shadowMap.type=(se=le[x])!=null?se:lf}else Qt.obj(x)&&Object.assign(Z.shadowMap,x);(J!==Z.shadowMap.enabled||Q!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}const N=nL();N&&("enabled"in N?N.enabled=!M:"legacyMode"in N&&(N.legacyMode=M)),ql(Z,{outputEncoding:v?3e3:3001,toneMapping:S?ls:q1}),z.legacy!==M&&z.set(()=>({legacy:M})),z.linear!==v&&z.set(()=>({linear:v})),z.flat!==S&&z.set(()=>({flat:S})),d&&!Qt.fun(d)&&!cL(d)&&!Qt.equ(d,Z,Zl)&&ql(Z,d),y&&!z.events.handlers&&z.set({events:y(s)});const Y=d8(n,p);return Qt.equ(Y,z.size,Zl)||z.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),b&&z.viewport.dpr!==aL(b)&&z.setDpr(b),z.frameloop!==P&&z.setFrameloop(P),z.onPointerMissed||z.set({onPointerMissed:R}),L&&!Qt.equ(L,z.performance,Zl)&&z.set(J=>({performance:{...J.performance,...L}})),a=w,l=!0,this},render(h){return l||this.configure(),Xm.updateContainer(W.createElement(m8,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){dL(n)}}}function m8({store:n,children:e,onCreated:t,rootElement:i}){return Eh(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),W.createElement(fL.Provider,{value:n},e)}function dL(n,e){const t=Vu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Xm.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),t8(r),Vu.delete(n),e&&e(n)}catch{}},500)})}}Xm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});function jr(){return jr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},jr.apply(this,arguments)}function N_(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,t||(a=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var h=t&&!i;return i||(i=setTimeout(l,e)),h&&(a=n.apply(s,r),s=r=null),a};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}N_.debounce=N_;var g8=N_;const G2=$_(g8);function v8(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=W.useRef(!1);W.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,y]=W.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:M,top:T,width:P,height:b,bottom:L,right:D,x:C,y:R}=l.current.element.getBoundingClientRect(),z={left:M,top:T,width:P,height:b,bottom:L,right:D,x:C,y:R};l.current.element instanceof HTMLElement&&r&&(z.height=l.current.element.offsetHeight,z.width=l.current.element.offsetWidth),Object.freeze(z),d.current&&!S8(l.current.lastBounds,z)&&a(l.current.lastBounds=z)};return[S,h?G2(S,h):S,f?G2(S,f):S]},[a,r,f,h]);function w(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",y,{capture:!0,passive:!0})))}const v=S=>{!S||S===l.current.element||(w(),l.current.element=S,l.current.scrollContainers=pL(S),x())};return x8(y,!!t),y8(m),W.useEffect(()=>{w(),x()},[t,y,m]),W.useEffect(()=>w,[]),[v,o,p]}function y8(n){W.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function x8(n,e){W.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function pL(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...pL(n.parentElement)]}const _8=["x","y","top","bottom","left","right","width","height"],S8=(n,e)=>_8.every(t=>n[t]===e[t]);var M8=Object.defineProperty,w8=Object.defineProperties,E8=Object.getOwnPropertyDescriptors,W2=Object.getOwnPropertySymbols,T8=Object.prototype.hasOwnProperty,A8=Object.prototype.propertyIsEnumerable,j2=(n,e,t)=>e in n?M8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X2=(n,e)=>{for(var t in e||(e={}))T8.call(e,t)&&j2(n,t,e[t]);if(W2)for(var t of W2(e))A8.call(e,t)&&j2(n,t,e[t]);return n},b8=(n,e)=>w8(n,E8(e));function mL(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=mL(i,e,t);if(r)return r;i=e?null:i.sibling}}function gL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const FS=gL(W.createContext(null));class vL extends W.Component{render(){return W.createElement(FS.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Y2,ReactCurrentDispatcher:q2}=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C8(){const n=W.useContext(FS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const i of[Y2==null?void 0:Y2.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=mL(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function P8(){var n,e;const t=C8(),[i]=W.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==FS&&!i.has(s)&&i.set(s,(e=q2==null?void 0:q2.current)==null?void 0:e.readContext(gL(s))),r=r.return}return i}function R8(){const n=P8();return W.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>W.createElement(e,null,W.createElement(t.Provider,b8(X2({},i),{value:n.get(t)}))),e=>W.createElement(vL,X2({},e))),[n])}const Iy={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function L8(n){const{handlePointer:e}=o8(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Iy).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,f]=Iy[o];t.addEventListener(l,a,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Iy[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const I8=W.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=L8,eventSource:a,eventPrefix:l,shadows:f,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:w,performance:x,raycaster:v,camera:S,scene:M,onPointerMissed:T,onCreated:P,...b},L){W.useMemo(()=>K6(H6),[]);const D=R8(),[C,R]=v8({scroll:!0,debounce:{scroll:50,resize:0},...i}),z=W.useRef(null),Z=W.useRef(null);W.useImperativeHandle(L,()=>z.current);const oe=rL(T),[H,K]=W.useState(!1),[$,se]=W.useState(!1);if(H)throw H;if($)throw $;const N=W.useRef(null);Eh(()=>{const V=z.current;R.width>0&&R.height>0&&V&&(N.current||(N.current=p8(V)),N.current.configure({gl:s,events:o,shadows:f,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:w,performance:x,raycaster:v,camera:S,scene:M,size:R,onPointerMissed:(...Y)=>oe.current==null?void 0:oe.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(a?J6(a)?a.current:a:Z.current),l&&Y.setEvents({compute:(J,Q)=>{const le=J[l+"X"],ge=J[l+"Y"];Q.pointer.set(le/Q.size.width*2-1,-(ge/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),P==null||P(Y)}}),N.current.render(W.createElement(D,null,W.createElement(sL,{set:se},W.createElement(W.Suspense,{fallback:W.createElement(Q6,{set:K})},e)))))}),W.useEffect(()=>{const V=z.current;if(V)return()=>dL(V)},[]);const B=a?"none":"auto";return W.createElement("div",jr({ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:B,...r}},b),W.createElement("div",{ref:C,style:{width:"100%",height:"100%"}},W.createElement("canvas",{ref:z,style:{display:"block"}},t)))}),yL=W.forwardRef(function(e,t){return W.createElement(vL,null,W.createElement(I8,jr({},e,{ref:t})))}),Ah=new k,zS=new k,N8=new k;function D8(n,e,t){const i=Ah.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function O8(n,e){const t=Ah.setFromMatrixPosition(n.matrixWorld),i=zS.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(N8);return r.angleTo(s)>Math.PI/2}function U8(n,e,t,i){const r=Ah.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function k8(n,e){if(e instanceof zr)return e.zoom;if(e instanceof tn){const t=Ah.setFromMatrixPosition(n.matrixWorld),i=zS.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function F8(n,e,t){if(e instanceof tn||e instanceof zr){const i=Ah.setFromMatrixPosition(n.matrixWorld),r=zS.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const D_=n=>Math.abs(n)<1e-10?0:n;function xL(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=D_(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const z8=(n=>e=>xL(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),B8=(n=>(e,t)=>xL(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function V8(n){return n&&typeof n=="object"&&"current"in n}const H8=W.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:f=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:y,material:w,geometry:x,zIndexRange:v=[16777271,0],calculatePosition:S=D8,as:M="div",wrapperClass:T,pointerEvents:P="auto",...b},L)=>{const{gl:D,camera:C,scene:R,size:z,raycaster:Z,events:oe,viewport:H}=gr(),[K]=W.useState(()=>document.createElement(M)),$=W.useRef(),se=W.useRef(null),N=W.useRef(0),B=W.useRef([0,0]),V=W.useRef(null),Y=W.useRef(null),J=(a==null?void 0:a.current)||oe.connected||D.domElement.parentNode,Q=W.useRef(null),le=W.useRef(!1),ge=W.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&V8(d[0]),[d]);W.useLayoutEffect(()=>{const Le=D.domElement;d&&d==="blending"?(Le.style.zIndex=`${Math.floor(v[0]/2)}`,Le.style.position="absolute",Le.style.pointerEvents="none"):(Le.style.zIndex=null,Le.style.position=null,Le.style.pointerEvents=null)},[d]),W.useLayoutEffect(()=>{if(se.current){const Le=$.current=LP(K);if(R.updateMatrixWorld(),h)K.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ce=S(se.current,C,z);K.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ce[0]}px,${Ce[1]}px,0);transform-origin:0 0;`}return J&&(r?J.prepend(K):J.appendChild(K)),()=>{J&&J.removeChild(K),Le.unmount()}}},[J,h]),W.useLayoutEffect(()=>{T&&(K.className=T)},[T]);const Ee=W.useMemo(()=>h?{position:"absolute",top:0,left:0,width:z.width,height:z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-z.height/2,left:-z.width/2,width:z.width,height:z.height},...t},[t,s,o,z,h]),be=W.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);W.useLayoutEffect(()=>{if(le.current=!1,h){var Le;(Le=$.current)==null||Le.render(W.createElement("div",{ref:V,style:Ee},W.createElement("div",{ref:Y,style:be},W.createElement("div",{ref:L,className:i,style:t,children:n}))))}else{var Ce;(Ce=$.current)==null||Ce.render(W.createElement("div",{ref:L,style:Ee,className:i,children:n}))}});const $e=W.useRef(!0);Th(Le=>{if(se.current){C.updateMatrixWorld(),se.current.updateWorldMatrix(!0,!1);const Ce=h?B.current:S(se.current,C,z);if(h||Math.abs(N.current-C.zoom)>e||Math.abs(B.current[0]-Ce[0])>e||Math.abs(B.current[1]-Ce[1])>e){const G=O8(se.current,C);let xe=!1;ge&&(Array.isArray(d)?xe=d.map(Ge=>Ge.current):d!=="blending"&&(xe=[R]));const de=$e.current;if(xe){const Ge=U8(se.current,C,Z,xe);$e.current=Ge&&!G}else $e.current=!G;de!==$e.current&&(p?p(!$e.current):K.style.display=$e.current?"block":"none");const Te=Math.floor(v[0]/2),pe=d?ge?[v[0],Te]:[Te-1,0]:v;if(K.style.zIndex=`${F8(se.current,C,pe)}`,h){const[Ge,De]=[z.width/2,z.height/2],O=C.projectionMatrix.elements[5]*De,{isOrthographicCamera:I,top:ne,left:Se,bottom:_e,right:ye}=C,qe=z8(C.matrixWorldInverse),Ie=I?`scale(${O})translate(${D_(-(ye+Se)/2)}px,${D_((ne+_e)/2)}px)`:`translateZ(${O}px)`;let Oe=se.current.matrixWorld;f&&(Oe=C.matrixWorldInverse.clone().transpose().copyPosition(Oe).scale(se.current.scale),Oe.elements[3]=Oe.elements[7]=Oe.elements[11]=0,Oe.elements[15]=1),K.style.width=z.width+"px",K.style.height=z.height+"px",K.style.perspective=I?"":`${O}px`,V.current&&Y.current&&(V.current.style.transform=`${Ie}${qe}translate(${Ge}px,${De}px)`,Y.current.style.transform=B8(Oe,1/((l||10)/400)))}else{const Ge=l===void 0?1:k8(se.current,C)*l;K.style.transform=`translate3d(${Ce[0]}px,${Ce[1]}px,0) scale(${Ge})`}B.current=Ce,N.current=C.zoom}}if(!ge&&Q.current&&!le.current)if(h){if(V.current){const Ce=V.current.children[0];if(Ce!=null&&Ce.clientWidth&&Ce!=null&&Ce.clientHeight){const{isOrthographicCamera:G}=C;if(G||x)b.scale&&(Array.isArray(b.scale)?b.scale instanceof k?Q.current.scale.copy(b.scale.clone().divideScalar(1)):Q.current.scale.set(1/b.scale[0],1/b.scale[1],1/b.scale[2]):Q.current.scale.setScalar(1/b.scale));else{const xe=(l||10)/400,de=Ce.clientWidth*xe,Te=Ce.clientHeight*xe;Q.current.scale.set(de,Te,1)}le.current=!0}}}else{const Ce=K.children[0];if(Ce!=null&&Ce.clientWidth&&Ce!=null&&Ce.clientHeight){const G=1/H.factor,xe=Ce.clientWidth*G,de=Ce.clientHeight*G;Q.current.scale.set(xe,de,1),le.current=!0}Q.current.lookAt(Le.camera.position)}});const nt=W.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return W.createElement("group",jr({},b,{ref:se}),d&&!ge&&W.createElement("mesh",{castShadow:m,receiveShadow:y,ref:Q},x||W.createElement("planeGeometry",null),w||W.createElement("shaderMaterial",{side:Ur,vertexShader:nt.vertexShader,fragmentShader:nt.fragmentShader})))});let Bc=0;const G8=J3(n=>(mu.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Bc)/(i-Bc)*100})},mu.onLoad=()=>{n({active:!1})},mu.onError=e=>n(t=>({errors:[...t.errors,e]})),mu.onProgress=(e,t,i)=>{t===i&&(Bc=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Bc)/(i-Bc)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function _L(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Cu(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function K2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z2(Object(t),!0).forEach(function(i){Cu(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Z2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}new me;new me;function SL(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var dr=function n(e,t,i){var r=this;SL(this,n),Cu(this,"dot2",function(s,o){return r.x*s+r.y*o}),Cu(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},W8=[new dr(1,1,0),new dr(-1,1,0),new dr(1,-1,0),new dr(-1,-1,0),new dr(1,0,1),new dr(-1,0,1),new dr(1,0,-1),new dr(-1,0,-1),new dr(0,1,1),new dr(0,-1,1),new dr(0,1,-1),new dr(0,-1,-1)],$2=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],J2=new Array(512),Q2=new Array(512),j8=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=$2[t]^e&255:i=$2[t]^e>>8&255,J2[t]=J2[t+256]=i,Q2[t]=Q2[t+256]=W8[i%12]}};j8(0);function X8(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function eA(n){var e=X8(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Y8=function n(e){var t=this;SL(this,n),Cu(this,"seed",0),Cu(this,"init",function(i){t.seed=i,t.value=eA(i)}),Cu(this,"value",eA(this.seed)),this.init(e)},q8=new Y8(Math.random()),Z8={radius:1,center:[0,0,0]};function K8(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:q8,i=K2(K2({},Z8),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,f=t.value()*2-1,h=t.value()*2-1,d=Math.sqrt(l*l+f*f+h*h);l=a*l/d,f=a*f/d,h=a*h/d,n[o]=l*r+s[0],n[o+1]=f*r+s[1],n[o+2]=h*r+s[2]}return n}var $8=Object.defineProperty,J8=(n,e,t)=>e in n?$8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ht=(n,e,t)=>(J8(n,typeof e!="symbol"?e+"":e,t),t);const kp=new il,tA=new Rs,Q8=Math.cos(70*(Math.PI/180)),nA=(n,e)=>(n%e+e)%e;let eH=class extends ps{constructor(e,t){super(),ht(this,"object"),ht(this,"domElement"),ht(this,"enabled",!0),ht(this,"target",new k),ht(this,"minDistance",0),ht(this,"maxDistance",1/0),ht(this,"minZoom",0),ht(this,"maxZoom",1/0),ht(this,"minPolarAngle",0),ht(this,"maxPolarAngle",Math.PI),ht(this,"minAzimuthAngle",-1/0),ht(this,"maxAzimuthAngle",1/0),ht(this,"enableDamping",!1),ht(this,"dampingFactor",.05),ht(this,"enableZoom",!0),ht(this,"zoomSpeed",1),ht(this,"enableRotate",!0),ht(this,"rotateSpeed",1),ht(this,"enablePan",!0),ht(this,"panSpeed",1),ht(this,"screenSpacePanning",!0),ht(this,"keyPanSpeed",7),ht(this,"zoomToCursor",!1),ht(this,"autoRotate",!1),ht(this,"autoRotateSpeed",2),ht(this,"reverseOrbit",!1),ht(this,"reverseHorizontalOrbit",!1),ht(this,"reverseVerticalOrbit",!1),ht(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ht(this,"mouseButtons",{LEFT:Ma.ROTATE,MIDDLE:Ma.DOLLY,RIGHT:Ma.PAN}),ht(this,"touches",{ONE:wa.ROTATE,TWO:wa.DOLLY_PAN}),ht(this,"target0"),ht(this,"position0"),ht(this,"zoom0"),ht(this,"_domElementKeyEvents",null),ht(this,"getPolarAngle"),ht(this,"getAzimuthalAngle"),ht(this,"setPolarAngle"),ht(this,"setAzimuthalAngle"),ht(this,"getDistance"),ht(this,"listenToKeyEvents"),ht(this,"stopListenToKeyEvents"),ht(this,"saveState"),ht(this,"reset"),ht(this,"update"),ht(this,"connect"),ht(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=X=>{let ve=nA(X,2*Math.PI),Be=h.phi;Be<0&&(Be+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let Fe=Math.abs(ve-Be);2*Math.PI-Fe<Fe&&(ve<Be?ve+=2*Math.PI:Be+=2*Math.PI),d.phi=ve-Be,i.update()},this.setAzimuthalAngle=X=>{let ve=nA(X,2*Math.PI),Be=h.theta;Be<0&&(Be+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let Fe=Math.abs(ve-Be);2*Math.PI-Fe<Fe&&(ve<Be?ve+=2*Math.PI:Be+=2*Math.PI),d.theta=ve-Be,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=X=>{X.addEventListener("keydown",it),this._domElementKeyEvents=X},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",it),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const X=new k,ve=new k(0,1,0),Be=new ci().setFromUnitVectors(e.up,ve),Fe=Be.clone().invert(),we=new k,j=new ci,Re=2*Math.PI;return function(){const rt=i.object.position;Be.setFromUnitVectors(e.up,ve),Fe.copy(Be).invert(),X.copy(rt).sub(i.target),X.applyQuaternion(Be),h.setFromVector3(X),i.autoRotate&&l===a.NONE&&H(Z()),i.enableDamping?(h.theta+=d.theta*i.dampingFactor,h.phi+=d.phi*i.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let Ze=i.minAzimuthAngle,bt=i.maxAzimuthAngle;isFinite(Ze)&&isFinite(bt)&&(Ze<-Math.PI?Ze+=Re:Ze>Math.PI&&(Ze-=Re),bt<-Math.PI?bt+=Re:bt>Math.PI&&(bt-=Re),Ze<=bt?h.theta=Math.max(Ze,Math.min(bt,h.theta)):h.theta=h.theta>(Ze+bt)/2?Math.max(Ze,h.theta):Math.min(bt,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&C||i.object.isOrthographicCamera?h.radius=J(h.radius):h.radius=J(h.radius*p),X.setFromSpherical(h),X.applyQuaternion(Fe),rt.copy(i.target).add(X),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let Rt=!1;if(i.zoomToCursor&&C){let Ht=null;if(i.object instanceof tn&&i.object.isPerspectiveCamera){const Kt=X.length();Ht=J(Kt*p);const Lt=Kt-Ht;i.object.position.addScaledVector(L,Lt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Kt=new k(D.x,D.y,0);Kt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),Rt=!0;const Lt=new k(D.x,D.y,0);Lt.unproject(i.object),i.object.position.sub(Lt).add(Kt),i.object.updateMatrixWorld(),Ht=X.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ht!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ht).add(i.object.position):(kp.origin.copy(i.object.position),kp.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(kp.direction))<Q8?e.lookAt(i.target):(tA.setFromNormalAndCoplanarPoint(i.object.up,i.target),kp.intersectPlane(tA,i.target))))}else i.object instanceof zr&&i.object.isOrthographicCamera&&(Rt=p!==1,Rt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,C=!1,Rt||we.distanceToSquared(i.object.position)>f||8*(1-j.dot(i.object.quaternion))>f?(i.dispatchEvent(r),we.copy(i.object.position),j.copy(i.object.quaternion),Rt=!1,!0):!1}})(),this.connect=X=>{X===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=X,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ct),i.domElement.addEventListener("pointerdown",ne),i.domElement.addEventListener("pointercancel",ye),i.domElement.addEventListener("wheel",Oe)},this.dispose=()=>{var X,ve,Be,Fe,we,j;(X=i.domElement)==null||X.removeEventListener("contextmenu",Ct),(ve=i.domElement)==null||ve.removeEventListener("pointerdown",ne),(Be=i.domElement)==null||Be.removeEventListener("pointercancel",ye),(Fe=i.domElement)==null||Fe.removeEventListener("wheel",Oe),(we=i.domElement)==null||we.ownerDocument.removeEventListener("pointermove",Se),(j=i.domElement)==null||j.ownerDocument.removeEventListener("pointerup",_e),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",it)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const f=1e-6,h=new R_,d=new R_;let p=1;const m=new k,y=new me,w=new me,x=new me,v=new me,S=new me,M=new me,T=new me,P=new me,b=new me,L=new k,D=new me;let C=!1;const R=[],z={};function Z(){return 2*Math.PI/60/60*i.autoRotateSpeed}function oe(){return Math.pow(.95,i.zoomSpeed)}function H(X){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=X:d.theta-=X}function K(X){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=X:d.phi-=X}const $=(()=>{const X=new k;return function(Be,Fe){X.setFromMatrixColumn(Fe,0),X.multiplyScalar(-Be),m.add(X)}})(),se=(()=>{const X=new k;return function(Be,Fe){i.screenSpacePanning===!0?X.setFromMatrixColumn(Fe,1):(X.setFromMatrixColumn(Fe,0),X.crossVectors(i.object.up,X)),X.multiplyScalar(Be),m.add(X)}})(),N=(()=>{const X=new k;return function(Be,Fe){const we=i.domElement;if(we&&i.object instanceof tn&&i.object.isPerspectiveCamera){const j=i.object.position;X.copy(j).sub(i.target);let Re=X.length();Re*=Math.tan(i.object.fov/2*Math.PI/180),$(2*Be*Re/we.clientHeight,i.object.matrix),se(2*Fe*Re/we.clientHeight,i.object.matrix)}else we&&i.object instanceof zr&&i.object.isOrthographicCamera?($(Be*(i.object.right-i.object.left)/i.object.zoom/we.clientWidth,i.object.matrix),se(Fe*(i.object.top-i.object.bottom)/i.object.zoom/we.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function B(X){i.object instanceof tn&&i.object.isPerspectiveCamera||i.object instanceof zr&&i.object.isOrthographicCamera?p/=X:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function V(X){i.object instanceof tn&&i.object.isPerspectiveCamera||i.object instanceof zr&&i.object.isOrthographicCamera?p*=X:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Y(X){if(!i.zoomToCursor||!i.domElement)return;C=!0;const ve=i.domElement.getBoundingClientRect(),Be=X.clientX-ve.left,Fe=X.clientY-ve.top,we=ve.width,j=ve.height;D.x=Be/we*2-1,D.y=-(Fe/j)*2+1,L.set(D.x,D.y,1).unproject(i.object).sub(i.object.position).normalize()}function J(X){return Math.max(i.minDistance,Math.min(i.maxDistance,X))}function Q(X){y.set(X.clientX,X.clientY)}function le(X){Y(X),T.set(X.clientX,X.clientY)}function ge(X){v.set(X.clientX,X.clientY)}function Ee(X){w.set(X.clientX,X.clientY),x.subVectors(w,y).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(H(2*Math.PI*x.x/ve.clientHeight),K(2*Math.PI*x.y/ve.clientHeight)),y.copy(w),i.update()}function be(X){P.set(X.clientX,X.clientY),b.subVectors(P,T),b.y>0?B(oe()):b.y<0&&V(oe()),T.copy(P),i.update()}function $e(X){S.set(X.clientX,X.clientY),M.subVectors(S,v).multiplyScalar(i.panSpeed),N(M.x,M.y),v.copy(S),i.update()}function nt(X){Y(X),X.deltaY<0?V(oe()):X.deltaY>0&&B(oe()),i.update()}function Le(X){let ve=!1;switch(X.code){case i.keys.UP:N(0,i.keyPanSpeed),ve=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),ve=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),ve=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),ve=!0;break}ve&&(X.preventDefault(),i.update())}function Ce(){if(R.length==1)y.set(R[0].pageX,R[0].pageY);else{const X=.5*(R[0].pageX+R[1].pageX),ve=.5*(R[0].pageY+R[1].pageY);y.set(X,ve)}}function G(){if(R.length==1)v.set(R[0].pageX,R[0].pageY);else{const X=.5*(R[0].pageX+R[1].pageX),ve=.5*(R[0].pageY+R[1].pageY);v.set(X,ve)}}function xe(){const X=R[0].pageX-R[1].pageX,ve=R[0].pageY-R[1].pageY,Be=Math.sqrt(X*X+ve*ve);T.set(0,Be)}function de(){i.enableZoom&&xe(),i.enablePan&&G()}function Te(){i.enableZoom&&xe(),i.enableRotate&&Ce()}function pe(X){if(R.length==1)w.set(X.pageX,X.pageY);else{const Be=We(X),Fe=.5*(X.pageX+Be.x),we=.5*(X.pageY+Be.y);w.set(Fe,we)}x.subVectors(w,y).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(H(2*Math.PI*x.x/ve.clientHeight),K(2*Math.PI*x.y/ve.clientHeight)),y.copy(w)}function Ge(X){if(R.length==1)S.set(X.pageX,X.pageY);else{const ve=We(X),Be=.5*(X.pageX+ve.x),Fe=.5*(X.pageY+ve.y);S.set(Be,Fe)}M.subVectors(S,v).multiplyScalar(i.panSpeed),N(M.x,M.y),v.copy(S)}function De(X){const ve=We(X),Be=X.pageX-ve.x,Fe=X.pageY-ve.y,we=Math.sqrt(Be*Be+Fe*Fe);P.set(0,we),b.set(0,Math.pow(P.y/T.y,i.zoomSpeed)),B(b.y),T.copy(P)}function O(X){i.enableZoom&&De(X),i.enablePan&&Ge(X)}function I(X){i.enableZoom&&De(X),i.enableRotate&&pe(X)}function ne(X){var ve,Be;i.enabled!==!1&&(R.length===0&&((ve=i.domElement)==null||ve.ownerDocument.addEventListener("pointermove",Se),(Be=i.domElement)==null||Be.ownerDocument.addEventListener("pointerup",_e)),xt(X),X.pointerType==="touch"?pt(X):qe(X))}function Se(X){i.enabled!==!1&&(X.pointerType==="touch"?Me(X):Ie(X))}function _e(X){var ve,Be,Fe;ct(X),R.length===0&&((ve=i.domElement)==null||ve.releasePointerCapture(X.pointerId),(Be=i.domElement)==null||Be.ownerDocument.removeEventListener("pointermove",Se),(Fe=i.domElement)==null||Fe.ownerDocument.removeEventListener("pointerup",_e)),i.dispatchEvent(o),l=a.NONE}function ye(X){ct(X)}function qe(X){let ve;switch(X.button){case 0:ve=i.mouseButtons.LEFT;break;case 1:ve=i.mouseButtons.MIDDLE;break;case 2:ve=i.mouseButtons.RIGHT;break;default:ve=-1}switch(ve){case Ma.DOLLY:if(i.enableZoom===!1)return;le(X),l=a.DOLLY;break;case Ma.ROTATE:if(X.ctrlKey||X.metaKey||X.shiftKey){if(i.enablePan===!1)return;ge(X),l=a.PAN}else{if(i.enableRotate===!1)return;Q(X),l=a.ROTATE}break;case Ma.PAN:if(X.ctrlKey||X.metaKey||X.shiftKey){if(i.enableRotate===!1)return;Q(X),l=a.ROTATE}else{if(i.enablePan===!1)return;ge(X),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ie(X){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Ee(X);break;case a.DOLLY:if(i.enableZoom===!1)return;be(X);break;case a.PAN:if(i.enablePan===!1)return;$e(X);break}}function Oe(X){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(X.preventDefault(),i.dispatchEvent(s),nt(X),i.dispatchEvent(o))}function it(X){i.enabled===!1||i.enablePan===!1||Le(X)}function pt(X){switch(tt(X),R.length){case 1:switch(i.touches.ONE){case wa.ROTATE:if(i.enableRotate===!1)return;Ce(),l=a.TOUCH_ROTATE;break;case wa.PAN:if(i.enablePan===!1)return;G(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case wa.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;de(),l=a.TOUCH_DOLLY_PAN;break;case wa.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Te(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Me(X){switch(tt(X),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;pe(X),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ge(X),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;O(X),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;I(X),i.update();break;default:l=a.NONE}}function Ct(X){i.enabled!==!1&&X.preventDefault()}function xt(X){R.push(X)}function ct(X){delete z[X.pointerId];for(let ve=0;ve<R.length;ve++)if(R[ve].pointerId==X.pointerId){R.splice(ve,1);return}}function tt(X){let ve=z[X.pointerId];ve===void 0&&(ve=new me,z[X.pointerId]=ve),ve.set(X.pageX,X.pageY)}function We(X){const ve=X.pointerId===R[0].pointerId?R[1]:R[0];return z[ve.pointerId]}t!==void 0&&this.connect(t),this.update()}};const tH=()=>parseInt(hh.replace(/\D+/g,"")),ML=tH(),nH=W.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...f},h)=>{const d=gr(b=>b.invalidate),p=gr(b=>b.camera),m=gr(b=>b.gl),y=gr(b=>b.events),w=gr(b=>b.setEvents),x=gr(b=>b.set),v=gr(b=>b.get),S=gr(b=>b.performance),M=e||p,T=i||y.connected||m.domElement,P=W.useMemo(()=>new eH(M),[M]);return Th(()=>{P.enabled&&P.update()},-1),W.useEffect(()=>(s&&P.connect(s===!0?T:s),P.connect(T),()=>void P.dispose()),[s,T,t,P,d]),W.useEffect(()=>{const b=C=>{d(),t&&S.regress(),o&&o(C)},L=C=>{a&&a(C)},D=C=>{l&&l(C)};return P.addEventListener("change",b),P.addEventListener("start",L),P.addEventListener("end",D),()=>{P.removeEventListener("start",L),P.removeEventListener("end",D),P.removeEventListener("change",b)}},[o,a,l,P,d,w]),W.useEffect(()=>{if(n){const b=v().controls;return x({controls:P}),()=>x({controls:b})}},[n,P]),W.createElement("primitive",jr({ref:h,object:P,enableDamping:r},f))});var wL={exports:{}},iH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rH=iH,sH=rH;function EL(){}function TL(){}TL.resetWarningCache=EL;var oH=function(){function n(i,r,s,o,a,l){if(l!==sH){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:TL,resetWarningCache:EL};return t.PropTypes=t,t};wL.exports=oH();var AL=wL.exports;const Ny=ML>=154?"opaque_fragment":"output_fragment";class aH extends Dg{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${Ny}>`,`
        ${r?`#include <${Ny}>`:`#extension GL_OES_standard_derivatives : enable
#include <${Ny}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${ML>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const lH=W.forwardRef((n,e)=>{const[t]=W.useState(()=>new aH(null));return W.createElement("primitive",jr({},n,{object:t,ref:e,attach:"material"}))});let ya,Vc;const uH=W.createContext(null),iA=new ft,rA=new k,cH=W.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=W.useRef(null),[o,a]=W.useState([]),[[l,f,h]]=W.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);W.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Th(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),iA.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),ya=0;ya<o.length;ya++)Vc=o[ya].current,Vc.getWorldPosition(rA).applyMatrix4(iA),rA.toArray(l,ya*3),s.current.geometry.attributes.position.needsUpdate=!0,Vc.matrixWorldNeedsUpdate=!0,Vc.color.toArray(f,ya*3),s.current.geometry.attributes.color.needsUpdate=!0,h.set([Vc.size],ya),s.current.geometry.attributes.size.needsUpdate=!0});const d=W.useMemo(()=>({getParent:()=>s,subscribe:p=>(a(m=>[...m,p]),()=>a(m=>m.filter(y=>y.current!==p.current)))}),[]);return W.createElement("points",jr({userData:{instances:o},matrixAutoUpdate:!1,ref:_L([r,s]),raycast:()=>null},i),W.createElement("bufferGeometry",null,W.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Va}),W.createElement("bufferAttribute",{attach:"attributes-color",count:f.length/3,array:f,itemSize:3,usage:Va}),W.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:Va})),W.createElement(uH.Provider,{value:d},n))}),fH=W.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=W.useRef(null);return Th(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),W.createElement("points",jr({ref:_L([o,a])},s),W.createElement("bufferGeometry",null,W.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Va}),t&&W.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Va}),i&&W.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:Va})),n)}),hH=W.forwardRef((n,e)=>n.positions instanceof Float32Array?W.createElement(fH,jr({},n,{ref:e})):W.createElement(cH,jr({},n,{ref:e})));function bL({all:n,scene:e,camera:t}){const i=gr(({gl:o})=>o),r=gr(({camera:o})=>o),s=gr(({scene:o})=>o);return W.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(f=>{f.visible===!1&&(o.push(f),f.visible=!0)}),i.compile(e||s,t||r);const a=new hS(128);new fS(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(f=>f.visible=!1)},[]),null}const dH=()=>{const{progress:n}=G8();return te.jsxs(H8,{children:[te.jsx("span",{className:"canvas-load"}),te.jsxs("p",{style:{fontSize:14,color:"#f1f1f1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},pH=()=>te.jsx(yL,{shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:te.jsxs(W.Suspense,{fallback:te.jsx(dH,{}),children:[te.jsx(nH,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),te.jsx(bL,{all:!0})]})}),mH=n=>{const e=W.useRef(),[t]=W.useState(()=>K8(new Float32Array(5001),{radius:1.2}));return Th((i,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),te.jsx("group",{rotation:[0,0,Math.PI/4],children:te.jsx(hH,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:te.jsx(lH,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},gH=()=>te.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:te.jsxs(yL,{camera:{position:[0,0,1]},children:[te.jsx(W.Suspense,{fallback:null,children:te.jsx(mH,{})}),te.jsx(bL,{all:!0})]})});var CL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sA=_r.createContext&&_r.createContext(CL),vH=["attr","size","title"];function yH(n,e){if(n==null)return{};var t=xH(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function xH(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Ym(){return Ym=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ym.apply(this,arguments)}function oA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function qm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oA(Object(t),!0).forEach(function(i){_H(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oA(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _H(n,e,t){return e=SH(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SH(n){var e=MH(n,"string");return typeof e=="symbol"?e:String(e)}function MH(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function PL(n){return n&&n.map((e,t)=>_r.createElement(e.tag,qm({key:t},e.attr),PL(e.child)))}function Er(n){return e=>_r.createElement(wH,Ym({attr:qm({},n.attr)},e),PL(n.child))}function wH(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=yH(n,vH),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),_r.createElement("svg",Ym({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:qm(qm({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&_r.createElement("title",null,s),n.children)};return sA!==void 0?_r.createElement(sA.Consumer,null,t=>e(t)):e(CL)}function EH(n){return Er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(n)}function TH(n){return Er({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function AH(n){return Er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function bH(n){return Er({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(n)}function CH(n){return Er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function PH(n){return Er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M352 96c0-53.02-42.98-96-96-96s-96 42.98-96 96 42.98 96 96 96 96-42.98 96-96zM233.59 241.1c-59.33-36.32-155.43-46.3-203.79-49.05C13.55 191.13 0 203.51 0 219.14v222.8c0 14.33 11.59 26.28 26.49 27.05 43.66 2.29 131.99 10.68 193.04 41.43 9.37 4.72 20.48-1.71 20.48-11.87V252.56c-.01-4.67-2.32-8.95-6.42-11.46zm248.61-49.05c-48.35 2.74-144.46 12.73-203.78 49.05-4.1 2.51-6.41 6.96-6.41 11.63v245.79c0 10.19 11.14 16.63 20.54 11.9 61.04-30.72 149.32-39.11 192.97-41.4 14.9-.78 26.49-12.73 26.49-27.06V219.14c-.01-15.63-13.56-28.01-29.81-27.09z"},child:[]}]})(n)}function aA(n){return Er({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zm-132.9 88.7L299.3 420.7c-6.2 6.2-16.4 6.2-22.6 0L171.3 315.3c-10.1-10.1-2.9-27.3 11.3-27.3H248V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v112h65.4c14.2 0 21.4 17.2 11.3 27.3z"},child:[]}]})(n)}function RH(n){return Er({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M91.826 467.2V317.966c-8.248 5.841-16.558 10.57-24.918 14.153C35.098 345.752-.014 322.222 0 288c.008-18.616 10.897-32.203 29.092-40 28.286-12.122 64.329-78.648 77.323-107.534 7.956-17.857 25.479-28.453 43.845-28.464l.001-.002h171.526c11.812 0 21.897 8.596 23.703 20.269 7.25 46.837 38.483 61.76 38.315 123.731-.007 2.724.195 13.254.195 16 0 50.654-22.122 81.574-71.263 72.6-9.297 18.597-39.486 30.738-62.315 16.45-21.177 24.645-53.896 22.639-70.944 6.299V467.2c0 24.15-20.201 44.8-43.826 44.8-23.283 0-43.826-21.35-43.826-44.8zM112 72V24c0-13.255 10.745-24 24-24h192c13.255 0 24 10.745 24 24v48c0 13.255-10.745 24-24 24H136c-13.255 0-24-10.745-24-24zm212-24c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20z"},child:[]}]})(n)}function LH(n){return Er({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(n)}function IH(n){return Er({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z"},child:[]}]})(n)}function NH(n){return Er({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.5 11c.17 0 .34.01.5.03V6.87C19 5.84 18.16 5 17.13 5H3.87C2.84 5 2 5.84 2 6.87v10.26C2 18.16 2.84 19 3.87 19h9.73c-.38-.75-.6-1.6-.6-2.5 0-3.04 2.46-5.5 5.5-5.5zm-8.1 2L4 9.19V7h.23l6.18 3.68L16.74 7H17v2.16L10.4 13z"},child:[]},{tag:"path",attr:{d:"m19 13-1.41 1.41L19.17 16H15v2h4.17l-1.58 1.59L19 21l4-4z"},child:[]}]})(n)}function DH(n){return Er({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19.8 2-8.2 6.7-1.21-1.04 3.6-2.08L9.41 1 8 2.41l2.74 2.74L5 8.46l-1.19 4.29L6.27 17 8 16l-2.03-3.52.35-1.3L9.5 13l.5 9h2l.5-10L21 3.4z"},child:[]},{tag:"circle",attr:{cx:"5",cy:"5",r:"2"},child:[]}]})(n)}const qn={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[50px] sm:text-[40px] xs:text-[44px] text-[30px] lg:leading-[90px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[22px] sm:text-[20px] xs:text-[18px] text-[16px] lg:leading-[36px]",sectionHeadText:"text-white font-black md:text-[50px] sm:text-[44px] xs:text-[38px] text-[28px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},OH=()=>{const[n,e]=W.useState(!1),t=()=>{const i=document.getElementById("myGmail"),r=document.createElement("textarea");r.value=i.textContent,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),e(!0),setTimeout(()=>{e(!1)},3e3)};return te.jsx("section",{className:"relative w-full h-screen mx-auto",children:te.jsxs("div",{className:`${qn.paddingX} absolute inset-0 top-[100px] mx-w-7xl 
        mx-auto flex flex-row items-start gap-5`,children:[te.jsxs("div",{className:"flex flex-col items-center justify-center mt-5",children:[te.jsx("div",{className:"w-5 h-5 rounded-full bg-[#915eff]"}),te.jsx("div",{className:"w-1 sm:h-90 h-80 violet-gradient"})]}),n&&te.jsx("span",{className:"text-white-100 w-full max-w-80 rounded flex place-self-center justify-center items-center p-3 fixed top-22 z-10 bg-gradient-to-r from-indigo-300",children:"Email has been copied! "}),te.jsxs("div",{children:[te.jsxs("h1",{className:`${qn.heroHeadText} text-white`,children:[" Front End ",te.jsx("span",{className:"text-[#915eff]",children:" Developer "})," "]}),te.jsxs("p",{className:`${qn.heroSubText} mt-1 text-white-100`,children:["Check out my portfolio and previous projects to understand the depth of my skills and experience. If you have a project that requires coding expertise, I'm ready to help you turn your ideas into reality. Please feel free to reach out to me. ",te.jsx(RH,{className:"inline text-[32px] text-[#915eff]"}),te.jsxs("span",{className:"inline flex flex-row gap-2 mt-7",children:[te.jsxs("a",{className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer inline hover:text-teal-900",target:"_blank",href:"https://www.linkedin.com/in/ali-akbar-sazish/",children:[" ",te.jsx(bH,{})," "]}),te.jsxs("a",{className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer inline hover:text-teal-900",target:"_blank",href:"https://github.com/akbarsazish",children:[" ",te.jsx(TH,{})," "]}),te.jsxs("a",{className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer inline hover:text-teal-900",target:"_blank",href:"https://twitter.com/AliAkbarSazish1",children:[" ",te.jsx(CH,{})," "]}),te.jsxs("a",{className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer inline hover:text-teal-900",target:"_blank",href:"https://www.facebook.com/profile.php?id=100008137806708",children:[" ",te.jsx(EH,{})," "]}),te.jsxs("a",{className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer inline hover:text-teal-900",target:"_blank",href:"https://www.instagram.com/ali_sazish/",children:[" ",te.jsx(AH,{})," "]}),te.jsxs("span",{onClick:t,className:"black-gradient  w-10 h-10 rounded-full flex justify-center items-center cursor-pointer inline hover:text-teal-900",children:[te.jsx("span",{id:"myGmail",className:"hidden",children:" sazishaliakbar@gmail.com "}),te.jsx(NH,{})]})]})]}),te.jsxs("p",{className:`${qn.heroSubText} mt-6 text-white-100`,children:[" Email:  ",te.jsx("span",{className:"text-[#915eff]",children:" sazishaliakbar@gmail.com "})," "]}),te.jsxs("p",{className:`${qn.heroSubText} text-white-100`,children:[" Phone:  ",te.jsxs("span",{className:"text-[#915eff]",children:[" +9100473242 ",te.jsx("span",{className:"text-white",children:" | "})," +9045028064 "]})," "]}),te.jsx("h1",{className:"lg:text-[40px] sm:text-[30px] xs:text-[25px] text-[20px] lg:leading-[80px] font-bold mt-5",children:"  My Hobbies: "}),te.jsxs("div",{className:"flex flex-row flex-wrap gap-5",children:[te.jsxs("button",{className:"green-pink-gradient cursor-pointer text-white font-semibold py-2 px-4 rounded",children:[" ",te.jsx(PH,{className:"inline"})," Reading Book "]}),te.jsxs("button",{className:"green-pink-gradient cursor-pointer text-white font-semibold py-2 px-4 rounded",children:[" ",te.jsx(DH,{className:"inline"})," Sport "]}),te.jsxs("button",{className:"green-pink-gradient cursor-pointer text-white font-semibold py-2 px-4 rounded",children:[" ",te.jsx(IH,{className:"inline"})," Traveling "]}),te.jsxs("button",{className:"green-pink-gradient cursor-pointer text-white font-semibold py-2 px-4 rounded",children:[" ",te.jsx(LH,{className:"inline"})," Music "]})]})]})]})})},UH="/portfolio/assets/logo-l45NlMAD.jpg",kH="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",FH="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",zH="/portfolio/assets/starfoods-vg8SPvOA.png",BH="/portfolio/assets/addressLLC-Cxl_e11u.png",VH="/portfolio/assets/trade-qQUG3Mn6.png",HH="/portfolio/assets/education-Ln0sVtdc.png",GH="/portfolio/assets/starfood-gNNfcFs8.png",WH="/portfolio/assets/crm-iXJG736w.png",jH="/portfolio/assets/math-7kHrzIMg.png",XH="/portfolio/assets/air_pollution-SEhi2QtR.png",YH="/portfolio/assets/awesome_books-ChtibX9L.png",qH="/portfolio/assets/book_store-exs7dPE1.png",ZH="/portfolio/assets/online_academy-lCEfLbyq.png",lA=[{id:"about",title:"About"},{id:"work",title:"Work"},{id:"contact",title:"Contact"}],KH=[{title:"Frontend Developer",company_name:"Artam Almas Alborz",icon:zH,iconBg:"#383E56",date:"Apr 2022 - PRESENT",points:["Developing and maintaining web applications using JavaScript, TypeScript, React.js and other related technologies.","Collaborating with cross-functional teams including designers, product managers, and other developers to create high-quality products.","Implementing responsive design and ensuring cross-browser compatibility.","Participating in code reviews and providing constructive feedback to other developers."]},{title:"Web Developer",company_name:"ADRAS (Afghanistan Development and Registry and Addressing Services)",icon:BH,iconBg:"#E6DEDD",date:"Feb 2020 - Aug 2021",points:["Contributed to the development of a large software system that centralizes administrative operations of governmental civil ORGs across 34 provinces.","The system focused on employee records and letter management in ministries and their departments.","Independently created 2 modules from scratch and participated as a team member on 5 additional projects.","Played an essential role as part of a team of 189 IT and web developers in the successful deployment of the software to over 3,000 active users."]},{title:"Database Manager",company_name:"Ministry of industry and Commerce",icon:VH,iconBg:"#383E56",date:"Sep 2018 - Jan 2020",points:["Retrieve information through database queries.","Work closely with developers to assist in database schema design and development tasks.","Support database backup and recovery processes as needed.","Foster effective communication and collaboration with database developers to align with project requirements.."]},{title:"Biometric Technical Member",company_name:"Ministry of Higher Education of Afghanistan",icon:HH,iconBg:"#E6DEDD",date:"Feb 2017 - Aug 2018",points:["Coordinated the distribution of ID cards for Kankor Examination volunteers.","Managed the registration process for Kankor Examination volunteers, verifying their identity through eye detection and fingerprint scanning.","Facilitated the seamless transfer of database data between computers and the server through efficient export and import operations..","Participating in code reviews and providing constructive feedback to other developers."]}],$H=[{front:"JavaScript",percentage:90},{front:"TypeScript",percentage:80},{front:"React & Redux Toolkit",percentage:85},{front:"jQuery & Ajax",percentage:80},{front:"Tailwind & Bootstrap",percentage:70},{front:"HTML & CCS",percentage:95}],JH=[{backEnd:"PHP",percentage:60},{backEnd:"Laravel",percentage:65},{backEnd:"SQL",percentage:50},{backEnd:"WordPress",percentage:70}],QH=[{tools:"Git & GitHub",percentage:85},{tools:"API",percentage:80},{tools:"Responsive Dev",percentage:90},{tools:"Chrome Dev Tools",percentage:85}],e9=[{soft:"Problem solving",percentage:85},{soft:"Team work",percentage:80},{soft:"Mentoring",percentage:90},{soft:"Remote Pair-Programming",percentage:85}],t9=[{name:"Starfoods",description:"Starfoods demonstrates my web development skills, emphasizing user-friendly interfaces, smooth shopping experiences, secure payments, and quick shipping. Explore my work to see how I can enhance your next project.",tags:[{name:"React",color:"blue-text-gradient"},{name:"Bootstrap",color:"green-text-gradient"},{name:"CSS",color:"pink-text-gradient"},{name:"Laravel",color:"blue-text-gradient"},{name:"SQL Server",color:"green-text-gradient"}],image:GH,source_code_link:"https://github.com/akbarsazish/starfoods",see_live_link:"https://star.starfoods.ir"},{name:"CRM",description:"A CRM (Customer Relationship Management) system, streamlines customer data management, and provides analytics. I specialize in creating adaptable CRM solutions that support sales, customer service, and growth, reflecting my skills in developing, data-driven applications.",tags:[{name:"JavScript",color:"blue-text-gradient"},{name:"jQuery",color:"green-text-gradient"},{name:"Bootstrap",color:"pink-text-gradient"},{name:"CSS",color:"blue-text-gradient"},{name:"Laravel",color:"green-text-gradient"},{name:"SQL Server",color:"pink-text-gradient"}],image:WH,source_code_link:"https://github.com/akbarsazish/crm-update",see_live_link:"https://star4.ir"},{name:"Math",description:"Math magicians is a website for all fans of mathematics. It allows user to make simple calculations and read random math related qoutes.",tags:[{name:"React",color:"blue-text-gradient"},{name:"CSS",color:"green-text-gradient"},{name:"HTML",color:"pink-text-gradient"}],image:jH,source_code_link:"https://github.com/akbarsazish/Math-Magicians",see_live_link:"https://math-magicians-9om6.onrender.com/"},{name:"Air Pollution",description:"Presenting a straightforward air pollution application that offers historical air quality data for various countries worldwide. Users can easily search for specific locations to access air pollution information.",tags:[{name:"React",color:"blue-text-gradient"},{name:"Redux Toolkit",color:"green-text-gradient"},{name:"CSS",color:"pink-text-gradient"},{name:"HTML",color:"blue-text-gradient"}],image:XH,source_code_link:"https://github.com/akbarsazish/Air-Pollution-API",see_live_link:"https://akbarsazish.github.io/Air-Pollution-API/"},{name:"Books",description:"Awesome Books website lets you add books with their titles and authors to a list and remove them when needed. The data is stored in the browser memory using localStorage for easy access. It is a simple tool for keeping track of your books.",tags:[{name:"React",color:"blue-text-gradient"},{name:"Redux Toolkit",color:"green-text-gradient"},{name:"CSS",color:"pink-text-gradient"},{name:"HTML",color:"blue-text-gradient"}],image:YH,source_code_link:"https://github.com/akbarsazish/Awesome-Books-ES6",see_live_link:"https://akbarsazish.github.io/Awesome-Books-ES6/"},{name:"Book Store",description:"An online small project which developed by react and redux toolkit that enable users that they can add their books and authors, see list of books and they are able edit and delete the book from the list.",tags:[{name:"React",color:"blue-text-gradient"},{name:"Redux Toolkit",color:"green-text-gradient"},{name:"CSS",color:"pink-text-gradient"},{name:"HTML",color:"blue-text-gradient"}],image:qH,source_code_link:"https://github.com/akbarsazish/Bookstore-React",see_live_link:"https://akbarsazish.github.io/Bookstore-React/"},{name:"X Academy",description:"X Academy is an online platform for web development and programming. I will be enhancing in the future and include tutorials on HTML, CSS, JavaScript, PHP, ASP.NET, and more, spanning front-end, back-end, mobile app development, and web design.",tags:[{name:"JavScript",color:"blue-text-gradient"},{name:"CSS",color:"pink-text-gradient"},{name:"HTML",color:"blue-text-gradient"}],image:ZH,source_code_link:"https://github.com/akbarsazish/Sazish-Academy",see_live_link:"https://akbarsazish.github.io/Sazish-Academy/"}],n9=()=>{const[n,e]=W.useState(""),[t,i]=W.useState(!1);return te.jsx("nav",{className:`${qn.paddingX} w-full flex items-center py-5 fixed top-0 z-20 bg-primary`,children:te.jsxs("div",{className:"w-full flex justify-between items-center mx-w-7xl mx-auto",children:[te.jsxs(KU,{className:"flex items-center gap-2",to:"/",onClick:()=>{e(""),window.scrollTo(0,0)},children:[te.jsx("img",{className:"w-9 h-9 object-contain",src:UH,alt:"logo"}),te.jsx("p",{className:"text-white font-bold cursor-pointer text[16px] flex",children:" Ali Akbar Sazish "})]}),te.jsxs("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:[lA.map(r=>te.jsx("li",{className:`${n===r.title?"text-white":"text-secondary"}
                   hover:text-white font-meduim cursor-pointer text[20px] `,onClick:()=>{e(r.title)},children:te.jsxs("a",{href:`#${r.id}`,children:[" ",r.title," "]})},r.id)),te.jsx("li",{className:"text-whitehover:text-white font-meduim cursor-pointer text[18px]",children:te.jsxs("a",{className:"inline",href:"../Ali Akbar Sazish CV.pdf",download:"Ali Akbar Sazish CV.pdf",children:["  Resume  ",te.jsx(aA,{className:"inline"})," "]})})]}),te.jsxs("div",{className:"sm:hidden flex flex-1 items-center justify-end",children:[te.jsx("img",{className:"w-[28px] h-[28px] object-contain cursor-pointer",onClick:()=>{i(!t)},src:t?FH:kH,alt:"menu"}),te.jsx("div",{className:`${t?"flex":"hidden"} p-6 black-gradient absolute top-12 right-0 mx-4 my-2 min-width-[144px] z-10 rounded-xl`,children:te.jsxs("ul",{className:"list-none flex justify-end items-start flex-col gap-4",children:[lA.map(r=>te.jsx("li",{className:`${n===r.title?"text-white":"text-secondary"}
                      font-poppins font-medium cursor-pointer text[16px] `,onClick:()=>{e(r.title),i(!t)},children:te.jsxs("a",{href:`#${r.id}`,children:[" ",r.title," "]})},r.id)),te.jsx("li",{className:"text-whitehover:text-white font-meduim cursor-pointer text[18px]",children:te.jsxs("a",{className:"inline",href:"../Ali Akbar Sazish CV.pdf",download:"Ali Akbar Sazish CV.pdf",children:["  Resume  ",te.jsx(aA,{className:"inline"})," "]})})]})})]})]})})};var $g={},RL={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(RL);var LL=RL.exports;$g.__esModule=!0;$g.default=void 0;var i9=BS(W),po=BS(AL),r9=BS(LL);function BS(n){return n&&n.__esModule?n:{default:n}}const IL=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),i9.default.createElement("div",{className:(0,r9.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));IL.propTypes={children:po.default.oneOfType([po.default.arrayOf(po.default.node),po.default.node]).isRequired,className:po.default.string,animate:po.default.bool,layout:po.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:po.default.string};var s9=IL;$g.default=s9;var Jg={};function O_(){return O_=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},O_.apply(this,arguments)}function o9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,U_(n,e)}function U_(n,e){return U_=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},U_(n,e)}function a9(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var k_=new Map,Fp=new WeakMap,uA=0,NL=void 0;function l9(n){NL=n}function u9(n){return n?(Fp.has(n)||(uA+=1,Fp.set(n,uA.toString())),Fp.get(n)):"0"}function c9(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?u9(n.root):n[e])}).toString()}function f9(n){var e=c9(n),t=k_.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,f=a.isIntersecting&&r.some(function(h){return a.intersectionRatio>=h});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=f),(l=i.get(a.target))==null||l.forEach(function(h){h(f,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},k_.set(e,t)}return t}function VS(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=NL),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=f9(t),o=s.id,a=s.observer,l=s.elements,f=l.get(n)||[];return l.has(n)||l.set(n,f),f.push(e),a.observe(n),function(){f.splice(f.indexOf(e),1),f.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),k_.delete(o))}}var h9=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function cA(n){return typeof n.children!="function"}var Zm=function(n){o9(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),cA(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,f=r.delay,h=r.fallbackInView;this._unobserveCb=VS(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:f},h)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!cA(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,f=a.as,h=a9(a,h9);return W.createElement(f||"div",O_({ref:this.handleNode},h),l)},e}(W.Component);Zm.displayName="InView";Zm.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function d9(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,f=e.initialInView,h=e.fallbackInView,d=W.useRef(),p=W.useState({inView:!!f}),m=p[0],y=p[1],w=W.useCallback(function(v){d.current!==void 0&&(d.current(),d.current=void 0),!l&&v&&(d.current=VS(v,function(S,M){y({inView:S,entry:M}),M.isIntersecting&&a&&d.current&&(d.current(),d.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},h))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,h,i]);W.useEffect(function(){!d.current&&m.entry&&!a&&!l&&y({inView:!!f})});var x=[w,m.inView,m.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}const p9=Object.freeze(Object.defineProperty({__proto__:null,InView:Zm,default:Zm,defaultFallbackInView:l9,observe:VS,useInView:d9},Symbol.toStringTag,{value:"Module"})),m9=JN(p9);Jg.__esModule=!0;Jg.default=void 0;var mo=HS(W),Jt=HS(AL),zp=HS(LL),g9=m9;function HS(n){return n&&n.__esModule?n:{default:n}}const DL=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:f=null,iconStyle:h=null,id:d="",position:p="",style:m=null,textClassName:y="",intersectionObserverProps:w={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:x=!1})=>mo.default.createElement(g9.InView,w,({inView:v,ref:S})=>mo.default.createElement("div",{ref:S,id:d,className:(0,zp.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":p==="left","vertical-timeline-element--right":p==="right","vertical-timeline-element--no-children":n===""}),style:m},mo.default.createElement(mo.default.Fragment,null,mo.default.createElement("span",{style:h,onClick:l,className:(0,zp.default)(a,"vertical-timeline-element-icon",{"bounce-in":v||x,"is-hidden":!(v||x)})},o),mo.default.createElement("div",{style:i,onClick:f,className:(0,zp.default)(y,"vertical-timeline-element-content",{"bounce-in":v||x,"is-hidden":!(v||x)})},mo.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,mo.default.createElement("span",{className:(0,zp.default)(s,"vertical-timeline-element-date")},r)))));DL.propTypes={children:Jt.default.oneOfType([Jt.default.arrayOf(Jt.default.node),Jt.default.node]),className:Jt.default.string,contentArrowStyle:Jt.default.shape({}),contentStyle:Jt.default.shape({}),date:Jt.default.node,dateClassName:Jt.default.string,icon:Jt.default.element,iconClassName:Jt.default.string,iconStyle:Jt.default.shape({}),iconOnClick:Jt.default.func,onTimelineElementClick:Jt.default.func,id:Jt.default.string,position:Jt.default.string,style:Jt.default.shape({}),textClassName:Jt.default.string,visible:Jt.default.bool,intersectionObserverProps:Jt.default.shape({root:Jt.default.object,rootMargin:Jt.default.string,threshold:Jt.default.number,triggerOnce:Jt.default.bool})};var v9=DL;Jg.default=v9;var OL={VerticalTimeline:$g.default,VerticalTimelineElement:Jg.default};const UL=W.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Qg=W.createContext({}),GS=W.createContext(null),e0=typeof document<"u",y9=e0?W.useLayoutEffect:W.useEffect,kL=W.createContext({strict:!1}),WS=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),x9="framerAppearId",FL="data-"+WS(x9);function _9(n,e,t,i){const{visualElement:r}=W.useContext(Qg),s=W.useContext(kL),o=W.useContext(GS),a=W.useContext(UL).reducedMotion,l=W.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const f=l.current;W.useInsertionEffect(()=>{f&&f.update(t,o)});const h=W.useRef(!!(t[FL]&&!window.HandoffComplete));return y9(()=>{f&&(f.render(),h.current&&f.animationState&&f.animationState.animateChanges())}),W.useEffect(()=>{f&&(f.updateFeatures(),!h.current&&f.animationState&&f.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),f}function vu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function S9(n,e,t){return W.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):vu(t)&&(t.current=i))},[e])}function ih(n){return typeof n=="string"||Array.isArray(n)}function t0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const jS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],XS=["initial",...jS];function n0(n){return t0(n.animate)||XS.some(e=>ih(n[e]))}function zL(n){return!!(n0(n)||n.variants)}function M9(n,e){if(n0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||ih(t)?t:void 0,animate:ih(i)?i:void 0}}return n.inherit!==!1?e:{}}function w9(n){const{initial:e,animate:t}=M9(n,W.useContext(Qg));return W.useMemo(()=>({initial:e,animate:t}),[fA(e),fA(t)])}function fA(n){return Array.isArray(n)?n.join(" "):n}const hA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rh={};for(const n in hA)rh[n]={isEnabled:e=>hA[n].some(t=>!!e[t])};function E9(n){for(const e in n)rh[e]={...rh[e],...n[e]}}const BL=W.createContext({}),VL=W.createContext({}),T9=Symbol.for("motionComponentSymbol");function A9({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&E9(n);function s(a,l){let f;const h={...W.useContext(UL),...a,layoutId:b9(a)},{isStatic:d}=h,p=w9(a),m=i(a,d);if(!d&&e0){p.visualElement=_9(r,m,h,e);const y=W.useContext(VL),w=W.useContext(kL).strict;p.visualElement&&(f=p.visualElement.loadFeatures(h,w,n,y))}return W.createElement(Qg.Provider,{value:p},f&&p.visualElement?W.createElement(f,{visualElement:p.visualElement,...h}):null,t(r,a,S9(m,p.visualElement,l),m,d,p.visualElement))}const o=W.forwardRef(s);return o[T9]=r,o}function b9({layoutId:n}){const e=W.useContext(BL).id;return e&&n!==void 0?e+"-"+n:n}function C9(n){function e(i,r={}){return A9(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const P9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YS(n){return typeof n!="string"||n.includes("-")?!1:!!(P9.indexOf(n)>-1||/[A-Z]/.test(n))}const Km={};function R9(n){Object.assign(Km,n)}const bh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ll=new Set(bh);function HL(n,{layout:e,layoutId:t}){return ll.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Km[n]||n==="opacity")}const ki=n=>!!(n&&n.getVelocity),L9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},I9=bh.length;function N9(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<I9;o++){const a=bh[o];if(n[a]!==void 0){const l=L9[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const GL=n=>e=>typeof e=="string"&&e.startsWith(n),WL=GL("--"),F_=GL("var(--"),D9=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,O9=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ho=(n,e,t)=>Math.min(Math.max(t,n),e),ul={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pf={...ul,transform:n=>Ho(0,1,n)},Bp={...ul,default:1},mf=n=>Math.round(n*1e5)/1e5,i0=/(-)?([\d]*\.?[\d])+/g,jL=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,U9=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ch(n){return typeof n=="string"}const Ph=n=>({test:e=>Ch(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),go=Ph("deg"),fs=Ph("%"),ut=Ph("px"),k9=Ph("vh"),F9=Ph("vw"),dA={...fs,parse:n=>fs.parse(n)/100,transform:n=>fs.transform(n*100)},pA={...ul,transform:Math.round},XL={borderWidth:ut,borderTopWidth:ut,borderRightWidth:ut,borderBottomWidth:ut,borderLeftWidth:ut,borderRadius:ut,radius:ut,borderTopLeftRadius:ut,borderTopRightRadius:ut,borderBottomRightRadius:ut,borderBottomLeftRadius:ut,width:ut,maxWidth:ut,height:ut,maxHeight:ut,size:ut,top:ut,right:ut,bottom:ut,left:ut,padding:ut,paddingTop:ut,paddingRight:ut,paddingBottom:ut,paddingLeft:ut,margin:ut,marginTop:ut,marginRight:ut,marginBottom:ut,marginLeft:ut,rotate:go,rotateX:go,rotateY:go,rotateZ:go,scale:Bp,scaleX:Bp,scaleY:Bp,scaleZ:Bp,skew:go,skewX:go,skewY:go,distance:ut,translateX:ut,translateY:ut,translateZ:ut,x:ut,y:ut,z:ut,perspective:ut,transformPerspective:ut,opacity:pf,originX:dA,originY:dA,originZ:ut,zIndex:pA,fillOpacity:pf,strokeOpacity:pf,numOctaves:pA};function qS(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,f=!1,h=!0;for(const d in e){const p=e[d];if(WL(d)){s[d]=p;continue}const m=XL[d],y=O9(p,m);if(ll.has(d)){if(l=!0,o[d]=y,!h)continue;p!==(m.default||0)&&(h=!1)}else d.startsWith("origin")?(f=!0,a[d]=y):r[d]=y}if(e.transform||(l||i?r.transform=N9(n.transform,t,h,i):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${p} ${m}`}}const ZS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function YL(n,e,t){for(const i in e)!ki(e[i])&&!HL(i,t)&&(n[i]=e[i])}function z9({transformTemplate:n},e,t){return W.useMemo(()=>{const i=ZS();return qS(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function B9(n,e,t){const i=n.style||{},r={};return YL(r,i,n),Object.assign(r,z9(n,e,t)),n.transformValues?n.transformValues(r):r}function V9(n,e,t){const i={},r=B9(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const H9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $m(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||H9.has(n)}let qL=n=>!$m(n);function G9(n){n&&(qL=e=>e.startsWith("on")?!$m(e):n(e))}try{G9(require("@emotion/is-prop-valid").default)}catch{}function W9(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(qL(r)||t===!0&&$m(r)||!e&&!$m(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function mA(n,e,t){return typeof n=="string"?n:ut.transform(e+t*n)}function j9(n,e,t){const i=mA(e,n.x,n.width),r=mA(t,n.y,n.height);return`${i} ${r}`}const X9={offset:"stroke-dashoffset",array:"stroke-dasharray"},Y9={offset:"strokeDashoffset",array:"strokeDasharray"};function q9(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?X9:Y9;n[s.offset]=ut.transform(-i);const o=ut.transform(e),a=ut.transform(t);n[s.array]=`${o} ${a}`}function KS(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...f},h,d,p){if(qS(n,f,h,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y,dimensions:w}=n;m.transform&&(w&&(y.transform=m.transform),delete m.transform),w&&(r!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=j9(w,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&q9(m,o,a,l,!1)}const ZL=()=>({...ZS(),attrs:{}}),$S=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Z9(n,e,t,i){const r=W.useMemo(()=>{const s=ZL();return KS(s,e,{enableHardwareAcceleration:!1},$S(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};YL(s,n.style,n),r.style={...s,...r.style}}return r}function K9(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(YS(t)?Z9:V9)(i,s,o,t),h={...W9(i,typeof t=="string",n),...l,ref:r},{children:d}=i,p=W.useMemo(()=>ki(d)?d.get():d,[d]);return W.createElement(t,{...h,children:p})}}function KL(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const $L=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JL(n,e,t,i){KL(n,e,void 0,i);for(const r in e.attrs)n.setAttribute($L.has(r)?r:WS(r),e.attrs[r])}function JS(n,e){const{style:t}=n,i={};for(const r in t)(ki(t[r])||e.style&&ki(e.style[r])||HL(r,n))&&(i[r]=t[r]);return i}function QL(n,e){const t=JS(n,e);for(const i in n)if(ki(n[i])||ki(e[i])){const r=bh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function QS(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function $9(n){const e=W.useRef(null);return e.current===null&&(e.current=n()),e.current}const Jm=n=>Array.isArray(n),J9=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Q9=n=>Jm(n)?n[n.length-1]||0:n;function fm(n){const e=ki(n)?n.get():n;return J9(e)?e.toValue():e}function eG({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:tG(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const eI=n=>(e,t)=>{const i=W.useContext(Qg),r=W.useContext(GS),s=()=>eG(n,e,i,r);return t?s():$9(s)};function tG(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=fm(s[p]);let{initial:o,animate:a}=n;const l=n0(n),f=zL(n);e&&f&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!t0(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const y=QS(n,m);if(!y)return;const{transitionEnd:w,transition:x,...v}=y;for(const S in v){let M=v[S];if(Array.isArray(M)){const T=h?M.length-1:0;M=M[T]}M!==null&&(r[S]=M)}for(const S in w)r[S]=w[S]}),r}const Mn=n=>n;class gA{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function nG(n){let e=new gA,t=new gA,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,f=!1,h=!1)=>{const d=h&&r,p=d?e:t;return f&&o.add(l),p.add(l)&&d&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const h=e.order[f];h(l),o.has(h)&&(a.schedule(h),n())}r=!1,s&&(s=!1,a.process(l))}};return a}const Vp=["prepare","read","update","preRender","render","postRender"],iG=40;function rG(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Vp.reduce((d,p)=>(d[p]=nG(()=>t=!0),d),{}),o=d=>s[d].process(r),a=()=>{const d=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(d-r.timestamp,iG),1),r.timestamp=d,r.isProcessing=!0,Vp.forEach(o),r.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,r.isProcessing||n(a)};return{schedule:Vp.reduce((d,p)=>{const m=s[p];return d[p]=(y,w=!1,x=!1)=>(t||l(),m.schedule(y,w,x)),d},{}),cancel:d=>Vp.forEach(p=>s[p].cancel(d)),state:r,steps:s}}const{schedule:Zt,cancel:qs,state:ai,steps:Dy}=rG(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mn,!0),sG={useVisualState:eI({scrapeMotionValuesFromProps:QL,createRenderState:ZL,onMount:(n,e,{renderState:t,latestValues:i})=>{Zt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Zt.render(()=>{KS(t,i,{enableHardwareAcceleration:!1},$S(e.tagName),n.transformTemplate),JL(e,t)})}})},oG={useVisualState:eI({scrapeMotionValuesFromProps:JS,createRenderState:ZS})};function aG(n,{forwardMotionProps:e=!1},t,i){return{...YS(n)?sG:oG,preloadedFeatures:t,useRender:K9(e),createVisualElement:i,Component:n}}function Us(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const tI=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function r0(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const lG=n=>e=>tI(e)&&n(e,r0(e));function zs(n,e,t,i){return Us(n,e,lG(t),i)}const uG=(n,e)=>t=>e(n(t)),Uo=(...n)=>n.reduce(uG);function nI(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const vA=nI("dragHorizontal"),yA=nI("dragVertical");function iI(n){let e=!1;if(n==="y")e=yA();else if(n==="x")e=vA();else{const t=vA(),i=yA();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function rI(){const n=iI(!0);return n?(n(),!1):!0}class Jo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function xA(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.pointerType==="touch"||rI())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&Zt.update(()=>a[i](s,o))};return zs(n.current,t,r,{passive:!n.getProps()[i]})}class cG extends Jo{mount(){this.unmount=Uo(xA(this.node,!0),xA(this.node,!1))}unmount(){}}class fG extends Jo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uo(Us(this.node.current,"focus",()=>this.onFocus()),Us(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const sI=(n,e)=>e?n===e?!0:sI(n,e.parentElement):!1;function Oy(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,r0(t))}class hG extends Jo{constructor(){super(...arguments),this.removeStartListeners=Mn,this.removeEndListeners=Mn,this.removeAccessibleListeners=Mn,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=zs(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:h,globalTapTarget:d}=this.node.getProps();Zt.update(()=>{!d&&!sI(this.node.current,a.target)?h&&h(a,l):f&&f(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=zs(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Uo(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Oy("up",(l,f)=>{const{onTap:h}=this.node.getProps();h&&Zt.update(()=>h(l,f))})};this.removeEndListeners(),this.removeEndListeners=Us(this.node.current,"keyup",o),Oy("down",(a,l)=>{this.startPress(a,l)})},t=Us(this.node.current,"keydown",e),i=()=>{this.isPressing&&Oy("cancel",(s,o)=>this.cancelPress(s,o))},r=Us(this.node.current,"blur",i);this.removeAccessibleListeners=Uo(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Zt.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!rI()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Zt.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=zs(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Us(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Uo(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const z_=new WeakMap,Uy=new WeakMap,dG=n=>{const e=z_.get(n.target);e&&e(n)},pG=n=>{n.forEach(dG)};function mG({root:n,...e}){const t=n||document;Uy.has(t)||Uy.set(t,{});const i=Uy.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(pG,{root:n,...e})),i[r]}function gG(n,e,t){const i=mG(e);return z_.set(n,t),i.observe(n),()=>{z_.delete(n),i.unobserve(n)}}const vG={some:0,all:1};class yG extends Jo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:vG[r]},a=l=>{const{isIntersecting:f}=l;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=f?h:d;p&&p(l)};return gG(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(xG(e,t))&&this.startObserver()}unmount(){}}function xG({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const _G={inView:{Feature:yG},tap:{Feature:hG},focus:{Feature:fG},hover:{Feature:cG}};function oI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function SG(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function MG(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function s0(n,e,t){const i=n.getProps();return QS(i,e,t!==void 0?t:i.custom,SG(n),MG(n))}let eM=Mn;const Xa=n=>n*1e3,Bs=n=>n/1e3,wG={current:!1},aI=n=>Array.isArray(n)&&typeof n[0]=="number";function lI(n){return!!(!n||typeof n=="string"&&uI[n]||aI(n)||Array.isArray(n)&&n.every(lI))}const $c=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,uI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$c([0,.65,.55,1]),circOut:$c([.55,0,1,.45]),backIn:$c([.31,.01,.66,-.59]),backOut:$c([.33,1.53,.69,.99])};function cI(n){if(n)return aI(n)?$c(n):Array.isArray(n)?n.map(cI):uI[n]}function EG(n,e,t,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const f={[e]:t};l&&(f.offset=l);const h=cI(a);return Array.isArray(h)&&(f.easing=h),n.animate(f,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function TG(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const fI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,AG=1e-7,bG=12;function CG(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=fI(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>AG&&++a<bG);return o}function Rh(n,e,t,i){if(n===e&&t===i)return Mn;const r=s=>CG(s,0,1,n,t);return s=>s===0||s===1?s:fI(r(s),e,i)}const PG=Rh(.42,0,1,1),RG=Rh(0,0,.58,1),hI=Rh(.42,0,.58,1),LG=n=>Array.isArray(n)&&typeof n[0]!="number",dI=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,pI=n=>e=>1-n(1-e),tM=n=>1-Math.sin(Math.acos(n)),mI=pI(tM),IG=dI(tM),gI=Rh(.33,1.53,.69,.99),nM=pI(gI),NG=dI(nM),DG=n=>(n*=2)<1?.5*nM(n):.5*(2-Math.pow(2,-10*(n-1))),OG={linear:Mn,easeIn:PG,easeInOut:hI,easeOut:RG,circIn:tM,circInOut:IG,circOut:mI,backIn:nM,backInOut:NG,backOut:gI,anticipate:DG},_A=n=>{if(Array.isArray(n)){eM(n.length===4);const[e,t,i,r]=n;return Rh(e,t,i,r)}else if(typeof n=="string")return OG[n];return n},iM=(n,e)=>t=>!!(Ch(t)&&U9.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),vI=(n,e,t)=>i=>{if(!Ch(i))return i;const[r,s,o,a]=i.match(i0);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},UG=n=>Ho(0,255,n),ky={...ul,transform:n=>Math.round(UG(n))},ka={test:iM("rgb","red"),parse:vI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+ky.transform(n)+", "+ky.transform(e)+", "+ky.transform(t)+", "+mf(pf.transform(i))+")"};function kG(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const B_={test:iM("#"),parse:kG,transform:ka.transform},yu={test:iM("hsl","hue"),parse:vI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+fs.transform(mf(e))+", "+fs.transform(mf(t))+", "+mf(pf.transform(i))+")"},vi={test:n=>ka.test(n)||B_.test(n)||yu.test(n),parse:n=>ka.test(n)?ka.parse(n):yu.test(n)?yu.parse(n):B_.parse(n),transform:n=>Ch(n)?n:n.hasOwnProperty("red")?ka.transform(n):yu.transform(n)},an=(n,e,t)=>-t*n+t*e+n;function Fy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function FG({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=Fy(l,a,n+1/3),s=Fy(l,a,n),o=Fy(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const zy=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},zG=[B_,ka,yu],BG=n=>zG.find(e=>e.test(n));function SA(n){const e=BG(n);let t=e.parse(n);return e===yu&&(t=FG(t)),t}const yI=(n,e)=>{const t=SA(n),i=SA(e),r={...t};return s=>(r.red=zy(t.red,i.red,s),r.green=zy(t.green,i.green,s),r.blue=zy(t.blue,i.blue,s),r.alpha=an(t.alpha,i.alpha,s),ka.transform(r))};function VG(n){var e,t;return isNaN(n)&&Ch(n)&&(((e=n.match(i0))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(jL))===null||t===void 0?void 0:t.length)||0)>0}const xI={regex:D9,countKey:"Vars",token:"${v}",parse:Mn},_I={regex:jL,countKey:"Colors",token:"${c}",parse:vi.parse},SI={regex:i0,countKey:"Numbers",token:"${n}",parse:ul.parse};function By(n,{regex:e,countKey:t,token:i,parse:r}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...s.map(r)))}function Qm(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&By(t,xI),By(t,_I),By(t,SI),t}function MI(n){return Qm(n).values}function wI(n){const{values:e,numColors:t,numVars:i,tokenised:r}=Qm(n),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(xI.token,o[l]):l<i+t?a=a.replace(_I.token,vi.transform(o[l])):a=a.replace(SI.token,mf(o[l]));return a}}const HG=n=>typeof n=="number"?0:n;function GG(n){const e=MI(n);return wI(n)(e.map(HG))}const Go={test:VG,parse:MI,createTransformer:wI,getAnimatableNone:GG},EI=(n,e)=>t=>`${t>0?e:n}`;function TI(n,e){return typeof n=="number"?t=>an(n,e,t):vi.test(n)?yI(n,e):n.startsWith("var(")?EI(n,e):bI(n,e)}const AI=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>TI(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},WG=(n,e)=>{const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=TI(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}},bI=(n,e)=>{const t=Go.createTransformer(e),i=Qm(n),r=Qm(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Uo(AI(i.values,r.values),t):EI(n,e)},sh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},MA=(n,e)=>t=>an(n,e,t);function jG(n){return typeof n=="number"?MA:typeof n=="string"?vi.test(n)?yI:bI:Array.isArray(n)?AI:typeof n=="object"?WG:MA}function XG(n,e,t){const i=[],r=t||jG(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Mn:e;a=Uo(l,a)}i.push(a)}return i}function CI(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(eM(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=XG(e,i,r),a=o.length,l=f=>{let h=0;if(a>1)for(;h<n.length-2&&!(f<n[h+1]);h++);const d=sh(n[h],n[h+1],f);return o[h](d)};return t?f=>l(Ho(n[0],n[s-1],f)):l}function YG(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=sh(0,e,i);n.push(an(t,1,r))}}function qG(n){const e=[0];return YG(e,n.length-1),e}function ZG(n,e){return n.map(t=>t*e)}function KG(n,e){return n.map(()=>e||hI).splice(0,n.length-1)}function eg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=LG(i)?i.map(_A):_A(i),s={done:!1,value:e[0]},o=ZG(t&&t.length===e.length?t:qG(e),n),a=CI(o,e,{ease:Array.isArray(r)?r:KG(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function PI(n,e){return e?n*(1e3/e):0}const $G=5;function RI(n,e,t){const i=Math.max(e-$G,0);return PI(t-n(i),e-i)}const Vy=.001,JG=.01,QG=10,eW=.05,tW=1;function nW({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=Ho(eW,tW,o),n=Ho(JG,QG,Bs(n)),o<1?(r=f=>{const h=f*o,d=h*n,p=h-t,m=V_(f,o),y=Math.exp(-d);return Vy-p/m*y},s=f=>{const d=f*o*n,p=d*t+t,m=Math.pow(o,2)*Math.pow(f,2)*n,y=Math.exp(-d),w=V_(Math.pow(f,2),o);return(-r(f)+Vy>0?-1:1)*((p-m)*y)/w}):(r=f=>{const h=Math.exp(-f*n),d=(f-t)*n+1;return-Vy+h*d},s=f=>{const h=Math.exp(-f*n),d=(t-f)*(n*n);return h*d});const a=5/n,l=rW(r,s,a);if(n=Xa(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const f=Math.pow(l,2)*i;return{stiffness:f,damping:o*2*Math.sqrt(i*f),duration:n}}}const iW=12;function rW(n,e,t){let i=t;for(let r=1;r<iW;r++)i=i-n(i)/e(i);return i}function V_(n,e){return n*Math.sqrt(1-e*e)}const sW=["duration","bounce"],oW=["stiffness","damping","mass"];function wA(n,e){return e.some(t=>n[t]!==void 0)}function aW(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!wA(n,oW)&&wA(n,sW)){const t=nW(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function LI({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:f,duration:h,velocity:d,isResolvedFromDuration:p}=aW({...i,velocity:-Bs(i.velocity||0)}),m=d||0,y=l/(2*Math.sqrt(a*f)),w=s-r,x=Bs(Math.sqrt(a/f)),v=Math.abs(w)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let S;if(y<1){const M=V_(x,y);S=T=>{const P=Math.exp(-y*x*T);return s-P*((m+y*x*w)/M*Math.sin(M*T)+w*Math.cos(M*T))}}else if(y===1)S=M=>s-Math.exp(-x*M)*(w+(m+x*w)*M);else{const M=x*Math.sqrt(y*y-1);S=T=>{const P=Math.exp(-y*x*T),b=Math.min(M*T,300);return s-P*((m+y*x*w)*Math.sinh(b)+M*w*Math.cosh(b))/M}}return{calculatedDuration:p&&h||null,next:M=>{const T=S(M);if(p)o.done=M>=h;else{let P=m;M!==0&&(y<1?P=RI(S,M,T):P=0);const b=Math.abs(P)<=t,L=Math.abs(s-T)<=e;o.done=b&&L}return o.value=o.done?s:T,o}}}function EA({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:f=.5,restSpeed:h}){const d=n[0],p={done:!1,value:d},m=D=>a!==void 0&&D<a||l!==void 0&&D>l,y=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let w=t*e;const x=d+w,v=o===void 0?x:o(x);v!==x&&(w=v-d);const S=D=>-w*Math.exp(-D/i),M=D=>v+S(D),T=D=>{const C=S(D),R=M(D);p.done=Math.abs(C)<=f,p.value=p.done?v:R};let P,b;const L=D=>{m(p.value)&&(P=D,b=LI({keyframes:[p.value,y(p.value)],velocity:RI(M,D,p.value),damping:r,stiffness:s,restDelta:f,restSpeed:h}))};return L(0),{calculatedDuration:null,next:D=>{let C=!1;return!b&&P===void 0&&(C=!0,T(D),L(D)),P!==void 0&&D>P?b.next(D-P):(!C&&T(D),p)}}}const lW=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Zt.update(e,!0),stop:()=>qs(e),now:()=>ai.isProcessing?ai.timestamp:performance.now()}},TA=2e4;function AA(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<TA;)e+=t,i=n.next(e);return e>=TA?1/0:e}const uW={decay:EA,inertia:EA,tween:eg,keyframes:eg,spring:LI};function tg({autoplay:n=!0,delay:e=0,driver:t=lW,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:f,onComplete:h,onUpdate:d,...p}){let m=1,y=!1,w,x;const v=()=>{x=new Promise(Y=>{w=Y})};v();let S;const M=uW[r]||eg;let T;M!==eg&&typeof i[0]!="number"&&(T=CI([0,100],i,{clamp:!1}),i=[0,100]);const P=M({...p,keyframes:i});let b;a==="mirror"&&(b=M({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let L="idle",D=null,C=null,R=null;P.calculatedDuration===null&&s&&(P.calculatedDuration=AA(P));const{calculatedDuration:z}=P;let Z=1/0,oe=1/0;z!==null&&(Z=z+o,oe=Z*(s+1)-o);let H=0;const K=Y=>{if(C===null)return;m>0&&(C=Math.min(C,Y)),m<0&&(C=Math.min(Y-oe/m,C)),D!==null?H=D:H=Math.round(Y-C)*m;const J=H-e*(m>=0?1:-1),Q=m>=0?J<0:J>oe;H=Math.max(J,0),L==="finished"&&D===null&&(H=oe);let le=H,ge=P;if(s){const nt=Math.min(H,oe)/Z;let Le=Math.floor(nt),Ce=nt%1;!Ce&&nt>=1&&(Ce=1),Ce===1&&Le--,Le=Math.min(Le,s+1),!!(Le%2)&&(a==="reverse"?(Ce=1-Ce,o&&(Ce-=o/Z)):a==="mirror"&&(ge=b)),le=Ho(0,1,Ce)*Z}const Ee=Q?{done:!1,value:i[0]}:ge.next(le);T&&(Ee.value=T(Ee.value));let{done:be}=Ee;!Q&&z!==null&&(be=m>=0?H>=oe:H<=0);const $e=D===null&&(L==="finished"||L==="running"&&be);return d&&d(Ee.value),$e&&N(),Ee},$=()=>{S&&S.stop(),S=void 0},se=()=>{L="idle",$(),w(),v(),C=R=null},N=()=>{L="finished",h&&h(),$(),w()},B=()=>{if(y)return;S||(S=t(K));const Y=S.now();l&&l(),D!==null?C=Y-D:(!C||L==="finished")&&(C=Y),L==="finished"&&v(),R=C,D=null,L="running",S.start()};n&&B();const V={then(Y,J){return x.then(Y,J)},get time(){return Bs(H)},set time(Y){Y=Xa(Y),H=Y,D!==null||!S||m===0?D=Y:C=S.now()-Y/m},get duration(){const Y=P.calculatedDuration===null?AA(P):P.calculatedDuration;return Bs(Y)},get speed(){return m},set speed(Y){Y===m||!S||(m=Y,V.time=Bs(H))},get state(){return L},play:B,pause:()=>{L="paused",D=H},stop:()=>{y=!0,L!=="idle"&&(L="idle",f&&f(),se())},cancel:()=>{R!==null&&K(R),se()},complete:()=>{L="finished"},sample:Y=>(C=0,K(Y))};return V}function cW(n){let e;return()=>(e===void 0&&(e=n()),e)}const fW=cW(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hW=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Hp=10,dW=2e4,pW=(n,e)=>e.type==="spring"||n==="backgroundColor"||!lI(e.ease);function mW(n,e,{onUpdate:t,onComplete:i,...r}){if(!(fW()&&hW.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l,f=!1;const h=()=>{l=new Promise(M=>{a=M})};h();let{keyframes:d,duration:p=300,ease:m,times:y}=r;if(pW(e,r)){const M=tg({...r,repeat:0,delay:0});let T={done:!1,value:d[0]};const P=[];let b=0;for(;!T.done&&b<dW;)T=M.sample(b),P.push(T.value),b+=Hp;y=void 0,d=P,p=b-Hp,m="linear"}const w=EG(n.owner.current,e,d,{...r,duration:p,ease:m,times:y}),x=()=>{f=!1,w.cancel()},v=()=>{f=!0,Zt.update(x),a(),h()};return w.onfinish=()=>{f||(n.set(TG(d,r)),i&&i(),v())},{then(M,T){return l.then(M,T)},attachTimeline(M){return w.timeline=M,w.onfinish=null,Mn},get time(){return Bs(w.currentTime||0)},set time(M){w.currentTime=Xa(M)},get speed(){return w.playbackRate},set speed(M){w.playbackRate=M},get duration(){return Bs(p)},play:()=>{o||(w.play(),qs(x))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:M}=w;if(M){const T=tg({...r,autoplay:!1});n.setWithVelocity(T.sample(M-Hp).value,T.sample(M).value,Hp)}v()},complete:()=>{f||w.finish()},cancel:v}}function gW({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const r=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Mn,pause:Mn,stop:Mn,then:s=>(s(),Promise.resolve()),cancel:Mn,complete:Mn});return e?tg({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const vW={type:"spring",stiffness:500,damping:25,restSpeed:10},yW=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),xW={type:"keyframes",duration:.8},_W={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SW=(n,{keyframes:e})=>e.length>2?xW:ll.has(n)?n.startsWith("scale")?yW(e[1]):vW:_W,H_=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Go.test(e)||e==="0")&&!e.startsWith("url(")),MW=new Set(["brightness","contrast","saturate","opacity"]);function wW(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(i0)||[];if(!i)return n;const r=t.replace(i,"");let s=MW.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const EW=/([a-z-]*)\(.*?\)/g,G_={...Go,getAnimatableNone:n=>{const e=n.match(EW);return e?e.map(wW).join(" "):n}},TW={...XL,color:vi,backgroundColor:vi,outlineColor:vi,fill:vi,stroke:vi,borderColor:vi,borderTopColor:vi,borderRightColor:vi,borderBottomColor:vi,borderLeftColor:vi,filter:G_,WebkitFilter:G_},rM=n=>TW[n];function II(n,e){let t=rM(n);return t!==G_&&(t=Go),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const NI=n=>/^0[^.\s]+$/.test(n);function AW(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||NI(n)}function bW(n,e,t,i){const r=H_(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let f=0;f<s.length;f++)s[f]===null&&(s[f]=f===0?o:s[f-1]),AW(s[f])&&l.push(f),typeof s[f]=="string"&&s[f]!=="none"&&s[f]!=="0"&&(a=s[f]);if(r&&l.length&&a)for(let f=0;f<l.length;f++){const h=l[f];s[h]=II(e,a)}return s}function CW({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:f,...h}){return!!Object.keys(h).length}function sM(n,e){return n[e]||n.default||n}const PW={skipAnimations:!1},oM=(n,e,t,i={})=>r=>{const s=sM(i,n)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Xa(o);const l=bW(e,n,t,s),f=l[0],h=l[l.length-1],d=H_(n,f),p=H_(n,h);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(CW(s)||(m={...m,...SW(n,m)}),m.duration&&(m.duration=Xa(m.duration)),m.repeatDelay&&(m.repeatDelay=Xa(m.repeatDelay)),!d||!p||wG.current||s.type===!1||PW.skipAnimations)return gW(m);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=mW(e,n,m);if(y)return y}return tg(m)};function ng(n){return!!(ki(n)&&n.add)}const DI=n=>/^\-?\d*\.?\d+$/.test(n);function aM(n,e){n.indexOf(e)===-1&&n.push(e)}function lM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class uM{constructor(){this.subscriptions=[]}add(e){return aM(this.subscriptions,e),()=>lM(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const RW=n=>!isNaN(parseFloat(n));class LW{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=ai;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Zt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Zt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=RW(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new uM);const i=this.events[e].add(t);return e==="change"?()=>{i(),Zt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?PI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hu(n,e){return new LW(n,e)}const OI=n=>e=>e.test(n),IW={test:n=>n==="auto",parse:n=>n},UI=[ul,ut,fs,go,F9,k9,IW],Hc=n=>UI.find(OI(n)),NW=[...UI,vi,Go],DW=n=>NW.find(OI(n));function OW(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Hu(t))}function UW(n,e){const t=s0(n,e);let{transitionEnd:i={},transition:r={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...i};for(const o in s){const a=Q9(s[o]);OW(n,o,a)}}function kW(n,e,t){var i,r;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],f=e[l];let h=null;Array.isArray(f)&&(h=f[0]),h===null&&(h=(r=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&r!==void 0?r:e[l]),h!=null&&(typeof h=="string"&&(DI(h)||NI(h))?h=parseFloat(h):!DW(h)&&Go.test(f)&&(h=II(l,f)),n.addValue(l,Hu(h,{owner:n})),t[l]===void 0&&(t[l]=h),h!==null&&n.setBaseTarget(l,h))}}function FW(n,e){return e?(e[n]||e.default||e).from:void 0}function zW(n,e,t){const i={};for(const r in n){const s=FW(r,e);if(s!==void 0)i[r]=s;else{const o=t.getValue(r);o&&(i[r]=o.get())}}return i}function BW({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function VW(n,e){const t=n.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}else return t!==e}function kI(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(s=i);const f=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const d in a){const p=n.getValue(d),m=a[d];if(!p||m===void 0||h&&BW(h,d))continue;const y={delay:t,elapsed:0,...sM(s||{},d)};if(window.HandoffAppearAnimations){const v=n.getProps()[FL];if(v){const S=window.HandoffAppearAnimations(v,d,p,Zt);S!==null&&(y.elapsed=S,y.isHandoff=!0)}}let w=!y.isHandoff&&!VW(p,m);if(y.type==="spring"&&(p.getVelocity()||y.velocity)&&(w=!1),p.animation&&(w=!1),w)continue;p.start(oM(d,p,m,n.shouldReduceMotion&&ll.has(d)?{type:!1}:y));const x=p.animation;ng(l)&&(l.add(d),x.then(()=>l.remove(d))),f.push(x)}return o&&Promise.all(f).then(()=>{o&&UW(n,o)}),f}function W_(n,e,t={}){const i=s0(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(kI(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:d}=r;return HW(n,e,f+l,h,d,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,f]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>f())}else return Promise.all([s(),o(t.delay)])}function HW(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(f=0)=>f*i:(f=0)=>a-f*i;return Array.from(n.variantChildren).sort(GW).forEach((f,h)=>{f.notify("AnimationStart",e),o.push(W_(f,e,{...s,delay:t+l(h)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(o)}function GW(n,e){return n.sortNodePosition(e)}function WW(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>W_(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=W_(n,e,t);else{const r=typeof e=="function"?s0(n,e,t.custom):e;i=Promise.all(kI(n,r,t))}return i.then(()=>n.notify("AnimationComplete",e))}const jW=[...jS].reverse(),XW=jS.length;function YW(n){return e=>Promise.all(e.map(({animation:t,options:i})=>WW(n,t,i)))}function qW(n){let e=YW(n);const t=KW();let i=!0;const r=(l,f)=>{const h=s0(n,f);if(h){const{transition:d,transitionEnd:p,...m}=h;l={...l,...m,...p}}return l};function s(l){e=l(n)}function o(l,f){const h=n.getProps(),d=n.getVariantContext(!0)||{},p=[],m=new Set;let y={},w=1/0;for(let v=0;v<XW;v++){const S=jW[v],M=t[S],T=h[S]!==void 0?h[S]:d[S],P=ih(T),b=S===f?M.isActive:null;b===!1&&(w=v);let L=T===d[S]&&T!==h[S]&&P;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),M.protectedKeys={...y},!M.isActive&&b===null||!T&&!M.prevProp||t0(T)||typeof T=="boolean")continue;let C=ZW(M.prevProp,T)||S===f&&M.isActive&&!L&&P||v>w&&P,R=!1;const z=Array.isArray(T)?T:[T];let Z=z.reduce(r,{});b===!1&&(Z={});const{prevResolvedValues:oe={}}=M,H={...oe,...Z},K=$=>{C=!0,m.has($)&&(R=!0,m.delete($)),M.needsAnimating[$]=!0};for(const $ in H){const se=Z[$],N=oe[$];if(y.hasOwnProperty($))continue;let B=!1;Jm(se)&&Jm(N)?B=!oI(se,N):B=se!==N,B?se!==void 0?K($):m.add($):se!==void 0&&m.has($)?K($):M.protectedKeys[$]=!0}M.prevProp=T,M.prevResolvedValues=Z,M.isActive&&(y={...y,...Z}),i&&n.blockInitialAnimation&&(C=!1),C&&(!L||R)&&p.push(...z.map($=>({animation:$,options:{type:S,...l}})))}if(m.size){const v={};m.forEach(S=>{const M=n.getBaseTarget(S);M!==void 0&&(v[S]=M)}),p.push({animation:v})}let x=!!p.length;return i&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(p):Promise.resolve()}function a(l,f,h){var d;if(t[l].isActive===f)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,f)}),t[l].isActive=f;const p=o(h,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function ZW(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!oI(e,n):!1}function xa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KW(){return{animate:xa(!0),whileInView:xa(),whileHover:xa(),whileTap:xa(),whileDrag:xa(),whileFocus:xa(),exit:xa()}}class $W extends Jo{constructor(e){super(e),e.animationState||(e.animationState=qW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),t0(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let JW=0;class QW extends Jo{constructor(){super(...arguments),this.id=JW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const e7={animation:{Feature:$W},exit:{Feature:QW}},bA=(n,e)=>Math.abs(n-e);function t7(n,e){const t=bA(n.x,e.x),i=bA(n.y,e.y);return Math.sqrt(t**2+i**2)}class FI{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Gy(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=t7(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=d,{timestamp:w}=ai;this.history.push({...y,timestamp:w});const{onStart:x,onMove:v}=this.handlers;p||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Hy(p,this.transformPagePoint),Zt.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Gy(d.type==="pointercancel"?this.lastMoveEventInfo:Hy(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),y&&y(d,x)},!tI(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=r0(e),a=Hy(o,this.transformPagePoint),{point:l}=a,{timestamp:f}=ai;this.history=[{...l,timestamp:f}];const{onSessionStart:h}=t;h&&h(e,Gy(a,this.history)),this.removeListeners=Uo(zs(this.contextWindow,"pointermove",this.handlePointerMove),zs(this.contextWindow,"pointerup",this.handlePointerUp),zs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qs(this.updatePoint)}}function Hy(n,e){return e?{point:e(n.point)}:n}function CA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Gy({point:n},e){return{point:n,delta:CA(n,zI(e)),offset:CA(n,n7(e)),velocity:i7(e,.1)}}function n7(n){return n[0]}function zI(n){return n[n.length-1]}function i7(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=zI(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Xa(e)));)t--;if(!i)return{x:0,y:0};const s=Bs(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ji(n){return n.max-n.min}function j_(n,e=0,t=.01){return Math.abs(n-e)<=t}function PA(n,e,t,i=.5){n.origin=i,n.originPoint=an(e.min,e.max,n.origin),n.scale=Ji(t)/Ji(e),(j_(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=an(t.min,t.max,n.origin)-n.originPoint,(j_(n.translate)||isNaN(n.translate))&&(n.translate=0)}function gf(n,e,t,i){PA(n.x,e.x,t.x,i?i.originX:void 0),PA(n.y,e.y,t.y,i?i.originY:void 0)}function RA(n,e,t){n.min=t.min+e.min,n.max=n.min+Ji(e)}function r7(n,e,t){RA(n.x,e.x,t.x),RA(n.y,e.y,t.y)}function LA(n,e,t){n.min=e.min-t.min,n.max=n.min+Ji(e)}function vf(n,e,t){LA(n.x,e.x,t.x),LA(n.y,e.y,t.y)}function s7(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?an(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?an(t,n,i.max):Math.min(n,t)),n}function IA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function o7(n,{top:e,left:t,bottom:i,right:r}){return{x:IA(n.x,t,r),y:IA(n.y,e,i)}}function NA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function a7(n,e){return{x:NA(n.x,e.x),y:NA(n.y,e.y)}}function l7(n,e){let t=.5;const i=Ji(n),r=Ji(e);return r>i?t=sh(e.min,e.max-i,n.min):i>r&&(t=sh(n.min,n.max-r,e.min)),Ho(0,1,t)}function u7(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const X_=.35;function c7(n=X_){return n===!1?n=0:n===!0&&(n=X_),{x:DA(n,"left","right"),y:DA(n,"top","bottom")}}function DA(n,e,t){return{min:OA(n,e),max:OA(n,t)}}function OA(n,e){return typeof n=="number"?n:n[e]||0}const UA=()=>({translate:0,scale:1,origin:0,originPoint:0}),xu=()=>({x:UA(),y:UA()}),kA=()=>({min:0,max:0}),An=()=>({x:kA(),y:kA()});function mr(n){return[n("x"),n("y")]}function BI({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function f7({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function h7(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function Wy(n){return n===void 0||n===1}function Y_({scale:n,scaleX:e,scaleY:t}){return!Wy(n)||!Wy(e)||!Wy(t)}function Aa(n){return Y_(n)||VI(n)||n.z||n.rotate||n.rotateX||n.rotateY}function VI(n){return FA(n.x)||FA(n.y)}function FA(n){return n&&n!=="0%"}function ig(n,e,t){const i=n-t,r=e*i;return t+r}function zA(n,e,t,i,r){return r!==void 0&&(n=ig(n,r,i)),ig(n,t,i)+e}function q_(n,e=0,t=1,i,r){n.min=zA(n.min,e,t,i,r),n.max=zA(n.max,e,t,i,r)}function HI(n,{x:e,y:t}){q_(n.x,e.translate,e.scale,e.originPoint),q_(n.y,t.translate,t.scale,t.originPoint)}function d7(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_u(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,HI(n,o)),i&&Aa(s.latestValues)&&_u(n,s.latestValues))}e.x=BA(e.x),e.y=BA(e.y)}function BA(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function xo(n,e){n.min=n.min+e,n.max=n.max+e}function VA(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=an(n.min,n.max,s);q_(n,e[t],e[i],o,e.scale)}const p7=["x","scaleX","originX"],m7=["y","scaleY","originY"];function _u(n,e){VA(n.x,e,p7),VA(n.y,e,m7)}function GI(n,e){return BI(h7(n.getBoundingClientRect(),e))}function g7(n,e,t){const i=GI(n,t),{scroll:r}=e;return r&&(xo(i.x,r.offset.x),xo(i.y,r.offset.y)),i}const WI=({current:n})=>n?n.ownerDocument.defaultView:null,v7=new WeakMap;class y7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(r0(h,"page").point)},s=(h,d)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=iI(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mr(x=>{let v=this.getAxisMotionValue(x).get()||0;if(fs.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const M=S.layout.layoutBox[x];M&&(v=Ji(M)*(parseFloat(v)/100))}}this.originPoint[x]=v}),y&&Zt.update(()=>y(h,d),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:w}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=x7(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),w&&w(h,d)},a=(h,d)=>this.stop(h,d),l=()=>mr(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new FI(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:WI(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Zt.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Gp(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=s7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&vu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=o7(r.layoutBox,t):this.constraints=!1,this.elastic=c7(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&mr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=u7(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!vu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=g7(i,r.root,this.visualElement.getTransformPagePoint());let o=a7(r.layout.layoutBox,s);if(t){const a=t(f7(o));this.hasMutatedConstraints=!!a,a&&(o=BI(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},f=mr(h=>{if(!Gp(h,t,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:i?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(f).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(oM(e,i,0,t))}stopAnimation(){mr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){mr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){mr(t=>{const{drag:i}=this.getProps();if(!Gp(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-an(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!vu(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};mr(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=l7({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),mr(o=>{if(!Gp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:f}=this.constraints[o];a.set(an(l,f,r[o]))})}addListeners(){if(!this.visualElement.current)return;v7.set(this.visualElement,this);const e=this.visualElement.current,t=zs(e,"pointerdown",l=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();vu(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Us(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:f})=>{this.isDragging&&f&&(mr(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=X_,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Gp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function x7(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class _7 extends Jo{constructor(e){super(e),this.removeGroupControls=Mn,this.removeListeners=Mn,this.controls=new y7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const HA=n=>(e,t)=>{n&&Zt.update(()=>n(e,t))};class S7 extends Jo{constructor(){super(...arguments),this.removePointerDownListener=Mn}onPointerDown(e){this.session=new FI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:HA(e),onStart:HA(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Zt.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=zs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function M7(){const n=W.useContext(GS);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=W.useId();return W.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const hm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Gc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ut.test(n))n=parseFloat(n);else return n;const t=GA(n,e.target.x),i=GA(n,e.target.y);return`${t}% ${i}%`}},w7={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Go.parse(n);if(r.length>5)return i;const s=Go.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const f=an(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=f),typeof r[3+o]=="number"&&(r[3+o]/=f),s(r)}};class E7 extends _r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;R9(T7),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),hm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Zt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jI(n){const[e,t]=M7(),i=W.useContext(BL);return _r.createElement(E7,{...n,layoutGroup:i,switchLayoutGroup:W.useContext(VL),isPresent:e,safeToRemove:t})}const T7={borderRadius:{...Gc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gc,borderTopRightRadius:Gc,borderBottomLeftRadius:Gc,borderBottomRightRadius:Gc,boxShadow:w7},XI=["TopLeft","TopRight","BottomLeft","BottomRight"],A7=XI.length,WA=n=>typeof n=="string"?parseFloat(n):n,jA=n=>typeof n=="number"||ut.test(n);function b7(n,e,t,i,r,s){r?(n.opacity=an(0,t.opacity!==void 0?t.opacity:1,C7(i)),n.opacityExit=an(e.opacity!==void 0?e.opacity:1,0,P7(i))):s&&(n.opacity=an(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<A7;o++){const a=`border${XI[o]}Radius`;let l=XA(e,a),f=XA(t,a);if(l===void 0&&f===void 0)continue;l||(l=0),f||(f=0),l===0||f===0||jA(l)===jA(f)?(n[a]=Math.max(an(WA(l),WA(f),i),0),(fs.test(f)||fs.test(l))&&(n[a]+="%")):n[a]=f}(e.rotate||t.rotate)&&(n.rotate=an(e.rotate||0,t.rotate||0,i))}function XA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const C7=YI(0,.5,mI),P7=YI(.5,.95,Mn);function YI(n,e,t){return i=>i<n?0:i>e?1:t(sh(n,e,i))}function YA(n,e){n.min=e.min,n.max=e.max}function pr(n,e){YA(n.x,e.x),YA(n.y,e.y)}function qA(n,e,t,i,r){return n-=e,n=ig(n,1/t,i),r!==void 0&&(n=ig(n,1/r,i)),n}function R7(n,e=0,t=1,i=.5,r,s=n,o=n){if(fs.test(e)&&(e=parseFloat(e),e=an(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=an(s.min,s.max,i);n===s&&(a-=e),n.min=qA(n.min,e,t,a,r),n.max=qA(n.max,e,t,a,r)}function ZA(n,e,[t,i,r],s,o){R7(n,e[t],e[i],e[r],e.scale,s,o)}const L7=["x","scaleX","originX"],I7=["y","scaleY","originY"];function KA(n,e,t,i){ZA(n.x,e,L7,t?t.x:void 0,i?i.x:void 0),ZA(n.y,e,I7,t?t.y:void 0,i?i.y:void 0)}function $A(n){return n.translate===0&&n.scale===1}function qI(n){return $A(n.x)&&$A(n.y)}function N7(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function ZI(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function JA(n){return Ji(n.x)/Ji(n.y)}class D7{constructor(){this.members=[]}add(e){aM(this.members,e),e.scheduleRender()}remove(e){if(lM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QA(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:f,rotateY:h}=t;l&&(i+=`rotate(${l}deg) `),f&&(i+=`rotateX(${f}deg) `),h&&(i+=`rotateY(${h}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const O7=(n,e)=>n.depth-e.depth;class U7{constructor(){this.children=[],this.isDirty=!1}add(e){aM(this.children,e),this.isDirty=!0}remove(e){lM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(O7),this.isDirty=!1,this.children.forEach(e)}}function k7(n,e){const t=performance.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(qs(i),n(s-e))};return Zt.read(i,!0),()=>qs(i)}function F7(n){window.MotionDebug&&window.MotionDebug.record(n)}function z7(n){return n instanceof SVGElement&&n.tagName!=="svg"}function B7(n,e,t){const i=ki(n)?n:Hu(n);return i.start(oM("",i,e,t)),i.animation}const eb=["","X","Y","Z"],V7={visibility:"hidden"},tb=1e3;let H7=0;const ba={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function KI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=H7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ba.totalNodes=ba.resolvedTargetDeltas=ba.recalculatedProjection=0,this.nodes.forEach(j7),this.nodes.forEach(K7),this.nodes.forEach($7),this.nodes.forEach(X7),F7(ba)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new U7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new uM),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=z7(o),this.instance=o;const{layoutId:l,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(f||l)&&(this.isLayoutDirty=!0),n){let d;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=k7(p,250),hm.hasAnimatedSinceResize&&(hm.hasAnimatedSinceResize=!1,this.nodes.forEach(ib))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||f)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||nj,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=h.getProps(),S=!this.targetLayout||!ZI(this.targetLayout,y)||m,M=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,M);const T={...sM(w,"layout"),onPlay:x,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else p||ib(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J7),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nb);return}this.isUpdating||this.nodes.forEach(q7),this.isUpdating=!1,this.nodes.forEach(Z7),this.nodes.forEach(G7),this.nodes.forEach(W7),this.clearAllSnapshots();const a=performance.now();ai.delta=Ho(0,1e3/60,a-ai.timestamp),ai.timestamp=a,ai.isProcessing=!0,Dy.update.process(ai),Dy.preRender.process(ai),Dy.render.process(ai),ai.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Y7),this.sharedNodes.forEach(Q7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!qI(this.projectionDelta),l=this.getTransformTemplate(),f=l?l(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;o&&(a||Aa(this.latestValues)||h)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),ij(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return An();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(xo(a.x,l.offset.x),xo(a.y,l.offset.y)),a}removeElementScroll(o){const a=An();pr(a,o);for(let l=0;l<this.path.length;l++){const f=this.path[l],{scroll:h,options:d}=f;if(f!==this.root&&h&&d.layoutScroll){if(h.isRoot){pr(a,o);const{scroll:p}=this.root;p&&(xo(a.x,-p.offset.x),xo(a.y,-p.offset.y))}xo(a.x,h.offset.x),xo(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=An();pr(l,o);for(let f=0;f<this.path.length;f++){const h=this.path[f];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&_u(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Aa(h.latestValues)&&_u(l,h.latestValues)}return Aa(this.latestValues)&&_u(l,this.latestValues),l}removeTransform(o){const a=An();pr(a,o);for(let l=0;l<this.path.length;l++){const f=this.path[l];if(!f.instance||!Aa(f.latestValues))continue;Y_(f.latestValues)&&f.updateSnapshot();const h=An(),d=f.measurePageBox();pr(h,d),KA(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return Aa(this.latestValues)&&KA(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ai.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==l;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=ai.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),vf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),pr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pr(this.target,this.layout.layoutBox),HI(this.target,this.targetDelta)):pr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),vf(this.relativeTargetOrigin,this.target,m.target),pr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ba.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Y_(this.parent.latestValues)||VI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let f=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(f=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===ai.timestamp&&(f=!1),f)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;pr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;d7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=xu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=xu(),this.projectionDeltaWithTransform=xu());const w=this.projectionTransform;gf(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=QA(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),ba.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,f=l?l.latestValues:{},h={...this.latestValues},d=xu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=An(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,w=m!==y,x=this.getStack(),v=!x||x.members.length<=1,S=!!(w&&!v&&this.options.crossfade===!0&&!this.path.some(tj));this.animationProgress=0;let M;this.mixTargetDelta=T=>{const P=T/1e3;rb(d.x,o.x,P),rb(d.y,o.y,P),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vf(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ej(this.relativeTarget,this.relativeTargetOrigin,p,P),M&&N7(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=An()),pr(M,this.relativeTarget)),w&&(this.animationValues=h,b7(h,f,this.latestValues,P,S,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zt.update(()=>{hm.hasAnimatedSinceResize=!0,this.currentAnimation=B7(0,tb,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:f,latestValues:h}=o;if(!(!a||!l||!f)){if(this!==o&&this.layout&&f&&$I(this.options.animationType,this.layout.layoutBox,f.layoutBox)){l=this.target||An();const d=Ji(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Ji(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}pr(a,l),_u(a,h),gf(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new D7),this.sharedNodes.get(o).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const f=this.getStack();f&&f.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const f={};for(let h=0;h<eb.length;h++){const d="rotate"+eb[h];l[d]&&(f[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in f)o.setStaticValue(h,f[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return V7;const f={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=fm(o==null?void 0:o.pointerEvents)||"",f.transform=h?h(this.latestValues,""):"none",f;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=fm(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Aa(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),f.transform=QA(this.projectionDeltaWithTransform,this.treeScale,p),h&&(f.transform=h(p,f.transform));const{x:m,y}=this.projectionDelta;f.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?f.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:f.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in Km){if(p[w]===void 0)continue;const{correct:x,applyTo:v}=Km[w],S=f.transform==="none"?p[w]:x(p[w],d);if(v){const M=v.length;for(let T=0;T<M;T++)f[v[T]]=S}else f[w]=S}return this.options.layoutId&&(f.pointerEvents=d===this?fm(o==null?void 0:o.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(nb),this.root.sharedNodes.clear()}}}function G7(n){n.updateLayout()}function W7(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?mr(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Ji(p);p.min=i[d].min,p.max=p.min+m}):$I(s,t.layoutBox,i)&&mr(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Ji(i[d]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const a=xu();gf(a,i,t.layoutBox);const l=xu();o?gf(l,n.applyTransform(r,!0),t.measuredBox):gf(l,i,t.layoutBox);const f=!qI(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const y=An();vf(y,t.layoutBox,p.layoutBox);const w=An();vf(w,i,m.layoutBox),ZI(y,w)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:f,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function j7(n){ba.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function X7(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Y7(n){n.clearSnapshot()}function nb(n){n.clearMeasurements()}function q7(n){n.isLayoutDirty=!1}function Z7(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function ib(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function K7(n){n.resolveTargetDelta()}function $7(n){n.calcProjection()}function J7(n){n.resetRotation()}function Q7(n){n.removeLeadSnapshot()}function rb(n,e,t){n.translate=an(e.translate,0,t),n.scale=an(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function sb(n,e,t,i){n.min=an(e.min,t.min,i),n.max=an(e.max,t.max,i)}function ej(n,e,t,i){sb(n.x,e.x,t.x,i),sb(n.y,e.y,t.y,i)}function tj(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const nj={duration:.45,ease:[.4,0,.1,1]},ob=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),ab=ob("applewebkit/")&&!ob("chrome/")?Math.round:Mn;function lb(n){n.min=ab(n.min),n.max=ab(n.max)}function ij(n){lb(n.x),lb(n.y)}function $I(n,e,t){return n==="position"||n==="preserve-aspect"&&!j_(JA(e),JA(t),.2)}const rj=KI({attachResizeListener:(n,e)=>Us(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jy={current:void 0},JI=KI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!jy.current){const n=new rj({});n.mount(window),n.setOptions({layoutScroll:!0}),jy.current=n}return jy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),sj={pan:{Feature:S7},drag:{Feature:_7,ProjectionNode:JI,MeasureLayout:jI}},oj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function aj(n){const e=oj.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function Z_(n,e,t=1){const[i,r]=aj(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return DI(o)?parseFloat(o):o}else return F_(r)?Z_(r,e,t+1):r}function lj(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const s=r.get();if(!F_(s))return;const o=Z_(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!F_(s))continue;const o=Z_(s,i);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const uj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),QI=n=>uj.has(n),cj=n=>Object.keys(n).some(QI),ub=n=>n===ul||n===ut,cb=(n,e)=>parseFloat(n.split(", ")[e]),fb=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return cb(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?cb(s[1],n):0}},fj=new Set(["x","y","z"]),hj=bh.filter(n=>!fj.has(n));function dj(n){const e=[];return hj.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Gu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:fb(4,13),y:fb(5,14)};Gu.translateX=Gu.x;Gu.translateY=Gu.y;const pj=(n,e,t)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(f=>{a[f]=Gu[f](i,s)}),e.render();const l=e.measureViewportBox();return t.forEach(f=>{const h=e.getValue(f);h&&h.jump(a[f]),n[f]=Gu[f](l,s)}),n},mj=(n,e,t={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(QI);let s=[],o=!1;const a=[];if(r.forEach(l=>{const f=n.getValue(l);if(!n.hasValue(l))return;let h=t[l],d=Hc(h);const p=e[l];let m;if(Jm(p)){const y=p.length,w=p[0]===null?1:0;h=p[w],d=Hc(h);for(let x=w;x<y&&p[x]!==null;x++)m?eM(Hc(p[x])===m):m=Hc(p[x])}else m=Hc(p);if(d!==m)if(ub(d)&&ub(m)){const y=f.get();typeof y=="string"&&f.set(parseFloat(y)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===ut&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(h===0||p===0)?h===0?f.set(m.transform(h)):e[l]=d.transform(p):(o||(s=dj(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],f.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,f=pj(e,n,a);return s.length&&s.forEach(([h,d])=>{n.getValue(h).set(d)}),n.render(),e0&&l!==null&&window.scrollTo({top:l}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function gj(n,e,t,i){return cj(e)?mj(n,e,t,i):{target:e,transitionEnd:i}}const vj=(n,e,t,i)=>{const r=lj(n,e,i);return e=r.target,i=r.transitionEnd,gj(n,e,t,i)},K_={current:null},eN={current:!1};function yj(){if(eN.current=!0,!!e0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>K_.current=n.matches;n.addListener(e),e()}else K_.current=!1}function xj(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(ki(s))n.addValue(r,s),ng(i)&&i.add(r);else if(ki(o))n.addValue(r,Hu(s,{owner:n})),ng(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,Hu(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const hb=new WeakMap,tN=Object.keys(rh),_j=tN.length,db=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Sj=XS.length;class Mj{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Zt.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=n0(t),this.isVariantNode=zL(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(t,{});for(const d in h){const p=h[d];a[d]!==void 0&&ki(p)&&(p.set(a[d],!1),ng(f)&&f.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,hb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),eN.current||yj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:K_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hb.delete(this.current),this.projection&&this.projection.unmount(),qs(this.notifyUpdate),qs(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=ll.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Zt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<_j;l++){const f=tN[l],{isEnabled:h,Feature:d,ProjectionNode:p,MeasureLayout:m}=rh[f];p&&(o=p),h(t)&&(!this.features[f]&&d&&(this.features[f]=new d(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:f,drag:h,dragConstraints:d,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:f,alwaysMeasureLayout:!!h||d&&vu(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<db.length;i++){const r=db[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=xj(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<Sj;i++){const r=XS[i],s=this.props[r];(ih(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Hu(t,{owner:this}),this.addValue(e,i)),i}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(t=QS(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ki(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new uM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class nN extends Mj{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:r},s){let o=zW(i,e||{},this);if(r&&(t&&(t=r(t)),i&&(i=r(i)),o&&(o=r(o))),s){kW(this,i,o);const a=vj(this,i,o,t);t=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:t,...i}}}function wj(n){return window.getComputedStyle(n)}class Ej extends nN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ll.has(t)){const i=rM(t);return i&&i.default||0}else{const i=wj(e),r=(WL(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return GI(e,t)}build(e,t,i,r){qS(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return JS(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ki(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){KL(e,t,i,r)}}class Tj extends nN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ll.has(t)){const i=rM(t);return i&&i.default||0}return t=$L.has(t)?t:WS(t),e.getAttribute(t)}measureInstanceViewportBox(){return An()}scrapeMotionValuesFromProps(e,t){return QL(e,t)}build(e,t,i,r){KS(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){JL(e,t,i,r)}mount(e){this.isSVGTag=$S(e.tagName),super.mount(e)}}const Aj=(n,e)=>YS(n)?new Tj(e,{enableHardwareAcceleration:!1}):new Ej(e,{enableHardwareAcceleration:!0}),bj={layout:{ProjectionNode:JI,MeasureLayout:jI}},Cj={...e7,..._G,...sj,...bj},Wo=C9((n,e)=>aG(n,e,Cj,Aj)),cM=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),iN=(n,e,t,i)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),pb=(n,e,t,i)=>({hidden:{x:n==="left"?"-100%":n==="right"?"100%":0,y:n==="up"||n==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),Pj=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),rN=(n,e)=>function(){return te.jsxs(Wo.section,{variants:{staggerContainer:Pj},initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${qn.paddingX} max-w-7xl mx-auto relative z-0`,children:[te.jsx("span",{className:"hash-span",id:e,children:"  "}),te.jsx(n,{})]})},Rj=({experience:n})=>te.jsxs(OL.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid #232631"},date:n.date,iconStyle:{background:n.iconBg},icon:te.jsx("div",{className:"flex justify-center items-center w-full h-full",children:te.jsx("img",{src:n.icon,alt:n.company_name,className:"w-[60%] h-[60%] object-contain"})}),children:[te.jsxs("div",{children:[te.jsx("h3",{className:"text-white font-bold text-[24px]",children:n.title}),te.jsxs("p",{className:"text-secondary text-[16px] font-semibold",children:[" ",n.company_name," "]})]}),te.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((e,t)=>te.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`experience-point-${t}`))})]}),Lj=()=>te.jsxs(te.Fragment,{children:[te.jsxs(Wo.div,{variants:cM(),className:"mt-10",children:[te.jsx("p",{className:qn.sectionSubText,children:" What I have done so far! "}),te.jsx("h2",{className:qn.sectionHeadText,children:" Work Experience. "})]}),te.jsx("div",{className:"mt-20 flex flex-col",children:te.jsx(OL.VerticalTimeline,{layout:"1-column-left",children:KH.map((n,e)=>te.jsx(Rj,{experience:n},e))})})]}),Ij=rN(Lj,"work");var Nj=Object.defineProperty,Dj=Object.defineProperties,Oj=Object.getOwnPropertyDescriptors,mb=Object.getOwnPropertySymbols,Uj=Object.prototype.hasOwnProperty,kj=Object.prototype.propertyIsEnumerable,gb=(n,e,t)=>e in n?Nj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wc=(n,e)=>{for(var t in e||(e={}))Uj.call(e,t)&&gb(n,t,e[t]);if(mb)for(var t of mb(e))kj.call(e,t)&&gb(n,t,e[t]);return n},jc=(n,e)=>Dj(n,Oj(e)),Fj=class extends W.Component{constructor(n){super(n),this.ref=_r.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:jc(Wc({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:jc(Wc({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:jc(Wc({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:jc(Wc({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,i=Math.min(Math.max(e,0),1),r=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-i*this.settings.max)).toFixed(2),o=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),a=i*100,l=r*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:jc(Wc({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return te.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const zj=({index:n,name:e,tags:t,description:i,image:r,source_code_link:s,see_live_link:o})=>te.jsx(Wo.div,{variants:iN("up","spring",n*.5,.7),children:te.jsxs(Fj,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-4 rounded-2xl sm:w-[360px] w-full",children:[te.jsx("div",{className:"relative w-full h-[230px]",children:te.jsx("img",{src:r,alt:e,className:"w-full h-full object-cover rounded-2xl"})}),te.jsxs("div",{className:"mt-5",children:[te.jsxs("div",{className:"text-white font-bold text-[24px]",children:[" ",e,te.jsx("a",{className:"py-2 px-2 mx-1 text-[12px] font-400 bg-black text-[#915eff] hover:text-white rounded float-right",href:s,target:"_blank",rel:"noreferrer",children:" See Source "}),te.jsx("a",{className:"py-2 px-2 mx-1 text-[12px] font-400 bg-black text-[#915eff] hover:text-white rounded float-right",href:o,target:"_blank",rel:"noreferrer",children:" See Live "})]}),te.jsxs("p",{className:"mt-2 text-secondary text-[14px]",children:[" ",i," "]})]}),te.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.map(a=>te.jsxs("p",{className:`text-[14px] ${a.color}`,children:[" #",a.name," "]},a.name))})]})}),Bj=()=>te.jsxs("div",{className:`${qn.paddingX} max-w-7xl mx-auto relative z-0 mt-10`,children:[te.jsxs(Wo.div,{variants:cM(),children:[te.jsx("p",{className:qn.sectionSubText,children:" My Projects "}),te.jsx("h2",{className:qn.sectionHeadText,children:" Projects. "})]}),te.jsx("div",{className:"w-full flex",children:te.jsx(Wo.p,{variants:iN("","",1.1,1),className:"mt-3 text-secondary text-[17px] mx-w-3xl leading-[30px]",children:"The following projects showcase my skills and experience through real-world examples of my work. Each project is briefly described, with links to code repositories and live demos included. They reflect my ability to solve complex problems, work with different technologies, and manage projects effectively."})}),te.jsx("div",{className:"mt-20 flex flex-wrap gap-8",children:t9.map((n,e)=>te.jsx(zj,{index:e,...n},`project-${e}`))})]}),oh={_origin:"https://api.emailjs.com"},Vj=(n,e="https://api.emailjs.com")=>{oh._userID=n,oh._origin=e},sN=(n,e,t)=>{if(!n)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class vb{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const oN=(n,e,t={})=>new Promise((i,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new vb(o);a.status===200||a.text==="OK"?i(a):r(a)}),s.addEventListener("error",({target:o})=>{r(new vb(o))}),s.open("POST",oh._origin+n,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}),Hj=(n,e,t,i)=>{const r=i||oh._userID;return sN(r,n,e),oN("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:r,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},Gj=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},Wj=(n,e,t,i)=>{const r=i||oh._userID,s=Gj(t);sN(r,n,e);const o=new FormData(s);return o.append("lib_version","3.12.1"),o.append("service_id",n),o.append("template_id",e),o.append("user_id",r),oN("/api/v1.0/email/send-form",o)},jj={init:Vj,send:Hj,sendForm:Wj},Xj=()=>{const n=W.useRef(),[e,t]=W.useState({name:"",email:"",message:""}),[i,r]=W.useState(!1),s=a=>{const{target:l}=a,{name:f,value:h}=l;t({...e,[f]:h})},o=a=>{a.preventDefault(),r(!0),jj.send("service_myecvbh","template_scugigi",{from_name:e.name,to_name:"Ali Akbar Sazish",from_email:e.email,to_email:"sazishaliakbar@gmail.com",message:e.message},"FdmjrX6OKj2YgQN-c").then(()=>{r(!1),alert("Thank you. I get back to you as soom as possible!"),t({name:"",email:"",message:""})},l=>{r(!1),console.log(l),alert("Something went to wrong!")})};return te.jsxs("div",{className:"xl:mt-12 flex xl:flex-row flex-col-reverse gap-10 overflow-hidden",children:[te.jsxs(Wo.div,{variants:pb("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl mb-10",children:[te.jsx("p",{className:qn.sectionSubText,children:"Get in touch"}),te.jsx("h3",{className:qn.sectionHeadText,children:"Contact."}),te.jsxs("form",{ref:n,onSubmit:o,className:"mt-12 flex flex-col gap-8",children:[te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:"text-white font-medium mb-4",children:"Your Name"}),te.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"What's your good name?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:"text-white font-medium mb-4",children:"Your email"}),te.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"What's your web address?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:"text-white font-medium mb-4",children:"Your Message"}),te.jsx("textarea",{rows:7,name:"message",value:e.message,onChange:s,placeholder:"What you want to say?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),te.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl outline-none w-fit text-white font-bold shadow-md shadow-primary",children:i?"Sending...":"Send"})]})]}),te.jsx(Wo.div,{variants:pb("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:te.jsx(pH,{})})]})},Yj=rN(Xj,"contact"),Wp=({skill:n,percentage:e})=>{const t=W.useRef(null),[i,r]=W.useState(!1);return W.useEffect(()=>{const s=()=>{if(t.current){const{top:o,bottom:a}=t.current.getBoundingClientRect(),l=o>=0&&a<=window.innerHeight;r(!!l)}};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[]),te.jsxs("div",{className:"skill-bar",ref:t,children:[te.jsxs("div",{className:"skill-name",children:[te.jsx("span",{children:n}),te.jsx("div",{className:`percentage ${i?"animate":""}`,children:te.jsxs("div",{className:"skill-percentage",children:[e,"%"]})})]}),te.jsx("div",{className:`bar-container ${i?"animate":""}`,children:te.jsx("div",{className:"fill",style:{width:`${e}%`}})})]})};function qj(){return te.jsxs("section",{id:"skills",className:`${qn.paddingX} max-w-7xl mx-auto relative z-0 mt-10`,children:[te.jsxs(Wo.div,{variants:cM(),className:"mt-5",children:[te.jsx("p",{className:qn.sectionSubText,children:" Technologies && Skills "}),te.jsx("h2",{className:qn.sectionHeadText,children:" Skills. "})]}),te.jsxs("div",{className:"skills",children:[te.jsxs("div",{className:"technical-skills",children:[te.jsx("h3",{className:"font-bold text-[24px] sm:mt-5",children:" Front-End "}),$H.map((n,e)=>te.jsx(Wp,{skill:n.front,percentage:n.percentage},e))]}),te.jsxs("div",{className:"technical-skills",children:[te.jsx("h3",{className:"font-bold text-[24px] sm:mt-5",children:" Back-End "}),JH.map((n,e)=>te.jsx(Wp,{skill:n.backEnd,percentage:n.percentage},e))]}),te.jsxs("div",{className:" personal-skills",children:[te.jsx("h3",{className:"font-bold text-[24px] sm:mt-5",children:" Tools & Methods"}),QH.map((n,e)=>te.jsx(Wp,{skill:n.tools,percentage:n.percentage},e))]}),te.jsxs("div",{className:" personal-skills",children:[te.jsx("h3",{className:"font-bold text-[24px] sm:mt-5",children:" Professional "}),e9.map((n,e)=>te.jsx(Wp,{skill:n.soft,percentage:n.percentage},e))]})]})]})}const Zj=()=>te.jsx(YU,{children:te.jsxs("div",{className:"relateive z-0 bg-primary",children:[te.jsxs("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:[te.jsx(n9,{}),te.jsx(OH,{})]}),te.jsx(Ij,{}),te.jsx(qj,{}),te.jsx(Bj,{}),te.jsx(Yj,{}),te.jsx(gH,{})]})});Xy.createRoot(document.getElementById("root")).render(te.jsx(_r.StrictMode,{children:te.jsx(Zj,{})}));
